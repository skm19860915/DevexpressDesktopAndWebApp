(function(a){a.createUIComponent("ScheduleChangeModification",(function(){var b=function(){var c=function(f){var e=$("schedule_change_status").value;var d=$("schedule_change_booking_id").value;new Ajax.Request("/travel/itinerary_details_schedule_change_modification_process.cfm",{parameters:{status:e,booking_id:d},evalScripts:true,onCreate:function(){},onLoading:function(g){},onComplete:function(g){},onSuccess:function(g,h){$("schedule_change_success_message").show();$("current_status").innerHTML=e;},onException:function(g,h){$("schedule_change_failure_message").show();},onFailure:function(g){$("schedule_change_failure_message").show();}});};this.applyListeners=function(){if($("schedule_change_modification_update")){$("schedule_change_modification_update").observe("click",c);}};this.removeListeners=function(){};};return{initialize:function(){if($("schedule_change_success_message")){$("schedule_change_success_message").hide();}if($("schedule_change_failure_message")){$("schedule_change_failure_message").hide();}return new b();},applyListeners:function(c){c.applyListeners();},removeListeners:function(c){c.removeListeners();}};})());a.createUIComponent("detailPricingMatrix",(function(){var b=function(c){var f=$H({anchorSelector:"a.show_detail_pricing_matrix"}).merge(c).toObject();var d=new EzRez.UI.LightBox({className:"detailPricingMatrix",type:"inline"});var e=function(g){Event.stop(g);var h=$(g.target);d.show(h);};this.applyListeners=function(){$$(f.anchorSelector).each(function(g){g.observe("click",e);});};this.removeListeners=function(){$$(f.anchorSelector).each(function(g){g.stopObserving("click",e);});};};return{initialize:function(c){return new b(c);},applyListeners:function(c){c.applyListeners();},removeListeners:function(c){c.removeListeners();},unload:function(c){c.removeListeners();}};})());})(EzRez.Application);(function(b){var a=EzRez.Util.Event.pubsub;b.createUIComponent("car-shop-filtering",(function(){var c=function(g){var ab=$H({availableFilters:{carClasses:[],companies:{},destinations:[]},idListOfClickFilters:["filterFormCarClass","filterFormCompanies","filterFormCarDestination"],hiddenClass:"hiddenBlock",logoBaseUrl:"",numResults:0}).merge(g).toObject();var Z,I;var m=false;var R=function(i){if(Z){Z.innerHTML=parseInt(i,10);}};this.setFilteredResultsTotal=R;var n=function(i){if(I){I.innerHTML=parseInt(i,10);}};var A=document.getElementById("filtersContainer");var aa;var q=document.getElementById("filterFormCompanies");var N=document.getElementById("filterFormCarDestination");var x=document.getElementById("filterFormCarClass");var j=function(){var af={};for(var ad=aa.length-1;ad>-1;ad--){var i=aa[ad].type.toLowerCase();if(i=="checkbox"&&!aa[ad].checked){continue;}var l=aa[ad].name;var ae=aa[ad].value;if(!af[l]){af[l]=[];}if(af[l].indexOf(ae)<0){af[l].push(ae);}}return af;};var H=function(){for(var i in M){M[i](null);}};var z=function(i){if(i){Event.stop(i);}H();var k=b.use("car-shop-filtering").currentActiveFilters();b.use("pagination-handler").getPageContentAndUpdate(1,null,k);};function s(l){var af=l.split(" "),k=af.length;if(k==1){return af[0];}var ae="";for(var ad=0;ad<k;ad++){ae+=af[ad].charAt(0).toUpperCase()+af[ad].substring(1).toLowerCase()+" ";}return ae;}var f=function(aj,ag,ak){var an=0;var ah=null;var al=Element.select(aj,"ul")[0];var ai="";for(var l in ag){an++;var aq=ag[l];var ad=al.cloneNode(true);var am=Element.select(ad,".label")[0];var ao=Element.select(ad,"input")[0];var i=Element.select(ad,"li")[0];ao.setAttribute("checked",true);var ap=new String(aq.value).escapeHTML();var k=ap;if(typeof aq.name!=="undefined"){k=new String(aq.name).escapeHTML();}var ae=aq.useImage||false;ao.value=ap;if(ak===true){am.innerHTML=s(k);}else{am.innerHTML=k;}if(ae!==false){var af=new Image();af.src=ae;af.className="filterLogo";i.insertBefore(af,am);}Element.addClassName(i,ae?"hasLogo":"noLogo");if(ap=="MULTIPLE"){ah=ad.innerHTML;continue;}ai+=ad.innerHTML;}if(ah!=null){ai+=ah;}al.innerHTML=ai;return an;};if(ab.availableFilters.carClasses){var U=ab.availableFilters.carClasses;var L=document.getElementById("filterCarClass");if(x){if(f(x,U,false)>1){Element.removeClassName(L,ab.hiddenClass);m=true;}else{x.innerHTML="";}}}else{if(x){x.innerHTML="";}}if(ab.availableFilters.companies){var ac=ab.availableFilters.companies;var C=document.getElementById("filterCompanies");if(q){if(f(q,ac,true)>1){Element.removeClassName(C,ab.hiddenClass);m=true;}else{q.innerHTML="";}}}else{if(x){q.innerHTML="";}}if(ab.availableFilters.destinations){var D=ab.availableFilters.destinations;var v=document.getElementById("filterCarDestination");if(N){if(f(N,D,false)>1){Element.removeClassName(v,ab.hiddenClass);m=true;}else{N.innerHTML="";}}}else{if(N){N.innerHTML="";}}var Q=document.getElementById("filterPriceContainer");if(Q){Element.removeClassName(Q,ab.hiddenClass);Q.show();}aa=Element.select(A,'input[type="checkbox"]');aa=aa.concat(Element.select(A,'input[type="hidden"]'));if(m){var J=document.getElementById("filtersTop");if(J){Element.removeClassName(J,ab.hiddenClass);var Y=Element.select(J,".numResults strong");if(Y[0]){Z=Y[0];R(ab.numResults);}if(Y[1]){I=Y[1];n(ab.numResults);}}}var M={};var y=Element.select(A,".showAllResults a");if(y.length>0){var t=function(i){i.checked=true;};var E=function(k){var i=b.use("dualSliderFactory");if(k&&i){i.get(k.identify()).reset();if(!k.visible()){k.show();}}};var W=function(ad){var k=ad.up(".filterContainer");var i=[];var l=[];if(k){i=k.select('input[type="checkbox"]');l=k.select(".dualSlider");if(Element.hasClassName(k,"dualSlider")){l.push(k);}}return function(ae){i.each(t);l.each(E);if(ae){Event.stop(ae);var af=j();a.publish("car-shop-filtering/showAllClicked",[Event.element(ae).up(".filterContainer").identify()]);b.use("pagination-handler").getPageContentAndUpdate(1,null,af);}};};for(var T=y.length-1;T>0;T--){var V=W(y[T]);M[y[T].identify()]=V;Event.observe(y[T],"click",V);}Event.observe(y[0],"click",z);}var r=A.select("a.filterSubHeader");if(r.length>0){var w=function(k){var i=k.next("form");return function(l){Event.stop(l);if(i.visible()){i.hide();k.setStyle({background:"#EEEEEE url('/images/filter_arrow_right.gif') no-repeat scroll 2px 4px"});}else{i.show();k.setStyle({background:"#EEEEEE url('/images/filter_arrow_down.gif') no-repeat scroll 2px 4px"});}};};r.each(function(i){Event.observe(i,"click",w(i));});}var B=function(){var i=j();b.use("pagination-handler").getPageContentAndUpdate(1,null,i);};var K=function(an){var af=Event.element(an);var ad=false;var ai=false;var i=false;if(Element.hasClassName(af,"dualSlider")){ai=true;a.publish("car-shop-filtering/sliderChanged",[af.identify()]);}else{if(af.tagName.toLowerCase()=="input"&&af.readAttribute("type").toLowerCase()=="checkbox"){ad=true;}else{if(af.tagName.toLowerCase()=="span"&&Element.hasClassName(af,"label")||af.tagName.toLowerCase()=="img"&&Element.hasClassName(af,"filterLogo")){var ag=Element.up(af,"form");var am=Element.identify(ag);if(ag&&ab.idListOfClickFilters.indexOf(am)>=0){i=true;var ak=Element.previous(af,'input[type="checkbox"]');var k=Element.select(ag,'input[type="checkbox"]:checked');var aj=ak.up().down("span").innerHTML;for(var ae=k.length-1;ae>-1;ae--){if(k[ae].hasClassName(aj)){k[ae].checked=true;}else{k[ae].checked=false;}}ak.checked=true;a.publish("car-shop-filtering/labelClicked",[ak.getAttribute("name")]);}}}}if(!ai&&!ad&&!i){return;}if(ad){a.publish("car-shop-filtering/checkBoxClicked",[af.getAttribute("name")]);var al=af.up(".filterContainer");if(al){var ah=al.select('input[type="checkbox"]:checked');ah=ah.reject(function(l){return l.hasClassName("dup-filter");});if(ah.length==0||(ah.length==1&&ah[0].disabled===true)){Event.stop(an);return;}}}B();};var O=$("filterFormCarClass"),h=$$("#filterFormCarClass ul li"),u={},F={};for(var X=0,G=h.length;X<G;X++){var P=h[X].down("span").innerHTML,d=h[X].down("input");if(u[P]){h[X].hide();u[P].push(d);d.addClassName("dup-filter");d.addClassName(P);}else{u[P]=[];F[P]=d;}}O.on("click",function(i){var k=$(i.target);if(k.type){if(k.checked){e(k.siblings("span")[0].innerHTML,true);}else{if(o()){return;}e(k.siblings("span")[0].innerHTML,false);}}else{e(k.innerHTML,true);}});function e(l,af){var k=u[l];if(!k){return;}for(var ad=0,ae=k.length;ad<ae;ad++){if(af){$(k[ad]).checked=true;}else{$(k[ad]).checked=false;}}}function o(){var i=0;$$("#filterFormCarClass ul li input").each(function(k){if(!k.hasClassName("dup-filter")){if(k.checked){i++;}}});return i<1?true:false;}Event.observe(A,"click",K);var p=A.select(".dualSlider");for(var S=p.length-1;S>-1;S--){Event.observe(p[S],"DualSliderFilter:update",K);}this.currentActiveFilters=j;this.clearAllFilters=z;};return{initialize:function(d){return new c(d);}};})());b.createUIComponent("car-option-click-manager",(function(){var c=function(d){var g=$H({clearAllFiltersSelector:"#optionsContainer .showAllResults a",showPoliciesSelector:".carPolicyLink a",showLocationSelector:".pickupLocation .pickupLocationLink",dropOffLocationSelector:".dropOffLocation .dropOffLocationLink",whoIsThisSelector:".carAggregator .carAggregatorLink"}).merge(d).toObject();var e=new YAHOO.widget.Tooltip("availabilityTooltip");function f(i){Event.stopObserving(document,"click",f);if(e.cfg.getProperty("visible")){e.hide();}}function h(j){var m;if(g.showPoliciesSelector!==""){m=Event.findElement(j,g.showPoliciesSelector);}if(!m&&g.clearAllFiltersSelector!==""){m=Event.findElement(j,g.clearAllFiltersSelector);if(m){b.use("car-shop-filtering").clearAllFilters();}}if(!m&&g.showLocationSelector!==""){m=Event.findElement(j,g.showLocationSelector);}if(!m&&g.dropOffLocationSelector!==""){m=Event.findElement(j,g.dropOffLocationSelector);}if(!m&&g.whoIsThisSelector!==""){m=Event.findElement(j,g.whoIsThisSelector);}if(m){Event.stop(j);var k=Element.next(m,".helpPopupText");if(k){e.cfg.context=m;e.setBody(k.innerHTML);var i=m.cumulativeOffset();var l=[i.left+10,i.top+10];e.cfg.setProperty("xy",l);e.cfg.setProperty("zIndex",16);if(!e.cfg.getProperty("visible")){e.show();Event.observe(document,"click",f);}}}}b.use("options-click-manager").registerListenerCallback("CarOptionManager",h);};return{initialize:function(d){return new c(d);}};})());b.createUIComponent("alignCarFilters",(function(){var e="modifySearch";var f="paginationSummary";var d=function(){};var c=function(g){if(d){d();}if(!$(f)){return;}var i=$("filtersContainer");var k=$(f).cumulativeOffset().top;var j=i.getStyle("marginTop");if(j){j=parseInt(j.replace("px",""));}if(!j){j=0;}var h=i.cumulativeOffset().top-j;if(k>h){i.setStyle({marginTop:(k-h)+"px"});}else{i.setStyle({marginTop:0});}if(g){Event.stop(g);}};return{initialize:function(){c();if(!$(e)){return;}d=$(e).onclick;$(e).onclick=null;return null;},applyListeners:function(){if(!$(e)){return;}$(e).observe("click",c);},removeListeners:function(){if(!$(e)){return;}$(e).stopObserving("click",c);}};})());})(EzRez.Application);(function(b){var a=function(k){var e=4,d=$$(k.matrixCellElements),g=$$(k.backButtonElement).first(),m=$$(k.nextButtonElement).first(),v=$$(k.totalResultsElement).first(),f=$$(k.paginationContainerElement).first(),c=d.length,t=d.last(),h=parseInt(t.className.split(" ")[0].replace("col_","")),r=0,i=h<e?h:e;function p(){s();j();}function j(){q();for(var x=0;x<c;x++){var w=d[x],y=w.className.split(" ")[0],z=parseInt(y.replace("col_",""));if(z<r||z>i){w.hide();}else{w.show();}}l();}function n(x){var z=x?e:e*-1,w=r+z,y;if(w<=0){w=0;}else{if(w>=h){w=r;}}y=w+e;r=w;i=y>h?h:y;}function u(){var w=v.getElementsByTagName("span");if(w.length<3){return;}w[0].innerHTML=r+1;w[1].innerHTML=i+1;w[2].innerHTML=h+1;}function q(){}function l(){u();}function o(w){n(w);j();s();}function s(){r===0?g.hide():g.show();i===h?m.hide():m.show();if(r===0&&i===h){f.hide();return;}else{f.show();}}this.applyListeners=function(){g.observe("click",function(w){Event.stop(w);o(false);});m.observe("click",function(w){Event.stop(w);o(true);});};p();};b.createUIComponent("carMatrixComponent",{initialize:function(c){return new a(c);},applyListeners:function(c){c.applyListeners();}});})(EzRez.Application);(function(a){var b=function(d){var e=f(d);function f(g){return $H({followerElementAnimate:true,followersConfigs:[]}).merge(g).toObject();}function c(h,g){var i=$H({follower:{},topBoundaryElement:{},bottomBoundaryElement:{},boundaryOffsetThreshold:10}).merge(h).toObject();var s=i.follower.getDimensions().height+i.boundaryOffsetThreshold,k=document.viewport.getScrollOffsets().top,n=i.follower.cumulativeOffset().top+s,t=i.topBoundaryElement.cumulativeOffset().top-i.boundaryOffsetThreshold,o=i.bottomBoundaryElement.cumulativeOffset().top;var j=n<o;var r=k>t;var q=(k-t);if(q<0){q=0;}else{var p=q+t+s>=o;if(p){q=o-s-t;if(q<0){q=0;}}}var l=i.follower.getStyle("top")||"0px";var m=l.replace("px","")>q;if((r&&j)||(m)){i.follower.setStyle({top:q+"px",position:"absolute"});if(g){i.follower.addClassName("followerElementAnimate");}}}this.initFollowersConfigs=function(g){e=f(g);};this.adjust=function(){for(var g=0;g<e.followersConfigs.length;g++){c(e.followersConfigs[g],e.followerElementAnimate);}};this.applyListeners=function(){Event.observe(window,"scroll",this.adjust);};};a.createUIComponent("followMeComponent",{initialize:function(c){return new b(c);},applyListeners:function(c){c.applyListeners();}});})(EzRez.Application);