(function(a){var b=YAHOO.util.Dom;a.createUIComponent("debugger",(function(){if(!a.WebContext){return{};}if(!a.WebContext.isDebugMode){return{};}var d=function(f){if(f.keyCode!==Event.KEY_F2&&f.keyCode!==undefined){return false;}a.Debug.setEnabled(true);a.Debug.openPopup();Event.stop(f);return false;};var c=function(f){a.Debug.setEnabled(true);a.Debug.openPopup();Event.stop(f);return false;};var e=new Element("a",{id:"open_debugger",href:"#"}).update("Open Debugger");return{initialize:function(){document.body.appendChild(e);return null;},applyListeners:function(){document.observe("keydown",d);e.observe("click",c);}};})());a.createUIComponent("modify-search-box",(function(){var c=function(j){var k=$H({openButtonSelector:"#modifySearch .show_hide_modify",closeButtonSelector:".modifySearchBody .modifySearchClose a",searchBoxViewSelector:".modifySearchBody",revealIconSelector:"#modifySearch .modifySearchToggle",revealIconClass:"active"}).merge(j).toObject();var f=$$(k.searchBoxViewSelector);if(f.size()<=0){a.Debug.info("Missing expected search box: "+k.searchBoxViewSelector);return;}var d=null;var i=(Prototype.Browser.IE&&window.document.implementation);if(i){d=document.createElement("iframe");d.id="modifySearchFormShim";Element.setStyle(d,{display:"none",position:"absolute",width:0,height:0,top:0,left:0,zIndex:999});d.setAttribute("frameborder","0");d.setAttribute("src","javascript:false;");document.body.appendChild(d);}var l=$$(k.revealIconSelector);var h=function(o){Event.stop(o);f.first().setStyle({display:"block"});if(l.first()){l.first().setStyle({background:"transparent url('/images/filter_arrow_down.gif') center left no-repeat"});}if(d){Element.setStyle(d,{display:"block"});}var n=b.getXY("modifySearch");n[1]+=b.get("modifySearch").offsetHeight-21;var p=b.get("modifySearchContainer").offsetWidth;var q=n[0]+p;var r=document.viewport.getWidth();if(q<r){n[0]+=b.get("modifySearch").offsetWidth-160;}else{n[0]+=b.get("modifySearch").offsetWidth-p;}b.setXY("modifySearchContainer",n);if(d){b.setXY(d,n);Element.setStyle(d,{width:f.first().offsetWidth+"px",height:f.first().offsetHeight+"px"});}};var m=function(n){Event.stop(n);var o=$("searchCalendar");f.first().setStyle({display:"none"});if(o){o.setStyle({display:"none"});}if(l.first()){l.first().setStyle({background:"transparent url('/images/filter_arrow_right.gif') center left no-repeat"});}if(d){Element.setStyle(d,{display:"none"});}};var g=$$(k.openButtonSelector);if(g.first()){g.first().observe("click",h);}var e=$$(k.closeButtonSelector);if(e.first()){e.first().observe("click",m);}};return{initialize:function(d){return new c(d);}};})());})(EzRez.Application);(function(a){var b=function(c){var i=Object.extend({showAnchorSelector:"div.showXmlContainer a.showDetails",hideAnchorSelector:"div.showXmlContainer a.hideDetails",toggleAnchorSelector:"div.room.debugging a.toggleDetails",yuiDialog:"div.yui-panel-container.yui-dialog"},c);var d=function(j){if(Event.findElement(j,i.showAnchorSelector)){g(j);}else{if(Event.findElement(j,i.hideAnchorSelector)){f(j);}else{if(Event.findElement(j,i.toggleAnchorSelector)){h(j);}}}};var g=function(k){Event.stop(k);var j=k.findElement("a").next("textarea");j.show();j.enable();};var f=function(k){Event.stop(k);var j=k.findElement("a").next("textarea");j.hide();j.disable();};var e=function(j){var k=0;if($$(j).length){$$(j).each(function(l){var m=parseInt(l.getStyle("z-index"));k=Math.max(k,m);});}return k;};var h=function(j){Event.stop(j);var p,m=j.findElement("a").up().next("main").cloneNode(true).toggle(),o=new YAHOO.widget.Dialog(m,{}),n=function(){o.destroy();document.stopObserving("click",k);},l=new YAHOO.util.KeyListener(document,{keys:27},{fn:o.hide,scope:o,correctScope:true}),k=function(q){var r=Event.element(q);if(o&&!r.childOf(o.element)&&r!=o.element&&!Event.findElement(q,i.yuiDialog)&&!Event.findElement(q,i.toggleAnchorSelector)){o.hide();}};o.cfg.queueProperty("keylisteners",l);o.render($$("body").first());document.observe("click",k);o.hideEvent.subscribe(function(){setTimeout(n,0);});o.bringToTop();o.center();o.show();p=e(i.yuiDialog);if(p){$(o.element).setStyle({"z-index":p+1});}};this.applyListeners=function(){document.observe("click",d);};this.removeListeners=function(){document.stopObserving("click",d);};};a.createUIComponent("showDebugXml",{initialize:function(c){return new b(c);},applyListeners:function(c){c.applyListeners();},removeListeners:function(c){c.removeListeners();},unload:function(c){c.removeListeners();}});})(EzRez.Application);(function(b){var a=function(){function c(e){Event.stop(e);var d=$(e.target);if(!d.hasClassName("toggleOn")){document.body.addClassName("wireframe");d.innerHTML="On";d.addClassName("toggleOn");}else{document.body.removeClassName("wireframe");d.innerHTML="Off";d.removeClassName("toggleOn");}}this.applyListeners=function(){document.on("click","a.wireframeMode",c);};};b.createUIComponent("stylesheetSwitcher",{initialize:function(){return new a();},applyListeners:function(c){c.applyListeners();}});b.load("stylesheetSwitcher");})(EzRez.Application);(function(a){EzRez.UI.ModificationStatusBarComponent=function(h){var d=a.SysConf.sessionTrackId;var k=Object.extend({workspaceAjaxUrl:"/adm/modify/modification_workspace_ajax.cfm",translations:{BOOKING_MODIFICATION_RETURN_TO_ADMIN_CONFIRMATION_MESSAGE:""}},h);var o=new EzRez.UI.DOMCache({rootNode:".modificationStatusBarSection"});var j=a.use("waitingDialog");function l(){o.cache();}function e(p){alert(p);}function c(){e("HTTP Failure with ajax");}function i(p){throw p;}function m(p,r,q){j.show();EzRez.Application.SysConf.resetSessionExpiration();new Ajax.Request(p,{method:"post",parameters:r,evalJS:true,onSuccess:function(s){j.hide();q(s);},onFailure:function(s){j.hide();c(s);},onException:function(t,s){j.hide();i(t,s);}});}var n=function(p){var q=k.translations[p];if(!q){return p;}return q;};function b(r,p){var s=o.rootNode.down(".confirmationMessageContainer");s.down(".bd").update(r);_confirmationDialog=new YAHOO.widget.Dialog(s,{width:"400px",fixedcenter:true,visible:false,postmethod:"none",constraintoviewport:true});var q=[{text:"Confirm",handler:function(){p();_confirmationDialog.hide();}},{text:"Cancel",handler:function(){this.cancel();_confirmationDialog.hide();}}];_confirmationDialog.cfg.queueProperty("buttons",q);s.show();_confirmationDialog.render();_confirmationDialog.show();}function f(p,r,q){Event.stop(p);b(q,function(){var s={action:EzRez.WebApi.ModificationWorkspaceAction.EXIT,EZ_SESSION_TRACK:d,CSRF_TOKEN:EzRez.Application.WebContext.csrfToken};m(k.workspaceAjaxUrl,s,function(u){var t=new EzRez.WebApi.ModificationWorkspaceResponse(u.responseText.evalJSON());EzRez.UI.redirect({url:r.href,method:"get"});});});}function g(p){var q=p.findElement("a.returnToAdminButton");if(q){f(p,q,n("BOOKING_MODIFICATION_RETURN_TO_ADMIN_CONFIRMATION_MESSAGE"));}}this.applyListeners=function(){document.observe("click",g);};this.getElms=function(){return o;};l();};a.createUIComponent("modificationStatusBarComponent",{initialize:function(b){return new EzRez.UI.ModificationStatusBarComponent(b);},applyListeners:function(b){b.applyListeners();}});})(EzRez.Application);(function(a){a.createUIComponent("waitingDialog",{initialize:function(b){var c=Object.extend({name:"waiting_dialog",position:"center"},b);return new EzRez.UI.Dialog(c);}});})(EzRez.Application);(function(b){var a=function(){function c(){Ajax.Responders.register({onCreate:function(d,e){if(window.location.href.include("modify_content_mode")){d.options.parameters.modify_content_mode="true";d.options.postBody=Object.toQueryString(d.options.parameters);}}});}c();};b.createUIComponent("allowModifyContentInAjax",{initialize:function(){return new a();}});})(EzRez.Application);(function(b){var a=function(){var d=null,c=b.SysConf;function e(){var f=false;d=new PeriodicalExecuter(function(){if(c.isActiveSession()){if(c.isSessionTimingOut()){if(!f){f=true;document.fire("ezrez:sessionTimingOut");}return;}f=false;return;}d.stop();document.fire("ezrez:sessionExpired");},5);}this.renewSession=function(g,f){if(c.isActiveSession()){g=g||"/renew_session.cfm";f=Object.extend({onComplete:function(){c.resetSessionExpiration();}},f);new Ajax.Request(g,f);}};e();};b.createUIComponent("sessionExpiration",{initialize:function(){return new a();}});b.load("sessionExpiration");})(EzRez.Application);(function(b){var a=function(l){var n=Object.extend({redirectUrl:"",sessionTimeoutWarningEnabled:false,fileNamesToExclude:["show_hotel_details.cfm"],dialogContainerId:"sessionTimeoutContainer",timeoutWarningDialogId:"sessionTimeoutWarning",timeoutDialogId:"sessionTimeout",translations:{SESSION_INACTIVITY_WARNING:"",SESSION_EXPIRED:"",SESSION_DIALOG_EXTEND_SESSION_LABEL:"",SESSION_DIALOG_OK_LABEL:"",SESSION_DIALOG_CANCEL_LABEL:""}},l);var p=null,m=null;function e(s,u){var t=null;var v=s||{};var u=u||"";if(v["TM-finalURL"]&&(v["TM-finalURL"].indexOf("arc.cfm")>=0||v["TM-finalURL"].indexOf("login.cfm")>=0)){t=v["TM-finalURL"];}else{if(u.indexOf("AutoCompleteFilter is not authorized for the agent")>=0||u.indexOf("Invalid session id used for auto-complete")>=0){t=document.baseURI.indexOf("/adm")>=0?"/adm/login.cfm":"/travel/arc.cfm";}}if(t){n.redirectUrl=t;h();}}function f(){Ajax.Responders.register({onComplete:function(t,s){e(s.headerJSON,s.responseText);}});}function j(){var s={successOrFailure:function(u,t){e(t.getResponseHeader,t[0].responseText);}};YAHOO.util.Connect.successEvent.subscribe(s.successOrFailure,s);YAHOO.util.Connect.failureEvent.subscribe(s.successOrFailure,s);}function o(){if(n.fileNamesToExclude.indexOf(EzRez.Application.WebContext.fileName)>-1){return;}if(n.sessionTimeoutWarningEnabled){document.observe("ezrez:sessionTimingOut",k);}document.observe("ezrez:sessionExpired",h);j();f();}function i(){if(!$(n.dialogContainerId)){$$("body").first().insert({bottom:new Element("div",{id:n.dialogContainerId,"class":"yui-skin-sam"})});}}function k(){i();if(!p){p=c(n.timeoutWarningDialogId);p.setBody(r("SESSION_INACTIVITY_WARNING"));p.cfg.queueProperty("buttons",[{text:r("SESSION_DIALOG_EXTEND_SESSION_LABEL"),handler:g,isDefault:true},{text:r("SESSION_DIALOG_CANCEL_LABEL"),handler:q}]);}p.render($(n.dialogContainerId));var s=$(p.innerElement);s.select("button:nth(0)").first().addClassName("automation-sessionTimeoutExtend");s.select("button:nth(1)").first().addClassName("automation-sessionTimeoutCancel");p.show();}function h(){var s=$(n.timeoutWarningDialogId);i();if(s&&s.up().getStyle("visibility")==="visible"){p.hide();}if(!m){m=c(n.timeoutDialogId);m.setBody(r("SESSION_EXPIRED"));m.cfg.queueProperty("buttons",[{text:r("SESSION_DIALOG_OK_LABEL"),handler:d,isDefault:true}]);}m.render($(n.dialogContainerId));$(m.innerElement).select("button:nth(0)").first().addClassName("automation-sessionTimeoutOk");m.show();}function c(s){return s?new YAHOO.widget.SimpleDialog(s,{fixedcenter:true,visible:false,constraintoviewport:true,close:false,modal:true,draggable:false}):false;}function g(){b.use("sessionExpiration").renewSession();p.hide();}function q(){p.hide();}function d(){m.hide();if(n.redirectUrl){window.location.href=n.redirectUrl;}}function r(s){var t=n.translations[s];return t?t:s;}o();};b.createUIComponent("sessionExpirationListener",{initialize:function(c){return new a(c);}});})(EzRez.Application);(function(b){var a=function(d){var g=Object.extend({dialogContainerId:"cobrandSwitchingNotAllowedContainer",dialogId:"cobrandSwitchingNotAllowed",errorMessage:"Dear User,<p></p>In order to access this website, you need to log out of your current session."},d);function h(){if(!$(g.dialogContainerId)){$$("body").first().insert({bottom:new Element("div",{id:g.dialogContainerId,"class":"yui-skin-sam"})});}}function e(i){return i?new YAHOO.widget.SimpleDialog(i,{fixedcenter:true,visible:false,constraintoviewport:true,close:true,modal:true,draggable:false,effect:{effect:YAHOO.widget.ContainerEffect.FADE,duration:0.5}}):false;}function c(){var j=location.href.split("?").first();var i=location.href.toQueryParams();delete i.nav;var k="#{baseUrl}?#{params}".interpolate({baseUrl:j,params:$H(i).toQueryString()});location.href=k;}function f(){h();var i=e(g.dialogId);if(i){i.hideEvent.subscribe(function(){c();});i.setBody(g.errorMessage);i.render($(g.dialogContainerId));i.show();}}f();};b.createUIComponent("cobrandSwitchingNotAllowedComponent",{initialize:function(c){return new a(c);}});})(EzRez.Application);(function(b){var a=function(i){var j=Object.extend({},i);var k=$$("#UTIL .search-history").first();var d=null;function h(n){var m=n.target;var o=f(m.href);c(o.getContainerEl());}function f(o){var n=new Element("div",{"class":"search-history-container"});var p=[{key:"createdDate",label:"Search Date",formatter:l},{key:"agentType",label:"Agent Type"},{key:"searchType",label:"Search Type",formatter:function(u,s){var t=[];if(s.getData("hasAir")){t.push("Air");}if(s.getData("hasRoom")){t.push("Room");}if(s.getData("hasCar")){t.push("Car");}u.innerHTML=t.join("+");}},{key:"departureAirportCode",label:"Area 1",formatter:function(v,s,t,u){if(s.getData("hasAir")){v.innerHTML=u;}}},{key:"returnAirportCode",label:"Area 2"},{key:"departureDate",label:"Depart Date",formatter:l},{key:"returnDate",label:"Return Date",formatter:l},{key:"adults",label:"Adults"},{key:"children",label:"Children"},{key:"seniors",label:"Seniors"},{key:"roundTrip",label:"Roundtrip"},{key:"roomCount",label:"Rooms"},{key:"action",label:"Action",formatter:function(u,s){var t={origin:window.location.pathname+window.location.search,air1:s.getData("hasAir"),room1:s.getData("hasRoom"),car1:s.getData("hasCar"),area1_display:s.getData("departureAirportCode"),area1:s.getData("departureAirportCode"),area2_display:s.getData("returnAirportCode"),area2:s.getData("returnAirportCode"),date1:e(s.getData("departureDate")),date2:e(s.getData("returnDate")),serviceclass:s.getData("airCabin"),num_rooms:s.getData("roomCount"),adults:s.getData("adults"),seniors:s.getData("seniors"),dynamic_children:s.getData("children"),child_age1:g(s.getData("childAges"),0),child_age2:g(s.getData("childAges"),1),child_age3:g(s.getData("childAges"),2),infants_requiring_seats:s.getData("infantsInSeats"),infants_in_lap:s.getData("infantsInLaps")};$(u).insert(new Element("a",{href:"/travel/arc_waiting.cfm?"+Object.toQueryString(t)}).update("Search"));}}];var m=["createdDate","agentType","hasAir","hasRoom","hasCar","searchType","departureAirportCode","returnAirportCode","departureDate","returnDate","adults","children","seniors","childAges","infantsInLaps","infantsInSeats","roundTrip","airCabin","roomCount"];var r=new YAHOO.util.DataSource(o);r.responseType=YAHOO.util.DataSource.TYPE_JSON;r.connXhrMode="queueRequests";r.responseSchema={resultsList:"records",fields:m};var q=new YAHOO.widget.DataTable(n,p,r);q.subscribe("rowMouseoverEvent",q.onEventHighlightRow);q.subscribe("rowMouseoutEvent",q.onEventUnhighlightRow);return q;}function l(p,m,n,o){p.innerHTML=Date.convertToOffset(new Date(o),0).format("ddd, mmm dd, yyyy");}function e(m){return Date.convertToOffset(new Date(m),0).format("m/dd/yy");}function g(n,m){return n.split(",")[m]||-1;}function c(m){if(!d){$(document.body).insert({bottom:new Element("div",{id:"searchHistoryContainer","class":"yui-skin-sam"})});d=new YAHOO.widget.SimpleDialog("searchHistoryContainer",{fixedcenter:false,visible:false,constraintoviewport:true,close:true,modal:true,draggable:false,zIndex:99999});}d.setHeader("Recent successful searches for current cobrand");d.setBody(m);d.render(document.body);d.show();}this.applyListeners=function(){if(k){k.on("click",function(m){h(m);Event.stop(m);});}};};b.createUIComponent("recentCobrandSearches",{initialize:function(d){var c=new a(d);c.applyListeners();return c;}});})(EzRez.Application);(function(a){EzRez.UI.BangComponent=function(f){var m=Mousetrap.bind,r=$("bang"),j=$$("#bang .shortcut-keys").first(),u=$$("#bang form"),v=$$("[name='displayConfigurationNameAutoComplete']").first(),i=$$("[name='displayCobrandNameAutoComplete']").first(),n=$$("[name='displayDomainNameAutoComplete']").first(),b=$$("[name='displayPageNameAutoComplete']").first(),h=$$("[name='displayReadyTalkAutoComplete']").first(),s=$$("[name='configurationNameAutoComplete']").first(),l=$$("[name='cobrandNameAutoComplete']").first(),w=$$("[name='pageNameAutoComplete']").first(),x=$$("[name='readyTalkNameAutoComplete']").first(),A=$$("[name='translation_filter']").first(),y=$$("[name='isNewWindowEnabled']").first(),e=location.search.toQueryParams(),z=a.WebContext,q=false,d=location.origin,c;if(!location.origin){d=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");}var k=Object.extend({isLoggedInSwitchflyAgent:false},f);function t(B,D){u.invoke("hide");var E=$$("[name='"+D+"']").first(),C;if(!E){return;}E.show();C=E.down("input");select=E.down("select");if(C){C.focus();B.preventDefault();}else{if(select){select.focus();}}}function o(B,C){if(!q){return;}if(C instanceof Array){B+=C.toQueryString();}else{if(C!=undefined){B+=C;}}if(!y.checked){document.location.href=B;}else{window.open(B,"_blank");}}function p(B){if(!q){return;}var F=B.target,D=location.origin;if(F.name==="environment"){B.preventDefault();o("http://"+z.clientName+"."+F.options[F.selectedIndex].value);}else{if(F.name==="cobrandForm"){B.preventDefault();e.nav=l.value;o(D+location.pathname+"?"+Object.toQueryString(e));}else{if(F.name==="configurationForm"){B.preventDefault();e.configuration=s.value;o(D+"/adm/configurations/?"+Object.toQueryString(e));}else{if(F.name==="pageForm"){B.preventDefault();o(D+w.value);}else{if(F.name==="domainForm"){B.preventDefault();var E=$$("[name=domainNameAutoComplete]").first().value;if(location.port!==""){E+=":"+location.port;}o(E);}else{if(F.name==="readyTalkForm"){B.preventDefault();o("https://core.readytalk.com/interface/guest.jsp?an=8667401260&ac="+x.value);}else{if(F.name==="gitlabForm"){B.preventDefault();var G=$$("[name=commit]").first().value;o(F.action+G);}else{if(F.name==="translationForm"||F.name==="confluenceForm"){var C=$(F).down("input[type='text']");B.preventDefault();o(F.action+"?"+C.name+"="+C.value);}}}}}}}}}function g(){m("mod+shift+1",function(){if(q){return;}Effect.SlideDown("bang",{duration:0.25});q=true;});m("escape",function(){if(!q){return;}Effect.SlideUp("bang",{duration:0.25});q=false;});m("d d",function(B){if(!q){return;}c=z.isDebugMode?"off":"On";document.location.replace("//"+window.location.host+"/adm/utils/debugging.cfm?debugging=Turn+"+c+"&redirect="+document.location);});m("w",function(B){if(!q){return;}c=z.isWebDevMode?"off":"on";document.location.replace("//"+window.location.host+"/adm/utils/debugging.cfm?webdev="+c+"&redirect="+document.location);});m("l",function(){o(d,"/apps/utilities/sessionLogs/");});m("j d",function(){a.Debug.setEnabled(true);a.Debug.openPopup();});m("o 1",function(){void (window.open("","stats_debugger","width=600,height=600,location=0,menubar=0,status=1,toolbar=0,resizable=1,scrollbars=1").document.write('<script  language="JavaScript"src="https://sitecatalyst.omniture.com/sc_tools/stats_debugger.html"><\/script><script  language="JavaScript">window.focus();<\/script>'));});m("o 2",function(){void (window.open("","dp_debugger","width=600,height=600,location=0,menubar=0,status=1,toolbar=0,resizable=1,scrollbars=1").document.write('<script  language="JavaScript" id=dbg src="https://www.adobetag.com/d1/digitalpulsedebugger/live/DPD.js"><\/script>'));});m("f p",function(B){t(B,"pageForm");b.focus();});m("g a",function(){o(d,"/travel/arc.cfm");});m("n n",function(){y.checked=!y.checked;});m("x c",function(B){t(B,"cobrandForm");i.focus();});m("x d",function(B){t(B,"domainForm");n.focus();});m("x e",function(B){t(B,"environmentForm");});m("a b",function(){o(d,"/apps/admin/bookings");});m("a i",function(){o(d,"/adm/cobrands/images.cfm?cobrand="+z.cobrandName);});m("a l",function(){o(d,"/adm/");});m("a t",function(){o(d,"/tools/");});m("c d",function(){o(d,"/adm/configurations/");});m("c l",function(B){t(B,"configurationForm");v.focus();});m("c h",function(){o(d,"/adm/reports/configurations_history.cfm");});m("c c",function(){o(d,"/adm/server_group_tools/configurations/configuration_combinations.cfm");});m("c v",function(){o(d,"/adm/server_group_tools/config_values_for_all_clients.cfm");});m("t d",function(){o(d,"/adm/lang/translations.cfm");});m("t l",function(B){if(!q){return;}t(B,"translationForm");A.focus();});m("t m",function(B){if(!q){return;}c===e.modify_content_mode?e.modify_content_mode=1:delete e.modify_content_mode;o(location.pathname+"?"+Object.toQueryString(e));});m("k s",function(){o(d,"/apps/shopping/?stubServices=itin#/checkout/form");});m("k m",function(){o(d,"/apps/shopping/?prepopulate=true#/checkout/form");});m("e s",function(){var B=d.replace(z.clientName,"encore");o(B,"/apps/encoreworkspace/?clientConfiguration=true#/members");});m("d a",function(){o("https://analytics.switchfly.com");});m("d p",function(){o(d,"/adm/server_group_tools/data_warehouse/partner_metrics.cfm");});m("d s",function(){o("https://splunk.switchfly.com");});m("a d",function(){o("https://corpunlock.switchfly.com/pm/");});m("j k",function(){o("http://jenkins.corp.ezrez");});m("m l",function(){o("http://mail.switchfly.com");});m("n t",function(){o("https://newton.newtonsoftware.com");});m("p b",function(){o("http://share.switchfly.com");});m("r t",function(B){t(B,"readyTalkForm");h.focus();});m("s c",function(){o("http://support.switchfly.com/");});m("s v",function(){o("http://sfxcode01.corp.ezrez/svn/dev");});m("s w",function(){o("http://www.switchfly.com");});m("s a",function(){o("https://confluence.switchfly.com/display/IVY/Home");});m("c 1",function(){o("https://confluence.switchfly.com");});m("c 2",function(B){t(B,"confluenceForm");});m("c p",function(){o("https://confluence.switchfly.com/display/HR/Phone+List");});m("c x",function(){o("https://confluence.switchfly.com/display/ALL/Subject+Matter+Experts");});m("c a",function(){o("https://confluence.switchfly.com/display/SALES/Account+Management");});m("c u",function(){o("https://confluence.switchfly.com/display/OPS/UAT+Client+Logins");});m("c r",function(){o("https://confluence.switchfly.com/display/RM/Content+Release");});m("r c",function(){o("https://confluence.switchfly.com/display/RM/Release+Calendar");});m("t 1",function(B){o("https://tp.switchfly.com");});m("t 2",function(B){t(B,"targetProcessForm");});m("t p",function(B){o("https://tp.switchfly.com/entity/1117");});m("t h",function(B){o("https://tp.switchfly.com/entity/2486");});m("t c",function(B){o("https://tp.switchfly.com/restui/board.aspx?acid=0F7D706916342B513CFB58B41E36647C#page=board/1360118705245&appConfig=eyJhY2lkIjoiQkFGQ0RCREMzOTc1MTlFNjk0MDM1ODU3OTRBMEVBMDgifQ==");});m("g 1",function(B){o("https://gitlab.corp.ezrez/");});m("g 2",function(B){t(B,"gitlabForm");});i.placeholder="Enter a cobrand name, select it, and press Enter";v.placeholder="Enter a configuration name, select it, and press Enter";n.placeholder="Enter a domain name, select it, and press Enter";b.placeholder="Enter a page name, select it, and press Enter";h.placeholder="Enter a person's name, select it, and press Enter";r.observe("submit",p);r.observe("change",p);}if(k.isLoggedInSwitchflyAgent){g();}else{m("mod+shift+1",function(){q=true;o(d,"/adm/");});}};a.createUIComponent("bangComponent",{initialize:function(b){return new EzRez.UI.BangComponent(b);}});})(EzRez.Application);(function(a){EzRez.UI.ClientDebugWindow=function(){function c(){window.open("/apps/admin/clientDebug","clientDebugWindow","status=no,toolbar=no,location=no,width=800,height=400,centerscreen=yes");}function e(){if(window.location.hash.indexOf("debug")>-1){c();}}function b(){if(!"onhashchange" in window){return;}if(window.addEventListener){window.addEventListener("hashchange",e,false);}else{if(window.attachEvent){window.attachEvent("hashchange",e);}}}function d(){$$(".client-debug").invoke("observe","click",c);}this.applyListeners=function(){b();d();};this.launch=function(){c();};};a.createUIComponent("clientDebugWindow",{initialize:function(){return new EzRez.UI.ClientDebugWindow();},applyListeners:function(b){b.applyListeners();},launch:function(b){b.launch();}});})(EzRez.Application);(function(a){var b=a.App||{};b.brightTagFunction=function(I){var D,k,h,v,o,x,w,C,r,H,t,A,g,u,d,f=[],q=[],y=I.App||{},n=EzRez.Application.WebContext,z=n.fileName,m=EzRez.Application.Search,s=EzRez.Application.Booking,l=EzRez.Application.Itinerary,j=l.shoppingCart,c=EzRez.Application.TravelerProfile,i=EzRez.Application.SysConf;y.AnalyticsService=y.AnalyticsService||{};k=y.AnalyticsService.BrightTag||{};var B=function(M){var J={};var K=[];J.stops=M.stops;if(M.flights.length>0){M.flights.forEach(function(N){K.push({airlineCode:N.airlineCode,durationMinutes:N.durationMinutes,fareClass:N.fareClass,flightNumber:N.flightNumber,departureAirportCode:N.departureAirportCode,arrivalAirportCode:N.arrivalAirportCode,departureDate:Date.convertToOffset(N.departureTimestamp,0),arrivalDate:Date.convertToOffset(N.arrivalTimestamp,0)});});}J.segments=K;var L=function(){var N=0;if(M.flights.length>0){M.flights.forEach(function(O){N+=O.durationMinutes;});}return N;};J.numSegments=M.flights.length;J.totalDurationMinutes=L();return J;};var E=function(K){var L={};var J=[];L.numberRooms=K.length;if(K.length>0){K.forEach(function(M){J.push({airportCode:M.airportCode,checkin:M.checkIn,checkout:M.checkOut,city:M.address.city,country:M.address.countryCode,hotelName:M.hotelName,numberNights:M.numNights,roomName:M.name,state:M.address.stateCode});});}L.segments=J;return L;};var e=function(J){var N={};var K=[];var M="";if(J.length>0){N.numberRooms=1;var L=J[0];if(L.getRooms().length>0){M=L.getRooms()[0].name;}K.push({airportCode:L.airportCode,checkin:L.checkIn,checkout:L.checkOut,city:L.address.city,country:L.address.countryCode,hotelName:L.name,roomName:M,state:L.address.stateCode});}N.segments=K;return N;};var F=function(K){if(K.length>0){var J=K[0];return{type:J.name,description:J.description,pickupDate:J.pickupDate,returnDate:J.returnDate,airportCode:J.airportCode};}else{return{};}};var G=function(L){var J={};var K=[];J.numberActivities=L.length;if(L.length>0){L.forEach(function(M){K.push({name:M.name,id:M.productId,beginDate:M.beginDate,endDate:M.endDate,adults:M.numAdults,children:M.numChildren,infants:M.numInfants});});}J.segments=K;return J;};var p=function(){var K=["itinerary.cfm","get_payment.cfm","checkout_form.cfm","checkout_final.cfm"];if(K.indexOf(z)>-1){o.packagePrice=Math.round(l.paymentTotal*100)/100;return;}if(j.currentHotelSelection&&j.currentHotelSelection.selectedRoomPackagePriceInCustomerCurrency&&j.currentHotelSelection.selectedRoomPackagePriceInCustomerCurrency.soldAt>0){o.packagePrice=j.currentHotelSelection.selectedRoomPackagePriceInCustomerCurrency.soldAt;return;}if(j.getHotels().length>0){var J=j.getHotels()[0];if(J&&J.selectedRoomPackagePriceInCustomerCurrency&&J.selectedRoomPackagePriceInCustomerCurrency.soldAt>0){o.packagePrice=J.selectedRoomPackagePriceInCustomerCurrency.soldAt;return;}}};H=function(W,X,U,V,P,L,M,N,T,S,K,O,R){this.firstName=W||"";this.lastName=X||"";this.gender=U||"";this.address=V||"";this.city=P||"";this.state=L||"";this.zip=M||"";this.country=N||"";this.email=T||"";this.phone=S||"";this.mobile=K||"";this.subscribeToEmailList=O||false,this.dateOfBirth=R||0;this.age=0;if(this.dateOfBirth){var Q=Date.now()-this.dateOfBirth.getTime(),J=new Date(Q);this.age=Math.abs(J.getUTCFullYear()-1970);}};if(z!=="arc.cfm"){if(m.hasAir){f.push("Air");}if(m.hasRoom){f.push("Room");}if(m.hasCar){f.push("Car");}if(m.hasActivity){f.push("Activity");}if(m.isRoomCrossSell){q.push("Room");}if(m.isCarCrossSell){q.push("Car");}D={adults:m.travelers.totalAdults,children:m.travelers.totalChildren,numberRooms:m.hotelRoomCount,departureAirport:(m.destinationInfoList[0]?m.destinationInfoList[0].departureSearchLocation.anyAirportCode:""),arrivalAirport:(m.destinationInfoList[0]?m.destinationInfoList[0].arrivingSearchLocation.anyAirportCode:""),departureDate:m.departing.date,returnDate:m.arriving.date,departureHour:m.departing.date.getHours(),returnHour:m.arriving.date.getHours(),searchDate:i.systemTime,products:f.join(", "),crossSellProducts:q.join(", ")};if(m.isRoundTrip){D.returnAirport=(m.destinationInfoList[0]?m.destinationInfoList[0].departureSearchLocation.anyAirportCode:"");}k.search=D;}if(z!=="arc.cfm"){o={};if(j.airSelection){o.air={};if(j.airSelection.legs.length>0){o.air.departure=B(j.airSelection.legs.first());if(j.airSelection.legs.length>1){o.air.arrival=B(j.airSelection.legs.last());}}}if(j.hasRoom){if(j.getRooms().size()>0){o.room=E(j.getRooms());}else{if(j.getHotels().size()>0){o.room=e(j.getHotels());}}}if(j.hasCar){o.car=F(j.getCars());}if(j.hasActivity){o.activity=G(j.getActivities());}p();k.shoppingCart=o;}if(z!=="arc.cfm"){v={packagePrice:Math.round(l.packagePriceInCustomerCurrency*100)/100,paymentTotal:Math.round(l.paymentTotal*100)/100,totalTax:l.totalTax};k.itinerary=v;}if(z!=="arc.cfm"){f=[];x={packagePrice:s.packagePriceInCustomerCurrency,airPrice:s.airPrice,carPrice:s.carPrice,roomPrice:s.roomPrice,activityPrice:s.activityPrice,installmentsQuantity:s.numParcelPayments,totalTax:s.totalTax,paymentTotal:s.paymentTotal,creditCardType:s.creditCardType,adults:s.travelers.totalAdults,children:s.travelers.totalChildren,infantsInLap:s.travelers.infantsInLap,infantsInSeat:s.travelers.infantsInSeat,pnr:s.number,paymentMethods:s.paymentMethods,accountingEntryCodes:s.accountingEntryCodes,discountTotal:s.discountTotal};if(m.travelers.total>s.travelers.total){x.adults=m.travelers.totalAdults;x.children=m.travelers.children;x.infantsInLap=m.travelers.infantsInLap;x.infantsInSeat=m.travelers.infantsInSeat;}if(s.products.hasAir){f.push("Air");g=s.getAirOptions().first();u=g.legs.first();t=B(u);if(g.isRoundTrip||m.isMultiDestination){d=g.legs.last();A=B(d);}w={departure:t,arrival:A||{},fareBasisCodes:g.fareBasisCodeList.join(", ")};x.air=w;x.frequentFlyerNumber=s.frequentFlyerNumber;}if(s.products.hasRoom){f.push("Room");x.room=E(s.getRooms());}if(s.products.hasCar){f.push("Car");x.car=F(s.getCars());}if(s.products.hasActivity){f.push("Activity");x.activity=G(s.getActivities());}if(z==="checkout_final.cfm"){x.purchaseDate=i.systemTime;}x.products=f.join(", ");k.booking=x;}if(z!=="arc.cfm"){if(c.externalProfileId){k.travelerLoyaltyProfile={externalProfileId:c.externalProfileId,totalRedemptionPoints:c.totalRedemptionPoints};}}if(z==="get_payment.cfm"||z==="checkout_final.cfm"){k.travelers=(function(){var L=s.leadTraveler,J,K=undefined,N=L.phones||[],M=undefined;N.each(function(O){K=O.home?O.number:K;M=O.cell?O.number:M;});J=[new H(L.firstName,L.lastName,L.gender,L.address.addressLines.toString(),L.address.city,L.address.stateCode,L.address.zip,L.address.countryCode,L.email,K,M,s.isSubscribedToEmailList,L.dateOfBirth)];return J;}());}k.system=(function(){return{languageCode:i.getLanguageCode,deviceType:i.deviceType,pageName:n.pageName};}());y.AnalyticsService.BrightTag=k;I.App=y;};a.App=b;}(this));(function(b){b.analytics=b.analytics||{};b.analytics.KissMetricsBase=b.analytics.KissMetricsBase||function(){};b.analytics.KissMetricsBase.prototype.init=function(e){var c=["devel","qalab01"];if(c.indexOf(this._getServerGroupName())>-1){return;}if(!e){console.error("Kissmetrics Tracking API Key not defined");return;}window._kmq=window._kmq||[];window._kmk=window._kmk||e;function d(f){setTimeout(function(){var i=document,h=i.getElementsByTagName("script")[0],g=i.createElement("script");g.type="text/javascript";g.async=true;g.src=f;h.parentNode.insertBefore(g,h);},1);}d("//i.kissmetrics.com/i.js");d("//doug1izaerwt3.cloudfront.net/"+_kmk+".1.js");this._setUserProperties();this._transmit();};b.analytics.KissMetricsBase.prototype._transmit=function(){var c=this._getPageNameFromWindowLocation();switch(c){case"arc":this.handleSearchPageLoad();break;case"arc_waiting":this.handleInterstitialPageLoad();break;case"arc_process":this.handleResultsPageLoad();break;case"itinerary":this.handleItineraryPageLoad();break;case"checkout_form":this.handleCheckoutPageLoad();break;case"get_payment":this.handlePaymentPageLoad();break;case"checkout_final":this.handleConfirmationPageLoad();break;}};b.analytics.KissMetricsBase.prototype.incrementPageCounter=function(){};b.analytics.KissMetricsBase.prototype._setUserProperties=function(){var d={},e=this._getTravelerProfile();if(e){var c="";if(c){_kmq.push(["identify",c]);}}d["Switchfly Session Id"]=this._getSessionTrackingId();d["Search Type"]=this._createSearchTypeString();d["Page URL"]=location.href;d["Sub-Referrer"]=document.referrer;d["Release Version"]=this._getReleaseVersion();d.Environment=this._getServerGroupName();d["Tech Stack"]="OTS";d["Visitor Profile Type"]=this._isAgent()?"Agent":"FIT";d["Client DSN"]=this._getClientName();d["Client Cobrand"]=this._getCobrandName();d["Logged In/SSO"]=this._isLoggedIn()?"Yes":"No";d["Screen Height"]=document.viewport.getHeight();d["Screen Width"]=document.viewport.getWidth();d["Mobile vs Desktop"]=this.isMobile()?"Mobile":"Desktop";d["Operating System"]=EzRez.Util.Env.getOS();d.Browser=EzRez.Util.Env.getBrowser();d=this.cleanUpProp(d);_kmq.push(["set",d]);};b.analytics.KissMetricsBase.prototype.handlePageLoad=function(){_kmq.push(["record","Page Load"]);};b.analytics.KissMetricsBase.prototype.handleSearchPageLoad=function(){_kmq.push(["record","Search Form - Page Load"]);};b.analytics.KissMetricsBase.prototype.handleResultsPageLoad=function(){_kmq.push(["record","Results - Page Load"]);};b.analytics.KissMetricsBase.prototype.handleItineraryPageLoad=function(){_kmq.push(["record","Itinerary - Page Load"]);};b.analytics.KissMetricsBase.prototype.handleCheckoutPageLoad=function(){_kmq.push(["record","Checkout - Page Load"]);};b.analytics.KissMetricsBase.prototype.handlePaymentPageLoad=function(){_kmq.push(["record","Payment - Page Load"]);};b.analytics.KissMetricsBase.prototype.handleInterstitialPageLoad=function(){var c={"Type of Search":this._createSearchTypeString()};_kmq.push(["record","Interstitial - Page Load",c]);};b.analytics.KissMetricsBase.prototype.handleConfirmationPageLoad=function(){var d={};var c=this._getBooking();d["Booking Number"]=c.number;if(b.Search.products.hasCar){d["Metro Car"]=b.Search.arriving.area.indexOf("city")!==-1;}this.cleanUpProp(d);_kmq.push(["record","Confirmation - Page Load",d]);};b.analytics.KissMetricsBase.prototype._createSearchTypeString=function(){var c=[],d=b.Search.products;if(d.hasAir){c.push("Air");}if(d.hasRoom){c.push("Room");}if(d.hasCar){c.push("Car");}if(d.hasActivity){c.push("Activity");}return c.join(", ");};b.analytics.KissMetricsBase.prototype._getTravelerProfile=function(){return b.TravelerProfile;};b.analytics.KissMetricsBase.prototype._isLoggedIn=function(){return !!(this._getTravelerProfile()&&this._getTravelerProfile().firstName!=="");};b.analytics.KissMetricsBase.prototype._getSessionTrackingId=function(){return b.SysConf.sessionTrackId;};b.analytics.KissMetricsBase.prototype._getReleaseVersion=function(){return b.SysConf.releaseVersion;};b.analytics.KissMetricsBase.prototype._getServerGroupName=function(){return b.WebContext.serverGroupName;};b.analytics.KissMetricsBase.prototype._getClientName=function(){return b.WebContext.clientName;};b.analytics.KissMetricsBase.prototype._getCobrandName=function(){return b.WebContext.cobrandName;};b.analytics.KissMetricsBase.prototype._isAgent=function(){return b.WebContext.isAgent;};b.analytics.KissMetricsBase.prototype._getBooking=function(){return b.Booking;};b.analytics.KissMetricsBase.prototype.isMobile=function(){var c={Android:function(){return navigator.userAgent.match(/Android/i);},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i);},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i);},Opera:function(){return navigator.userAgent.match(/Opera Mini/i);},Windows:function(){return navigator.userAgent.match(/IEMobile/i);},any:function(){return(c.Android()||c.BlackBerry()||c.iOS()||c.Opera()||c.Windows());}};return c.any();};b.analytics.KissMetricsBase.prototype._getPageNameFromWindowLocation=function(){var c=null,d=window.location.pathname.split("/");c=d[d.length-1].match(/\w+/);if(c.length&&c.length>0){c=c[0];}return c;};b.analytics.KissMetricsBase.prototype.cleanUpProp=function(d){for(var c in d){if(d.hasOwnProperty(c)){if(d[c]===undefined||d[c]===null||d[c]===""){delete d[c];}}}return d;};var a=function(c){var d=c.trackingApiKey;(new b.analytics.KissMetricsBase()).init(d);};b.createUIComponent("kissmetricsAnalyticsComponent",{initialize:function(c){return new a(c);}});})(EzRez.Application);