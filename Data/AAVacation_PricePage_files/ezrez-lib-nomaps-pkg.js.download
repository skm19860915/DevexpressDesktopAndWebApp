var EzRez={REQUIRED_PROTOTYPE:"1.6.0",REQUIRED_SCRIPTACULOUS:"1.8.1",load:function(){function b(c){var e=c.split(".");return parseInt(e[0],10)*100000+parseInt(e[1],10)*1000+parseInt(e[2],10);}if(Prototype===undefined){throw ("ezrez.js requires the Prototype JavaScript framework >= "+EzRez.REQUIRED_PROTOTYPE);}if(b(Prototype.Version)<b(EzRez.REQUIRED_PROTOTYPE)){throw ("ezrez.js requires the Prototype JavaScript framework >= "+EzRez.REQUIRED_PROTOTYPE);}if(Scriptaculous===undefined){throw ("ezrez.js requires the Prototype JavaScript framework >= "+EzRez.REQUIRED_SCRIPTACULOUS);}if(b(Scriptaculous.Version)<b(EzRez.REQUIRED_SCRIPTACULOUS)){throw ("ezrez.js requires the Prototype JavaScript framework >= "+EzRez.REQUIRED_SCRIPTACULOUS);}var a=$A(document.getElementsByTagName("script")).find(function(c){return c.src&&(c.src.include("/js/packages/js/ezrez-")||c.src.include("/js/ezrez/js/ezrez.js"));});this.path=(a)?a.src.replace(/\/js\/packages\/js\/ezrez-[^\/]*\.js$/,"/js").replace("/js/ezrez/js/ezrez.js","/js"):"";}};EzRez.load();EzRez.StringUtil={trim:function(a){return a.replace(/^\s+|\s+$/g,"");},isNumeric:function(a){return EzRez.StringUtil.isSet(a)&&!isNaN(parseFloat(a))&&isFinite(a);},isSet:function(a){return a!==null&&a!==undefined&&0<a.length;},isEmpty:function(a){return !EzRez.StringUtil.isSet(a);},truncate:function(e,b,f){f=f||"...";var a=e.substring(0,b),c=e.substring(b,e.length);return a+'<span class="truncation-mark">'+f+'</span><span class="truncated-text hidden">'+c+"</span>";},parseBoolean:function(a){return a==="true";},toSplunkFriendlyString:function(l){var g=Object.toString(l),b="[object Boolean]",c="[object Number]",e="[object String]",k="[object Array]";switch(g){case c:case b:case e:l=l.valueOf();}switch(l){case null:return"null";case true:return"true";case false:return"false";}type=typeof l;switch(type){case"string":return l.inspect(true);case"number":return isFinite(l)?String(l):"null";case"object":var j=[];if(g===k){for(var f=0,a=l.length;f<a;f++){var h=Str(f,l,stack);j.push(typeof h==="undefined"?"null":h);}j="["+j.join(",")+"]";}else{var n=Object.keys(l);for(var f=0,a=n.length;f<a;f++){var m=n[f],h=Object.toJSON(l[m]);if(typeof h!=="undefined"){j.push(m+"="+h);}}j=j.join(",");}return j;}}};EzRez.MathUtil={round:function(b,a){if(!Object.isNumber(b)||!Object.isNumber(a)||a<1){return b;}a=Math.round(a);return Math.round(b*Math.pow(10,a))/Math.pow(10,a);},roundMoney:function(b){var a=2;try{a=EzRez.Application.SysConf.currencyFormat.decimalPlaces;}catch(c){}return EzRez.MathUtil.round(b,a);}};EzRez.ParseUtil={isPositiveInt:function(a){return/^\+?\d+$/.test(a);},parseInt:function(a){return parseInt(a,10);}};EzRez.EUCookieCompliance=(function(){return{enableThirdPartyTags:function(){var a=$$('script[type*="text/plain"][data-src]');a.each(function(b){b.insert({before:new Element("script",{src:b.readAttribute("data-src")})}).remove();});},enableTrackingTags:function(){var a=$$(".js-tracking-tag");a.each(function(b){var c=b.readAttribute("data-src");b.writeAttribute("src",c);b.writeAttribute("data-src",false);});},isCookieAuthorized:function(a){return true;},categories:{}};}());Array.prototype.intersect2=function(c){var b=this,a=[];c.each(function(e){if(b.indexOf(e)!==-1&&a.indexOf(e)==-1){a.push(e);}});return a;};Object.extend(Event,{KEY_SHIFT:16,KEY_CTRL:17,KEY_ALT:18,KEY_F1:112,KEY_F2:113,KEY_F3:114,KEY_F4:115,KEY_F5:116,KEY_F6:117,KEY_F7:118,KEY_F8:119,KEY_F9:120,KEY_F10:121,KEY_F11:122,KEY_F12:123});Date.parseGMT=function(b){if(!b){return new Date();}var a=b.match(/(^\d{4})[-\/](\d{1,2})[-\/](\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}) GMT$/);if(!a){return null;}if(!Object.isArray(a)&&a.length<8){return null;}a.shift();a=a.collect(function(c){return parseInt(c,10);});return Date.UTC(a[0],a[1]-1,a[2]-1,a[3],a[4],a[5]);};Date.parseJSON=function(b){if(!b){return new Date();}var a=b.match(/(^\d{4})[-\/](\d{1,2})[-\/](\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}) GMT$/);if(!a){return null;}if(!Object.isArray(a)&&a.length<8){return null;}a.shift();a=a.collect(function(c){return parseInt(c,10);});return new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]).getTime();};Date.convertToOffset=function(b,a){var c=b.getTime()+(b.getTimezoneOffset()*60000);return new Date(c+a);};Date.prototype.diffInDays=function(a){var b=(a.getTime()-this.getTime())/(1000*60*60*24);return Math.ceil(b);};Date.prototype.isBefore=function(a){return this.getTime()<a.getTime();};Date.prototype.isAfter=function(a){return this.getTime()>a.getTime();};Date.prototype.format=function(b,e){var c=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,h=/[^-+\dA-Z]/g,g=function(k,j){k=String(k);j=j||2;while(k.length<j){k="0"+k;}return k;};var a=function(p,B,w){var l=a;if(arguments.length==1&&(typeof p=="string"||p instanceof String)&&!/\d/.test(p)){B=p;p=undefined;}p=p?new Date(p):new Date();if(isNaN(p)){throw new SyntaxError("invalid date");}B=String(l.masks[B]||B||l.masks["default"]);if(B.slice(0,4)=="UTC:"){B=B.slice(4);w=true;}var z=w?"getUTC":"get",t=p[z+"Date"](),j=p[z+"Day"](),q=p[z+"Month"](),v=p[z+"FullYear"](),x=p[z+"Hours"](),r=p[z+"Minutes"](),A=p[z+"Seconds"](),u=p[z+"Milliseconds"](),k=w?0:p.getTimezoneOffset(),n={d:t,dd:g(t),ddd:l.i18n.dayNames[j],dddd:l.i18n.dayNames[j+7],m:q+1,mm:g(q+1),mmm:l.i18n.monthNames[q],mmmm:l.i18n.monthNames[q+12],yy:String(v).slice(2),yyyy:v,h:x%12||12,hh:g(x%12||12),H:x,HH:g(x),M:r,MM:g(r),s:A,ss:g(A),l:g(u,3),L:g(u>99?Math.round(u/10):u),t:x<12?"a":"p",tt:x<12?"am":"pm",T:x<12?"A":"P",TT:x<12?"AM":"PM",Z:w?"UTC":(String(p).match(f)||[""]).pop().replace(h,""),o:(k>0?"-":"+")+g(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),S:["th","st","nd","rd"][t%10>3?0:(t%100-t%10!=10)*t%10]};return B.replace(c,function(m){return m in n?n[m]:m.slice(1,m.length-1);});};a.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};a.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return a(this,b,e);};Math.roundToDecimal=function(b,a){if(!Object.isNumber(b)||!Object.isNumber(a)||a<1){return b;}a=Math.round(a);return Math.round(b*Math.pow(10,a))/Math.pow(10,a);};if(EzRez===undefined){throw ("ezrez-util.js requires ezrez.js");}EzRez.Util={};EzRez.Util.MockFBConsole=function(){this.debug=function(){};this.log=function(){};this.info=function(){};this.warn=function(){};this.error=function(){};this.assert=function(){};this.dir=function(){};this.dirxml=function(){};this.group=function(){};this.groupEnd=function(){};this.time=function(){};this.timeEnd=function(){};this.count=function(){};this.trace=function(){};this.profile=function(){};this.profileEnd=function(){};};var _mockConsole=new EzRez.Util.MockFBConsole();if(window.console===undefined||window.console===null){window.console=_mockConsole;}else{for(var func in _mockConsole){if(window.console[func]===undefined||window.console[func]===null){window.console[func]=_mockConsole[func];}}}EzRez.Util.Debug=new function(){var b=[];var a=log4javascript.getLogger();var c=new log4javascript.PopUpAppender();c.setFocusPopUp(false);c.setComplainAboutPopUpBlocking(false);c.setUseOldPopUp(true);c.setReopenWhenClosed(false);a.addAppender(c);log4javascript.setEnabled(false);var e=function(h,g,f){if(log4javascript.isEnabled()){return;}b.push({lvl:h,msg:g,ex:f});};this.trace=function(g,f){e("trace",g,f);a.trace(g,f);console.trace(g,f);};this.debug=function(g,f){e("trace",g,f);a.debug(g,f);console.debug(g,f);};this.info=function(g,f){e("info",g,f);a.info(g,f);console.info(g,f);};this.warn=function(g,f){e("warn",g,f);a.warn(g,f);console.warn(g,f);};this.error=function(g,f){e("error",g,f);a.error(g,f);console.error(g,f);};this.fatal=function(g,f){e("fatal",g,f);a.fatal(g,f);};this.setEnabled=function(f){log4javascript.setEnabled(f);if(f&&b.length>0){b.each(function(g){this[g.lvl](g.msg,g.ex);},this);b=[];}};this.openPopup=function(){c.setReopenWhenClosed(true);a.debug("Debugging enabled.");c.setReopenWhenClosed(false);};this.closePopup=function(){c.close();};};EzRez.Util.URL=function(b){var a=/(https|http|ftp|ftps):\/\/([^\/]+)\/?([^\?]*)\??(.*)/;if(!a.test(b)){this.protocol=null;this.domain=null;this.file=null;this.query=null;this.toString=function(){return null;};return;}var c=b.match(a);this.protocol=c[1];this.domain=c[2];this.file=c[3];this.query=c[4];this.toString=function(){return b;};};EzRez.Util.Env=new function(){var f="";var h=[{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}];var e=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}];var g=function(n){var l=false;var m=false;for(var k=0;k<n.length;k++){l=n[k].string;m=n[k].prop;f=n[k].versionSearch||n[k].identity;if(l){if(l.indexOf(n[k].subString)!=-1){return n[k].identity;}}else{if(m){return n[k].identity;}}}};var b=function(l){var k=l.indexOf(f);if(k==-1){return;}return parseFloat(l.substring(k+f.length+1));};var a=g(h)||"An unknown browser";var j=b(navigator.userAgent)||b(navigator.appVersion)||"an unknown version";var c=g(e)||"an unknown OS";this.toString=function(){return a+" "+j+" "+c;};this.getBrowser=function(){return a;};this.getVersion=function(){return j;};this.getOS=function(){return c;};this.isIE6=function(){var k=a+j;return k.include("Explorer6");};};EzRez.Util.Log=function(a){var b=Object.extend({message:"",environment:navigator.userAgent,location:location.href},a);this.message=b.message;this.environment=b.environment;this.location=b.location;};EzRez.Util.errorToJson=function(a){return YAHOO?YAHOO.lang.JSON.stringify(a,null,4):Object.toJSON(a);};EzRez.Util.ErrorLog=function(a){var b=Object.extend({error:null},a);EzRez.Util.Log.apply(this,arguments);this.errorJson=b.error?EzRez.Util.errorToJson(b.error):"";};EzRez.Util.RemoteLog=function(h){var l=Object.extend({type:"information",message:"",error:null},h);var b="/service/analytics/error.cfm";function k(){var n;if(l.error){n=new EzRez.Util.ErrorLog({message:l.message,error:l.error});}else{n=new EzRez.Util.Log({message:l.message});}var p={logJson:Object.toJSON(n)};var o=new Ajax.Request(b,{method:"post",parameters:p,onSuccess:function(q){},onException:function(r,q){throw q;},onFailure:function(){}});}function g(){return["localhost","dev"].any(function(n){return location.host.include(n);});}function a(){return["test"].any(function(n){return location.host.include(n);});}function f(){return["acceptance"].any(function(n){return location.host.include(n);});}function m(){return !g()&&!f()&&!a();}function e(){var n=["arc.cfm","arc_waiting.cfm","arc_process.cfm","itinerary.cfm","checkout_form.cfm","get_payment.cfm","checkout_final.cfm","get_subsequent_payment.cfm"];return n.any(function(o){return location.pathname.include(o);});}function c(){return location.search.include("enable_remote");}function j(){return c()||!m()||e();}if(j()){k();}};EzRez.Util.Exception=function(b,h){var g=Object.extend({name:"SwitchflyException",message:"",remoteLog:true},b);var f=h!==null&&h!==undefined;var c=f&&h.constructor==EzRez.Util.Exception;function j(){var e=h?h.message+". ":"";return g.name+": "+g.message+". "+e;}this.name=g.name;this.message=j();this.toString=function(){return j();};try{if(f&&!c){var a=EzRez.Util.errorToJson(h);console.error(j(),h);console.error(a);EzRez.Util.Debug.error(j(),h);EzRez.Util.Debug.error(a);}else{if(!f){console.error(j());EzRez.Util.Debug.error(j());}}if(g.remoteLog){setTimeout(function(){var e=new EzRez.Util.RemoteLog({type:"error",message:j(),error:h});},1);}}catch(h){}};EzRez.Util.Profiler=new function(){var h=new Date();var f=h.getTime();var m="profiler_report";var k=$H();var l=function(){var p="<ul>";var o=new Template('<li class="profiler_span"><div class="span_details">(#{index}) #{name}: #{start}, #{end}, #{dur}</div><div class="span_bar" style="left:#{left}px; width: #{width}px;"> </div></li>');k.each(function(q){q.value.left=q.value.start/50;q.value.width=q.value.dur/50;p+=o.evaluate(q.value);});p+="</ul>";return p;};var b=function(){var p="<profile_report>";var o=new Template("<span><index>#{index}</index><name>#{name}</name><start>#{start}</start><end>#{end}</end><duration>#{dur}</duration></span>");k.each(function(q){p+=o.evaluate(q.value);});p+="</profile_report>";return p;};var c=function(){return k.toJSON();};var n=function(){var o=new Date();return o.getTime()-f;};var g=function(){var p=c();var o=new EzRez.Util.RemoteLog({file:"js_profile",message:p});};var e=function(){if($(m)){return;}l();var o="<h3>Profiler Report</h3>"+l();o+="<a class='log' href='#'>(Log)</a>";var p=new Element("div",{id:m,style:"display: none;"}).update(o);document.body.appendChild(p);};var a=function(o){if(o.keyCode!=Event.KEY_F2){return;}e(m);$$("#"+m+" a.log")[0].observe("click",function(p){g();Event.stop(p);return false;});$(m).toggle();};var j=function(o){var p=k.get(o);if(!p){p={index:k.size()+1,name:o,start:0};}p.stop=function(){};p.end=n();p.dur=p.end-p.start;k.set(o,p);EzRez.Util.Debug.info("#{index}) #{name}: #{start}, #{end}, #{dur}".interpolate(p));return p;};this.getStartTime=function(){return f;};this.start=function(o){var p={index:k.size()+1,name:o,start:n(),end:null,dur:null};p.stop=function(){j(o);};k.set(o,p);return p;};this.stop=function(o){return j(o);};this.report=function(){e();};this.logReport=function(){g();};this.clearAll=function(){k=$H();};this.getSpan=function(o){return k.get(o);};this.getSpans=function(){return k;};this.toHTML=function(){return l();};this.toXML=function(){return b();};this.toJSON=function(){return c();};document.observe("keydown",a);};EzRez.Util.Cookie=new function(){var b="";this.create=function(g,h,e){var c="";var j=a(h);var f=new Date();if(e){f.setTime(f.getTime()+(e*60*60*1000));c="; expires="+f.toGMTString();}b=g+"="+j+c+"; path=/";document.cookie=b;};function a(c){return encodeURIComponent(c).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16);});}this.read=function(f){var h=f+"=";var e=document.cookie.split(";");var j;for(var g=0;g<e.length;g++){j=e[g];while(j.charAt(0)==" "){j=j.substring(1,j.length);}if(j.indexOf(h)==0){return decodeURIComponent(j.substring(h.length,j.length));}}return null;};this.erase=function(c){this.create(c,"",-1);};this.eraseAll=function(){var c=document.cookie.split(";");c.each(function(f){var e=f.strip().split("=")[0];this.erase(e);}.bind(this));};this.getCookieText=function(){return b;};};EzRez.Util.Indexer=function(c){var a=$H({index_data:null,id_property:"",property_list:"all"}).merge(c).toObject();var h=$H();var e=a.index_data;var j=a.id_property;var g=a.property_list;a.index_data=null;var l=function(){var n;if(g==="all"){n=e.first();var m;for(m in n){if(n[m]&&m!==j){h.set(m,$H());}}return;}g.each(function(o){h.set(o,$H());});};var k=function(m,o,p){if(Object.isArray(o)){o.each(function(q){k(m,q,p);});return;}var n=m.get(o);if(!n){m.set(o,[p]);}else{n.push(p);}};var b=function(){e.each(function(n,m){n.master_index=m;h.each(function(o){if(n[o.key]){k(o.value,n[o.key],n);}});});};var f=function(){h=null;e=null;};this.filter=function(p,o){var n=h.get(p);if(!n){return[];}var m=n.get(o);if(!m){return[];}return m.pluck(j);};this.filterUnion=function(q,p){var n=h.get(q);var o=[];var m;if(!n){return o;}p.each(function(r){m=n.get(r);if(m){o=o.concat(m);}});o=o.sortBy(function(r){return r.master_index;});return o.pluck(j);};this.filterIntersect=function(q,p){var n=h.get(q);var o=null;var m=null;if(!n){return o;}p.each(function(r){m=n.get(r);if(!m){return;}if(!o){o=m;return;}if([o.length,m.length].include(0)){o=[];throw $break;}o=o.intersect2(m);});if(!o){return[];}return o.pluck(j);};this.getIndex=function(m){return h.get(m);};this.getIndexes=function(){return h;};this.deleteIndexes=function(){h=$H();};this.deleteIndex=function(m){h.unset(m);};this.unload=function(){f();};Event.observe(window,"unload",f);l();b();};EzRez.Util.Omniture=new function(){this.transmit=function(){try{if(!s){return;}var a=s.t();if(a){document.write(a);}}catch(b){}};};EzRez.Util.Locales=new function(){var a=$H();this.setDateLocale=function(b,c){a.set(b,c);};this.get=function(b){return a.get(b);};};EzRez.Util.PriceFormat=function(a){this.parseCurrencyFormatting=function(b){var c=(1/2).toString().charAt(1);b=b.gsub(a.thousandsSeparator,"");b=b.gsub(a.decimalsSeparator,c);b=b.gsub(a.prefix,"");b=b.gsub(a.suffix,"");b=b.gsub(a.currencyCode,"");b=b.gsub(a.currencySymbol,"");return Number(b);};this.getPriceDisplay=function(j,l,m){if(l===null||l===undefined){l=true;}if(m===null||m===undefined){m=true;}var h=parseFloat(j);var b=(h<0);if(b){h=h*-1;}j=h.toFixed(a.decimalPlaces);var e=j.split(".");if(m){var k=e[0];var c=[];while(0<k.length){var n=k.slice(-3);k=k.replace(n,"");c.push(n);}e[0]=c.reverse().join(a.thousandsSeparator);}var g=e.join(a.decimalsSeparator);var f=l?a.prefix+g+a.suffix:g;return b?"- "+f:f;};};EzRez.Util.WebAnalytics={};(function(){var a=$H();EzRez.Util.WebAnalytics.createWebBeacon=function(c,b){if(!a.get(c)){a.set(c,new EzRez.Util.WebAnalytics.WebBeacon(c,b));}return a.get(c);};EzRez.Util.WebAnalytics.createOmnitureWebBeacon=function(f,b){var c=EzRez.Util.WebAnalytics.createWebBeacon(f,EzRez.Util.WebAnalytics.Adapters.Omniture);var e=new EzRez.Util.WebAnalytics.Trackers.Omniture(b,c);e.execute();return c;};EzRez.Util.WebAnalytics.getWebBeacon=function(b){return a.get(b);};EzRez.Util.WebAnalytics.transmitWebBeacons=function(){a.each(function(b){b.value.transmit();});};})();EzRez.Util.WebAnalytics.WebBeacon=function(c,b){var e=$H();var f=b;var a=c;this.getName=function(){return a;};this.setField=function(g,h){e.set(g,h);};this.getField=function(g){return e.get(g);};this.getFields=function(){return e;};this.getAdapter=function(){return f;};this.transmit=function(){console.info(a+"WebAnalytics Fields:");console.dir(e.toObject());if(!f){return;}f(e);};};EzRez.Util.WebAnalytics.Trackers={};EzRez.Util.WebAnalytics.Trackers.Omniture=function(a,c){var e=Object.extend({variables:{},getPageId:function(){},variablePageMap:{},sCodeLoad:function(){}},a);var b=c;function f(g){return g&&g.indexOf("event_")==0;}this.execute=function(){var h=e.getPageId();if(!h){return;}var k=e.variablePageMap[h]||[],t=e.variablePageMap.all,r=[];for(var l=0,p=t.length;l<p;l++){k.push(t[l]);}for(var l=0,p=k.length;l<p;l++){var n,q,o,j;try{n=k[l];j=e.variables[n];if(f(n)){if(j){q=j;r.push(q);}}else{for(q in j){if(j.hasOwnProperty(q)){var g=j[q];if(Object.isFunction(g)){o=g();}else{o=g;}b.setField(q,o);}}}}catch(m){console.debug("Omniture config Error",m);console.debug("pageId:",h);console.debug("sCodeVariable:",q);console.debug("value:",o);console.debug("variable:",n);}}if(r.length>0){b.setField("events",r.join(","));}b.setField("sCodeObject",e.sCodeLoad());};};EzRez.Util.WebAnalytics.Adapters={};EzRez.Util.WebAnalytics.Adapters.Omniture=function(c){try{var b;if(c.get("sCodeObject")!==undefined){b=c.get("sCodeObject");}else{if(typeof s!=="undefined"){b=s;}else{return;}}c.each(function(e){if(e.key!=="sCodeObject"){b[e.key]=e.value;}});var a=b.t();if(a){document.write(a);}}catch(f){throw new EzRez.Util.Exception({name:"EzRez.Util.WebAnalytics.Adapters.Omniture",message:"Omniture s code has not been loaded."},f);}};EzRez.Util.WebAnalytics.GA=new function(){var a=$H();var c="";var b=function(){try{return(_gat!==null&&_gat!==undefined);}catch(f){return false;}};var e=function(k){var g=_gat._getTracker(k);var h={addTrans:g._addTrans,addItem:g._addItem,trackPageview:g._trackPageview,trackTrans:g._trackTrans};var j=[];var f=[];g._addTrans=function(l,q,m,o,n,p){f.push(arguments);};g._addItem=function(l,o,p,n,m,t,q,r){j.push(arguments);};g.pageviewUrl=undefined;g.disableTrackPageview=false;g.disableTrackTrans=false;g._trackPageview=function(){if(g.disableTrackPageview){return;}h.trackPageview.call(g,g.pageviewUrl);};g._trackTrans=function(){if(g.disableTrackTrans){return;}f.each(function(l){h.addTrans.apply(g,l);});j.each(function(l){h.addItem.apply(g,l);});h.trackTrans.call(g);};g.suppressBeacon=false;return g;};this.createTracker=function(g,f){if(!b()){return;}if(!a.get(g)){a.set(g,e(g));}if(arguments.length>1&&arguments[1]===true){c=g;}return a.get(g);};this.getDefaultTracker=function(){return a.get(c);};this.getTracker=function(f){return a.get(f);};this.trackPageview=function(){if(!b()){return;}a.each(function(f){if(f.value.suppressBeacon){return;}f.value._trackPageview();});};this.trackTrans=function(){if(!b()){return;}a.each(function(f){if(f.value.suppressBeacon){return;}f.value._trackTrans();});};};(function(){var a=0;EzRez.Util.JsonpRequest=function(c,b){var f=Object.extend({parameters:{},jsonpCallbackQueryParam:"",jsonpCallback:function(){},onSuccess:function(){},onFailure:function(j){new EzRez.Util.Exception({message:"EzRez.Util.JsonpRequest failure: "+EzRez.StringUtil.toSplunkFriendlyString({url:c,parameters:f.parameters})});},onTimeout:function(j){new EzRez.Util.Exception({message:"EzRez.Util.JsonpRequest timeout: "+EzRez.StringUtil.toSplunkFriendlyString({url:c,parameters:f.parameters})});},timeout:60*2000},b);a++;var h="_jsonpCallback"+a;EzRez.Util.JsonpRequest[h]=function(j){f.jsonpCallback(j);EzRez.Util.JsonpRequest[h]=null;};var e=YAHOO.util.Get.script(g(),{onSuccess:f.onSuccess,onFailure:f.onFailure,onTimeout:f.onTimeout,timeout:f.timeout,scope:this});function g(){if(EzRez.StringUtil.isEmpty(c)){return"";}f.parameters[f.jsonpCallbackQueryParam]="EzRez.Util.JsonpRequest."+h;var j=c.include("?")?Object.extend(c.toQueryParams(),f.parameters):f.parameters;return c.split("?")[0]+"?"+Object.toQueryString(j);}};})();EzRez.Util.Event=new function(){this.simulate=function(c,b,j){var a={click:{ie:"onclick",other:"click"},change:{ie:"onchange",other:"change"}};function l(m,e){if(m===undefined||typeof m!=="function"){return;}m(e);}function f(n,m){throw new EzRez.Util.Exception({name:"EzRez.Util.Event",message:n},m);}if(!c||!b){f("Element and event required");}if(!a[b]){f("Unknown event type");}try{var k={};if((navigator.appVersion.indexOf("MSIE")!=-1)&&(parseFloat(navigator.appVersion.split("MSIE")[1])<9)){var h=c.type.toLowerCase();if(b==="click"&&(h==="radio"||h==="checkbox")){c.checked=!c.checked;}if(document.createEventObject){k=document.createEventObject();l(j,k);}c.fireEvent(a[b].ie,k);}else{k=document.createEvent("MouseEvents");k.initMouseEvent(a[b].other,true,true,window,0,0,0,0,0,false,false,false,false,0,null);l(j,k);c.dispatchEvent(k);}}catch(g){f("Error in EzRez.Util.Event.simulate()",g);}return c;};this.pubsub={_cache:{},publish:function(b,a){if(!this._cache[b]){return;}for(var c=0,f=this._cache[b].length;c<f;c++){var e=this._cache[b][c];e.apply(e,a||[]);}},subscribe:function(a,b){if(!this._cache[a]){this._cache[a]=[];}this._cache[a].push(b);}};};EzRez.Util.Date=new function(){this.validate=function(a,c,b){if((c<1||c>12)||(a<1||a>31)||((c==4||c==6||c==9||c==11)&&a>30)||(c==2&&(b%400==0||b%4==0)&&b%100!=0&&a>29)||(c==2&&b%100==0&&a>29)){return false;}return true;};};(function(b){var a=EzRez.Util.Event.pubsub;if(EzRez===undefined){throw ("ezrez-ui.js requires ezrez.js");}if(EzRez.Util===undefined){throw ("ezrez-ui.js requires ezrez-util.js");}EzRez.UI={};EzRez.UI.Spinner=function(k,e){var g=$H({hide_id:null,hide_sibling:true}).merge(e).toObject();var h=g.hide_id;var f=g.hide_sibling;var c=null;var j=function(){c=$(k);if(!c){throw ({name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this control to operate."});}return true;};this.show=function(){if(!j()){return;}c.show();if(f){var l=c.next();if(l!=undefined){c.next().hide();}}if($(h)){$(h).hide();}};this.hide=function(){if(!j()){return;}c.hide();if(f){var l=c.next();if(l!=undefined){c.next().show();}}if($(h)){$(h).show();}};this.setMessage=function(l){if(!j()){return;}c.down("p.message").update(l);};this.getMessage=function(){if(c===null){return"";}return c.down("p.message").innerHTML;};this.getElement=function(){return c;};};EzRez.UI.TabLinks=function(l){var n=Math.floor(new Date().getTime()+1000*Math.random());var g=$H({name:"TabLinks_"+n,default_tab:null,use_cookies:true,link_active_css:null,no_hide_classname:null,onshow:function(r,t){}}).merge(l).toObject();var p=g.name;var e=g.default_tab;var f=g.use_cookies;var o=g.onshow;var h=g.link_active_css;var q=g.no_hide_classname;var k=new Array();var c=new Array();var m=function(){if(h===null){return;}c.each(function(r){r.anchor.removeClassName(h);});};var j=function(r){if(h===null){return;}if(typeof(r)=="string"){r=$(r);}r.addClassName(h);};this.showTab=function(t,r){if(typeof(t)=="string"){t=$(t);}this.hideTabs();if(!t){return;}t.show();m();var u=c.findAll(function(v){return(v.tab==t);});u.each(function(v){j(v.anchor);if(f){EzRez.Util.Cookie.create(p,v.tab.identify());}}.bind(this));o(r,t);};this.showLastViewedTab=function(){var r=EzRez.Util.Cookie.read(p);if(r){this.showTab(r);}else{if(e!=null){this.showTab(e);}}};this.hideTabs=function(){k.each(function(t){var r=$(t);if(!r){return;}if(r.hasClassName(q)){return;}r.hide();});};this.clearCookies=function(){EzRez.Util.Cookie.erase(p);};this.createTabLink=function(t,r){if(typeof(r)=="string"){r=$(r);}if(typeof(t)=="string"){t=$(t);}r.observe("click",function(u){this.showTab(t,u);Event.stop(u);a.publish("TabLinks/tabClicked",[t.identify()]);return false;}.bindAsEventListener(this));k.push(t);c.push({anchor:r,tab:t});};this.destroyTabLink=function(u,t){if(typeof(t)=="string"){t=$(t);}if(typeof(u)=="string"){u=$(u);}t.stopObserving("click");var r=k.indexOf(u);if(r>=0){k.splice(r,1);}r=c.indexOf({anchor:t,tab:u});if(r>=0){c.splice(r,1);}};this.addLinks=function(r){r.each(function(u){var v=u.href.split("#")[1];var t=$(v);if(t===null){return;}this.createTabLink(t,u);}.bind(this));};this.removeLinks=function(r){r.each(function(u){var v=u.href.split("#")[1];var t=$(v);if(t===null){return;}this.destroyTabLink(t,u);}.bind(this));};this.getLinks=function(){return c;};this.getTabs=function(){return k;};};EzRez.UI.PhotoSwitcher=function(c,e){e.childElements().each(function(g){var f=g.select("img.thumb")[0];f.observe("click",function(h){var k=Event.element(h);var j=k.parentNode.select("img.medium")[0];c.src=j.src;});});};EzRez.UI.Pagination=function(m){var A=$H({per_page:10,elements:[],active_element_classname:"",container_css:null,show_start:function(){},show_complete:function(){},listener_timeout:100}).merge(m).toObject();var E=Object.isString(A.per_page)?parseInt(A.per_page):A.per_page;var j=A.elements;var f=[];var B=1;var w=false;var h=A.container_css;var r="previous";var q="next";var v="page";var D="inactive";var k=A.active_element_classname;var l=false;var F=A.show_start;var g=A.show_complete;var z=A.listener_timeout;var o=1;var u=function(){if(!h){return false;}if($$(h+" a").size()===0){return false;}return true;};var t=function(H){if(f.length===0){return[];}if(!f[H-1]){w=true;return f[0].compact();}return f[H-1].compact();};var G=function(){if(!l){return;}var I=B;var J=B;var K=new Element("a").addClassName;var H=new Element("a").addClassName;$$(h+" a."+v).invoke("removeClassName",D);$$(h+" a."+v+'[rel="'+B+'"]').invoke("addClassName",D);if(B>1){I=B-1;K=new Element("a").removeClassName;}if(B<f.size()){J=B+1;H=new Element("a").removeClassName;}$$(h+" a."+r).each(function(L){L.writeAttribute("rel",I);K.apply(L,[D]);});$$(h+" a."+q).each(function(L){L.writeAttribute("rel",J);H.apply(L,[D]);});};var n=function(H){if(!H){H=t(B);}H.each(function(I){if(!Object.isElement(I)){I=$(I);}if(!I){return;}I.removeClassName(k);I.hide();});};var C=function(I,H){F();n(H);I=(isNaN(I))?B:I;I=(w)?B:I;B=I;var J=t(B);J.each(function(K){if(!Object.isElement(K)){K=$(K);}if(!K){return;}K.addClassName(k);K.show();});G();g(J);};var e=function(I,H){var J=new EzRez.UI.Sorter({elements:j});j=J.sortBy(I,H);};var y=function(I){var J=$H({data:null,sortby:null,ascending:true}).merge(I).toObject();if(J.data){j=J.data;}if(J.sortby){e(J.sortby,J.ascending);}var H=t(B);f=j.eachSlice(E);var K=f.size();if(l){$$(h).each(function(L){var M=L.select("a."+v);M.slice(0,K-1).invoke("show");M.slice(K,M.length).invoke("hide");});}C(1,H);};var x=function(){if(!l){return;}$$(h+" a").invoke("stopObserving","click",p);};var c=function(){f=null;j=null;x();};var p=function(H){EzRez.Util.Profiler.start("Pagination Click "+o);var J=H.target;var I=parseInt(J.readAttribute("rel"));F();var K=function(){n();I=(isNaN(I))?B:I;I=(w)?B:I;B=I;var O=t(B);var N=EzRez.Util.Profiler.start("_showPage Show Elements");O.each(function(P){if(!Object.isElement(P)){P=$(P);}if(!P){return;}P.addClassName(k);P.show();});N.stop();var M=EzRez.Util.Profiler.start("_showPage Adjust Pagination");G();M.stop();var L=EzRez.Util.Profiler.start("_showPage Show Complete");g(O);L.stop();EzRez.Util.Profiler.stop("Pagination Click "+o);};if(z>0){setTimeout(K,z);}else{K();}o++;Event.stop(H);return false;};this.makePages=function(H){y(H);};this.showPage=function(H){C(H);};this.hidePage=function(){n();};this.showPageByIndex=function(H){var I=Math.ceil((H+1)/E);this.showPage(I);};this.sortBy=function(I,H){e(I,H);y();};this.getPage=function(H){return t(H);};this.getPages=function(){return f;};this.getElements=function(){return j;};this.getPageNumber=function(){return B;};this.getCurrentPage=function(){return t(B);};this.unload=function(){c();};this.applyListeners=function(){if(!l){return;}$$(h+" a").invoke("observe","click",p);Event.observe(window,"unload",c);};this.removeListeners=function(){x();};l=u();this.makePages();this.applyListeners();};EzRez.UI.LightView=function(k){var e=$H({class_name:null,rel:null,options:{topclose:false,width:400,height:400},"lightview:opened":null,"lightview:hidden":null}).merge(k).toObject();var m=e.class_name;var c=e.rel;var n=e.options;var g=e["lightview:opened"];var h=e["lightview:hidden"];var l={};var j=function(C,t){if(!Lightview){throw new EzRez.Util.Exception({message:"EzRez.UI.LightView requires lightview.js."});}if(!$("lightview")){throw new EzRez.Util.Exception({message:"Lightview element is missing."});}if(!$(C)){throw new EzRez.Util.Exception({message:"Missing anchor element for EzRez.UI.LightView."});}var q=$("lightview");var v=$(C);var z=v.readAttribute("title")||"::";z=z.split("::");if(!Lightview.started){Lightview.start();}if(m){var A;var u;if(!$("lightview_style")){A=new Element("div",{id:"lightview_style",style:"display:none;"});q.insert(A,{position:"after"});}else{A=$("lightview_style");}if(A.select(m).size()==0){u=new Element("div",{"class":m});A.insert(u);}else{u=A.select(m)[0];}var x=u.getStyle("height");var y=u.getStyle("width");if(x!==undefined){var r=parseInt(x.replace("px",""));if(!isNaN(r)){n.height=r;}}if(y!==undefined){var B=parseInt(y.replace("px",""));if(!isNaN(B)){n.width=B;}}}var o=function(w){if(g!==null){g(w,t);}};var p=function(w){if(h!==null){h(w,t);document.stopObserving("lightview:hidden",p);}if(g!==null){document.stopObserving("lightview:opened",o);}};if(g!==null){document.observe("lightview:opened",o);}if(g!==null||h!=null){document.observe("lightview:hidden",p);}l={href:v.href,rel:c,title:z[0],caption:z[1],options:n};Lightview.show(l);};var f=function(){Lightview.hide();};this.getShowOptions=function(){return l;};this.setEventsListeners=function(p){var o=$H({"lightview:opened":null,"lightview:hidden":null}).merge(p).toObject();g=o["lightview:opened"];h=o["lightview:hidden"];};this.show=function(o){j(o);};this.hide=function(){f();};this.domAction=function(p,o){j(p.target,o);Event.stop(p);return false;};};EzRez.UI.Carousel=function(k,c){var g=$H({customStyle:false,revealAmount:0,isCircular:true,isVertical:false,animation:{speed:2,effect:null},autoPlayInterval:3,numVisible:1,navigation:{prev:null,next:null}}).merge(c).toObject();var j=null;EzRez.UI.Carousel.list=EzRez.UI.Carousel.list||{};try{var f=Object.clone(g);f.autoPlayInterval=Math.round(g.autoPlayInterval*1000);f.animation.effect=YAHOO.util.Easing[g.animation.effect]||null;j=new YAHOO.widget.Carousel(k,f);j.render();j.show();j.startAutoPlay();EzRez.UI.Carousel.list[k]=this;}catch(h){throw ("EzRez.UI.Carousel requires YAHOO.widget.Carousel.");}if(!g.customStyle){$(k).addClassName("yui-skin-sam");}this.useCustomStyle=function(){g.customStyle=true;$(k).removeClassName("yui-skin-sam");};this.getCarousel=function(){return j;};EzRez.UI.Carousel.getCarouselBySelector=function(l){var e=$$(l).first();if(!e){return null;}var n=e.identify();if(e.hasClassName("promotionGroup")&&l.indexOf("#")>-1){var o=e.up(".promotionGroupContainer");var m=null;if(o){m=o.identify();}if(l.indexOf(n)>-1||l.indexOf(m)>-1){console.error("Retrieving a Promotion Group Carousel instance by a promotion group specific ID selector is prohibited, as the ID can differ based on the environment. Use a classname selector instead.");return null;}}return EzRez.UI.Carousel.list[n];};};EzRez.UI.DualSliderFilter=function(k){var p=$H({id:null,ticks:null,defaultMinVal:null,defaultMaxVal:null,update:function(){}}).merge(k).toObject();if(!(p.ticks||p.id)){throw ("Missing parameters for EzRez.UI.DualSliderFilter.");}var h=null;var g=this;var u=new EzRez.UI.DOMCache({rootNode:"#"+p.id,nodes:{slider:function(e){return e.down("div.filterSlider");},highlight:function(e){return e.down("span.highlight");},minValue:function(e){return e.down("div.filterValues span.min");},maxValue:function(e){return e.down("div.filterValues span.max");},minThumb:function(e){return e.down("div.thumbMin");},maxThumb:function(e){return e.down("div.thumbMax");},inputMinValue:function(e){return e.down("input.min");},inputMaxValue:function(e){return e.down("input.max");}}});if(!u.cache()){throw ("Invalid DOM nodes ("+u.getInvalidNodes().join(",")+") for "+p.id+" EzRez.UI.DualSliderFilter.");}var n=u.slider.getWidth()-u.minThumb.getWidth();var j=n/p.ticks.length;p.defaultMinVal=p.defaultMinVal?p.defaultMinVal:0;p.defaultMaxVal=p.defaultMaxVal?p.defaultMaxVal:n;try{h=YAHOO.widget.Slider.getHorizDualSlider(u.slider,u.minThumb,u.maxThumb,n,Math.ceil(j),[p.defaultMinVal,p.defaultMaxVal]);h.animate=false;}catch(m){throw ("EzRez.UI.DualSliderFilter requires YAHOO.widget.Slider.");}h.animate=false;var t=function(v,e){if(!u.rootNode){return;}u.rootNode.fire("DualSliderFilter:update",{min:v,max:e,instance:g});};var c=function(){var v=h.minVal;var e=Math.floor(v/j-1);if(e<0){return 0;}return e;};var q=function(){var v=h.maxVal;var e=Math.ceil(v/j);if(e>p.ticks.length-1){return p.ticks.length-1;}return e;};var l=function(){var x=h.minVal;var v=h.maxVal;if(x>=0&&x<=n){u.highlight.setStyle({left:(x+4)+"px"});}if(v>=0&&v<=n){u.highlight.setStyle({width:(v-x)+"px"});}var w=c();var e=q();if(p.ticks[w]!==undefined){var y=p.ticks[w].value;u.inputMinValue.value=y;u.minValue.innerHTML=p.ticks[w].label;o(u.minValue,"min",y);}if(p.ticks[e]!==undefined){var z=p.ticks[e].value;u.maxValue.innerHTML=p.ticks[e].label;u.inputMaxValue.value=z;o(u.maxValue,"max",z);}};function o(e,v,w){w=(w+"").replace(".","_");e.writeAttribute({"class":"#{className} #{className}_#{value}".interpolate({className:v,value:w})});}var r=function(){var v=c();var e=q();var w=p.ticks[0];var x=p.ticks[p.ticks.length-1];if(p.ticks[v]){w=p.ticks[v];}if(p.ticks[e]){x=p.ticks[e];}return{min:w,max:x};};var f=function(){var e=r();p.update(e.min,e.max);t(e.min,e.max);};this.getSliderValues=function(){return r();};this.updateSlider=function(){l();};this.update=function(){f();};this.reset=function(){h.setValues(0,p.ticks.length,true,true,false);};this.applyListeners=function(){h.subscribe("change",l);h.subscribe("ready",l);h.subscribe("slideEnd",f,this,true);};this.removeListeners=function(){h.unsubscribe("change",l);h.unsubscribe("ready",l);h.unsubscribe("slideEnd",f);};this.getDualSlider=function(){return h;};};EzRez.UI.DistanceFilter=function(c){var j=Object.extend({formSelector:"",geoLocations:[],update:function(){}},c);var g=[];function e(n){var o=n.serialize(true);var m=o.locationId;if(m){var l=new EzRez.WebApi.GeoLocation(j.geoLocations[m]);o.locationJson=Object.toJSON(l);}else{o={locationJson:null,locationId:null,locationFilterRadius:null,filterFromAllResults:true};}j.update(o);}function f(m){var o=$(m.target).up("form");var l=o.down(".showAllLabeledInput input");if(l){l.checked=false;}var p=o.serialize(true);var n=o.down(".toggleUnitsLabeledInput input");if(EzRez.StringUtil.isEmpty(p.locationId)||(n&&EzRez.StringUtil.isEmpty(p.toggleUnits))){return;}e(o);}function k(l){var n=$(l.target);if(n.checked){var m=$(l.target).up("form");h(m);e(m);}}function h(p){var o=p.select("input");for(var m=0;m<o.length;m++){var l=o[m].name;var n=o[m].type.toLowerCase();if(l==="showAll"){o[m].checked=true;}else{if((n==="radio"||n==="checkbox")&&o[m].checked){o[m].checked=false;}}}}this.applyListeners=function(){$$(j.formSelector).each(function(l){g.push(l.on("click",".locationIdLabeledInput input",f));g.push(l.on("click",".toggleUnitsLabeledInput input",f));});$$(j.formSelector+" select").each(function(l){g.push(l.on("change",f));});$$(j.formSelector).each(function(l){g.push(l.on("click",".showAllLabeledInput input",k));});};this.removeListeners=function(){g.invoke("stop");g=[];};this.update=function(){$$(j.formSelector).each(function(l){e(l);});};this.reset=function(){$$(j.formSelector).each(function(l){h(l);});};};EzRez.UI.CheckboxFilter=function(n){var k=Object.extend({update:null,form_id:null,checkbox_name:null,checked_by_default:true},n);var t=k.update;var q=k.form_id;var g=k.checkbox_name;var f=k.checked_by_default;var o=0;var e=false;var j=function(){if(!$(q)){throw new EzRez.Util.Exception({message:"Missing "+q+" form element for EzRez.UI.CheckboxFilter."});}if($(q).select('input[name="'+g+'"]').size()===0){throw new EzRez.Util.Exception({message:"Missing "+g+" checkbox elements for EzRez.UI.CheckboxFilter."});}return true;};var m=function(){var u=$$("#"+q+' input[name="'+g+'"]:checked');return u.pluck("value");};var r=function(){if(t===null){return;}t(m(),g);o++;};var l=function(v){var u=$(v.target).up("form").down(".showAllLabeledInput input");if(u){u.checked=false;}r();};var h=function(u){var w=$(u.target);if(w.checked){var v=$(u.target).up("form");c(v);r();}};var c=function(y){var x=y.select("input");for(var v=0;v<x.length;v++){var u=x[v].name;var w=x[v].type.toLowerCase();if(u==="showAll"){x[v].checked=true;}else{if(w==="checkbox"&&x[v].checked){x[v].checked=false;}}}};this.update=function(){r();};this.getCheckboxName=function(){return g;};this.getCheckedValues=function(){return m();};this.reset=function(){var u=$(q);c(u);};var p=[];this.applyListeners=function(){if(!e){return;}var u=$(q);p.push(u.on("click",".checkboxOptionsLabeledInput input",l));p.push(u.on("click",".showAllLabeledInput input",h));};this.removeListeners=function(){if(!e){return;}p.invoke("stop");p=[];};e=j();};EzRez.UI.IconFilter=function(o){var k=$H({update:null,form_id:null,active_classname:"active",hover_classname:"hover",checkbox_name:null,checked_by_default:true,show_all_id:null}).merge(o).toObject();var t=k.update;var p=k.form_id;var h=k.checkbox_name;var g=k.checked_by_default;var r=k.show_all_id;var f=k.active_classname;var c=k.hover_classname;if($(p)===null){throw ("Missing "+p+" form element for EzRez.UI.IconFilter.");}if($(p).getInputs("checkbox",h).size()===0){throw ("Missing "+h+" checkbox elements for EzRez.UI.IconFilter.");}if($(p).select("li").size()===0){throw ("Missing li elements for EzRez.UI.IconFilter.");}var n=function(){var u=$$("#"+p+' input[name="'+h+'"]:checked');return u.pluck("value");};var q=function(){if(t===null){return;}t(n(),h);};var m=function(u){var v=$(u.target);if(v.nodeName==="INPUT"){v=v.up(".labeledInput");}else{var w=v.down("input");w.checked=!w.checked;}v.toggleClassName(f);if(v.hasClassName(f)){v.addClassName(c);}else{v.removeClassName(c);}if($(r)){$(r).checked=false;}q();};var e=function(u){$(u.target).addClassName(c);};var l=function(u){var v=$(u.target);if(v.hasClassName(f)){return;}v.removeClassName(c);};var j=function(){$(p).getInputs("checkbox",h).each(function(u){u.checked=g;});q();};this.update=function(){q();};this.getCheckboxName=function(){return h;};this.getCheckedValues=function(){return n();};this.reset=function(){$(p).select("li").each(function(u){u.removeClassName(f);u.removeClassName(c);});$(p).getInputs("checkbox",h).each(function(u){u.checked=g;});if($(r)){$(r).checked=!g;}};this.applyListeners=function(){$(p).on("click",".labeledInput",m);$(p).select("li").each(function(u){u.observe("mouseover",e);u.observe("mouseout",l);});if($(r)){$(r).observe("click",j);}};this.removeListeners=function(){$(p).select("li").each(function(u){u.stopObserving("mouseover",e);u.stopObserving("mouseout",l);});if($(r)){$(r).stopObserving("click",j);}};};EzRez.UI.WaitingOverlay=function(g){var c=$H({name:null,header:"",body:""}).merge(g).toObject();var m="#"+c.name;var o=c.header;var e=c.body;var l=1;var k=1;var n=new YAHOO.widget.Panel(c.name,{width:"240px",close:false,draggable:false,zindex:4,modal:true,visible:false,underlay:"none"});var p=false;var j=false;var f=function(){var u=document.viewport.getScrollOffsets();var q=350;var v=u.top+350;var t=$$(m+"_c.yui-panel-container")[0];var r="";if(!t){return;}if(!n.style_top){r=t.getStyle("top");if(r){n.style_top=parseInt(r.replace("px",""));}}if(!n.style_left){r=t.getStyle("left");if(r){n.style_left=parseInt(r.replace("px",""));}}if(!isNaN(n.style_top)){v=u.top+n.style_top;}if(!isNaN(n.style_left)){q=n.style_left;}n.moveTo(q,v);};var h=function(){if(p){return;}n.setHeader(o);n.setBody(e);p=n.render(document.body);};this.setContent=function(r,q){o=r;e=q;p=false;};this.hide=function(){if(j){n.hide();j=false;}k++;};this.show=function(){if(j){return;}h();if(!j){f();n.show();j=true;}l++;};this.getPanel=function(){return n;};};EzRez.UI.Dialog=function(k){var m=Object.extend({name:null,position:"center",headerSelector:"div.header",bodySelector:"div.body",headerContent:null,bodyContent:null,className:""},k);var p=1;var n=1;var e=null;var h=null;var g=false;var f=$$("select","embed","object");var t;var r;var c;var q;var l=function(){if(g){return true;}e=$(m.name);e.addClassName(m.className);h=e.down("div.container");g=(e);if(!g){throw new EzRez.Util.Exception({message:"Missing #"+m.name+" element for EzRez.UI.Dialog."});}if(m.headerContent){h.down(m.headerSelector).update(m.headerContent);}if(m.bodyContent){h.down(m.bodySelector).update(m.bodyContent);}return g;};var j=function(u){if(!l()){return;}var w={viewport:Object.extend(document.viewport.getScrollOffsets(),document.viewport.getDimensions()),body:$(document.body).getDimensions(),container:h.getDimensions()};w.container.top=Math.floor(w.viewport.top+w.viewport.height/2-w.container.height/2);w.container.left=Math.floor(w.viewport.left+w.viewport.width/2-w.container.width/2);e.setStyle({height:w.body.height+"px",width:w.viewport.width+"px"});var v={center:function(){h.addClassName("center");h.setStyle({top:w.container.top+"px",left:w.container.left+"px"});},topleft:function(){h.addClassName("topleft");},topright:function(){h.addClassName("topright");}};h.removeClassName("center");h.removeClassName("topleft");h.removeClassName("topright");var x=v[u];if(!x){x=v.center;}x();};var o=function(){j(m.position);};c=function(){f.invoke("setStyle","visibility: hidden");};q=function(){f.invoke("setStyle","visibility: visible");};t=function(){Event.observe(window,"resize",o);Event.observe(window,"scroll",o);};r=function(){Event.stopObserving(window,"resize",o);Event.stopObserving(window,"scroll",o);};this.setHeaderText=function(u){if(!l()){return;}h.down(m.headerSelector).update(u);};this.setBodyText=function(u){if(!l()){return;}h.down(m.bodySelector).update(u);};this.show=function(){if(!l()){return;}e.show();j(m.position);c();t();p++;};this.hide=function(){if(!l()){return;}q();e.hide();r();n++;};this.showDialogListener=function(u){c=u;};this.hideDialogListener=function(u){q=u;};this.applyListeners=function(){t();};this.removeListeners=function(){r();};};(function(){var g=false;var e={lightbox:null};var c=false;var f=false;EzRez.UI.LightBox=function(o){var p=$H({className:"",headerClassName:"",type:"iframe",opened:function(){$$("#lightbox .container")[0].focus();},hidden:function(){}}).merge(o).toObject();var h=1;var l=1;var n;var B;var y={};var k=null;var q=function(){if(c){return;}var C=$("lightbox");if(!C){return;}e={lightbox:C,container:C.down("div.container"),loading:C.down("div.loading"),effect:C.down("div.container div.effect_container"),header:C.down("div.container div.header"),title:C.down("div.container div.header h3.title"),caption:C.down("div.container div.header p.caption"),main:C.down("div.container div.main"),content:C.down("div.container div.main div.content"),footer:C.down("div.container div.footer"),close:C.down("div.container div.header a.close_button"),footerClose:C.down("div.container div.footer button.close_button"),overlapping:$$("select","embed","object")};};var r=function(){if(f){return c;}if(c){return true;}q();var C=Object.values(e);c=!(C.include(null)||C.include(undefined));return c;};var x=function(){if(!y.container){y.container=e.container.getDimensions();}if(!y.main){y.main=e.main.getDimensions();}if(!y.loading){y.loading=e.loading.getDimensions();}if(!y.hspace){y.hspace=2*parseInt(e.main.getStyle("padding-left").replace("px",""));}if(!y.vspace){y.vspace=e.header.getHeight()+e.footer.getHeight();}var C={container:{style:"top:#{top}px; left:#{left}px; width:#{width}px; height:#{height}px;"},main:{style:""}};C.viewport=Object.extend(document.viewport.getScrollOffsets(),document.viewport.getDimensions());C.viewport.margin=10;C.container.height=y.main.height+y.vspace;C.container.width=y.main.width;if(C.container.height>C.viewport.height){C.container.height=C.viewport.height;}C.container.top=Math.floor(C.viewport.top+C.viewport.height/2-C.container.height/2);C.container.left=Math.floor(C.viewport.left+C.viewport.width/2-C.container.width/2);if(C.viewport.width-C.container.width<2*C.viewport.margin){C.container.width=C.viewport.width-2*C.viewport.margin;C.container.left=C.viewport.margin;C.main.width=C.container.width-y.hspace;C.main.style+="width:#{width}px !important;";}if(C.viewport.height-C.container.height<2*C.viewport.margin){C.container.height=C.viewport.height-2*C.viewport.margin;C.container.top+=C.viewport.margin;C.main.height=C.container.height-y.vspace;C.main.style+="height:#{height}px !important;";}if(C.container.top<C.viewport.margin){C.container.top=C.viewport.margin;}if(C.container.left<C.viewport.margin){C.container.left=C.viewport.margin;}e.container.writeAttribute("style",C.container.style.interpolate(C.container));e.main.writeAttribute("style",C.main.style.interpolate(C.main));e.loading.setStyle({top:Math.floor(C.viewport.top+C.viewport.height/2-y.loading.height/2)+"px",left:Math.floor(C.viewport.left+C.viewport.width/2-y.loading.width/2)+"px"});};var A=function(){if(!c){return;}var D=document.viewport.getWidth(),C=document.body,E=document.documentElement,F=Math.max(C.scrollHeight,C.offsetHeight,E.clientHeight,E.scrollHeight,E.offsetHeight);e.lightbox.setStyle({height:F+"px",width:D+"px"});};var u=function(E){var F;var H=E.getAttribute("title")||"::";H=H.split("::");if(H.length>=1){e.title.innerHTML=H[0];}if(H.length>=2){e.caption.innerHTML=H[1];}switch(p.type){case"iframe":F=new Element("iframe",{"class":"frame",src:$(E).href,frameBorder:0,hspace:0,scrolling:"auto"});k=F;break;case"inline":var C=E.href.split("#");if(C.length>=2){var G=$(C[1]);F=new Element("div",{"class":"inline"}).update(G.innerHTML);}break;case"flash":var D="<object class='flash' pluginspage='http://www.adobe.com/go/getflashplayer' wmode='transparent' quality='high' type='application/x-shockwave-flash' data='#{src}'><param value='#{src}' name='movie'/><param value='true' name='allowFullScreen'/></object>";F=D.interpolate({src:E.href});break;}if(!F){return;}setTimeout(function(){e.content.insert(F);p.opened();},500);};var z=function(){if(!c){return;}if(k){k=null;}e.content.innerHTML="";e.loading.show();B();setTimeout(p.hidden,100);g=false;l++;};var j=function(){if(!c){return;}e.overlapping.invoke("setStyle","visibility: visible");e.lightbox.hide();e.main.removeClassName(p.className);e.header.removeClassName(p.headerClassName);if(k){k.src="javascript:false";setTimeout(z,10);}else{z();}};var v=function(C){if(!c){return;}if(g){j();}A();e.overlapping.invoke("setStyle","visibility: hidden");e.lightbox.show();e.main.addClassName(p.className);e.header.addClassName(p.headerClassName);x();e.container.hide();Effect.Appear(e.container,{duration:0.5});u(C);n();g=true;h++;};var m=function(C){setTimeout(j,100);Event.stop(C);return false;};var t=function(C){x();A();};var w=function(D){if(D.keyCode===9){var C=this.select(".header > a.close_button")[0];var E=this.select("button.close_button")[0];if(D.shiftKey&&document.activeElement===C){D.preventDefault();E.focus();}else{if(!D.shiftKey&&document.activeElement===E){D.preventDefault();C.focus();}}}};n=function(){if(!c){return;}e.close.observe("click",m);e.footerClose.observe("click",m);e.container.observe("keydown",w);Event.observe(window,"resize",t);};B=function(){if(!c){return;}e.close.stopObserving("click",m);e.footerClose.stopObserving("click",m);e.container.stopObserving("keydown",w);Event.stopObserving(window,"resize",t);};this.show=function(C){v(C);};this.hide=function(){j();};this.applyListeners=function(){n();};this.removeListeners=function(){B();};r();};})();EzRez.UI.Expander=function(l){var h=$H({outer_classnames:["outer_container"],inner_classname:"inner_container"}).merge(l).toObject();var j="div.show_more";var p="a.open";var m="a.close";var n="first";var q="last";var f="opened";var e=h.inner_classname;var k=h.outer_classnames;if(k.size()===0){throw ("EzRez.UI.ShowMore missing required classnames");}if($$(k[0]).size()===0){throw ("EzRez.UI.ShowMore missing required classnames");}if($$(k[0]+" "+e).size()===0){throw ("EzRez.UI.ShowMore missing required classnames");}var g=function(t){var u=$(t);k.each(function(w){var v=u.up(w);if(v!==undefined){v.addClassName(f);}});u.hide();u.adjacent(m).each(function(v){v.show();});};var c=function(t){var u=$(t);k.each(function(w){var v=u.up(w);if(v!==undefined){v.removeClassName(f);}});u.hide();u.adjacent(p).each(function(v){v.show();});};var r=function(t){g(t.target);Event.stop(t);return false;};var o=function(t){c(t.target);Event.stop(t);return false;};this.open=function(t){g(t);};this.close=function(t){c(t);};this.applyListeners=function(){var t=k.reverse(false).concat([j,p]).join(" ");var u=k.reverse(false).concat([j,m]).join(" ");EzRez.Util.Profiler.start("EzRez.UI.Expander applyListeners "+t);$$(t).each(function(v){v.observe("click",r);});EzRez.Util.Profiler.stop("EzRez.UI.Expander applyListeners "+t);EzRez.Util.Profiler.start("EzRez.UI.Expander applyListeners "+u);$$(u).each(function(v){v.observe("click",o);});EzRez.Util.Profiler.stop("EzRez.UI.Expander applyListeners "+u);};this.removeListeners=function(){var t=k.reverse(false).concat([j,p]).join(" ");var u=k.reverse(false).concat([j,m]).join(" ");$$(t).each(function(v){v.stopObserving("click",r);});$$(u).each(function(v){v.stopObserving("click",o);});};this.hideUnnecessaryLinks=function(t){t=(!t||t.length===0)?$$(k.last()+" "+k.first()):t;t.each(function(u){var A=u.down(e);if(!A){return;}var w=A.select("p");var z=w.findAll(function(C){var B=(C.innerHTML.strip().length==0);if(B){C.hide();return false;}return C.visible();});var y=z.first();if(y){y.addClassName(n);}var v=z.last();if(v){v.addClassName(q);}var x=u.down(j+" a");if(A.getHeight()<=u.getHeight()){x.hide();}else{x.show();}});};};EzRez.UI.Sorter=function(c){var e=$H({elements:null}).merge(c).toObject();var g=e.elements;var f=function(){g=null;};this.sortBy=function(j,h){h=(h===undefined)?true:h;g=g.sortBy(function(l){if(Object.isElement(l)){l=l.identify();}return j(l);});if(!h){g.reverse();}var k=g.first();if(!Object.isElement(k)){k=$(k);}g.slice(1,g.length).each(function(l){if(!Object.isElement(l)){l=$(l);}k.insert({after:l});k=l;});k=null;return g;};this.setElements=function(h){g=h;};this.getElements=function(){return g;};this.unload=function(){f();};};EzRez.UI.MultiAutoComplete=function(g){var h=$H({name:null,maxInputs:0}).merge(g).toObject();var f=h.name;if(!$(f)||!$(f+"_auto")){throw new EzRez.Util.Exception({message:"Missing element for EzRez.UI.AutoComplete."});}var j=new FacebookList(f,f+"_auto",{maxInputs:h.maxInputs,startinput:false,extrainputs:false});var c=j.maininput.down("input");if(c){c.addClassName("automation-"+f);}this.loadAirportsFromSelect=function(k){if(!k){k=$(f+"_select");}if(!k){throw new EzRez.Util.Exception({message:"Missing SELECT input for EzRez.UI.AutoComplete."});}var l=[];k.select("option").each(function(m){var n={caption:m.innerHTML,value:m.value,selected:false};if(m.readAttribute("selected")){j.add(n);n.selected=true;}j.autoFeed(n);l.push(n);});return l;};function e(k){if(k.selected){j.add(k);}j.autoFeed(k);}this.loadAirportsFromArray=function(k){var l=k.concat([]);var m=function(){var n=l.shift();e(n);if(l.length>0){setTimeout(m,100);}};setTimeout(m,100);};this.getFacebookList=function(){return j;};this.update=function(){j.update();};this.getValues=function(){j.update();return $F(f);};};EzRez.UI.DOMCache=function(k){var m=Object.extend({rootNode:"",nodes:{}},k);var f=$H();var j=false;var o=false;var h=null;var n=[];var g=this;var c=function(r,q){f.set(r,{name:r,selector:q});};var l=function(){$H(m.nodes).each(function(q){c(q.key,q.value);});};var p=function(q){try{var t=Object.isElement(q.selector)?q.selector:q.selector(h);if(!t){n.push(q.name);j=false;}q.elm=t;g[q.name]=q.elm;}catch(r){n.push(q.name);j=false;}return q;};var e=function(){try{h=Object.isElement(m.rootNode)?m.rootNode:$$(m.rootNode).first();g.rootNode=h;j=Object.isElement(h);f.each(function(r){p(r.value);});o=j;return j;}catch(q){n.push("rootNode: "+m.rootNode);j=false;return false;}};this.rootNode=h;this.add=function(r,q){c(r,q);};this.get=function(q){return f.get(q).elm;};this.refresh=function(q){var r=f.get(q);p(r);return r.elm;};this.cache=function(){return e();};this.isCached=function(){return o;};this.clearAll=function(){h=null;f.each(function(q){q.value.elm=null;});};this.isValidHtml=function(){return j;};this.getInvalidNodes=function(){return n;};this.setRootNode=function(q){m.rootNode=q;e();};l();};(function(){var g=["af-ZA","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-YE","az-Cyrl-AZ","az-Latn-AZ","be-BY","bg-BG","bs-Latn-BA","ca-ES","cs-CZ","cy-GB","da-DK","de-AT","de-CH","de-DE","de-LI","de-LU","dv-MV","el-GR","en-029","en-AU","en-BZ","en-CA","en-GB","en-IE","en-JM","en-NZ","en-PH","en-TT","en-US","en-ZA","en-ZW","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-ES","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-PY","es-SV","es-UY","es-VE","et-EE","eu-ES","fa-IR","fi-FI","fo-FO","fr-BE","fr-CA","fr-CH","fr-FR","fr-LU","fr-MC","gl-ES","gu-IN","he-IL","hi-IN","hr-BA","hr-HR","hu-HU","hy-AM","id-ID","is-IS","it-CH","it-IT","ja-JP","ka-GE","kk-KZ","kn-IN","kok-IN","ko-KR","ky-KG","lt-LT","lv-LV","mi-NZ","mk-MK","mn-MN","mr-IN","ms-BN","ms-MY","mt-MT","nb-NO","nl-BE","nl-NL","nn-NO","ns-ZA","pa-IN","pl-PL","pt-BR","pt-PT","quz-BO","quz-EC","quz-PE","ro-RO","ru-RU","sa-IN","se-FI","se-NO","se-SE","sk-SK","sl-SI","sma-NO","sma-SE","smj-NO","smj-SE","smn-FI","sms-FI","sq-AL","sr-Cyrl-BA","sr-Cyrl-CS","sr-Latn-BA","sr-Latn-CS","sv-FI","sv-SE","sw-KE","syr-SY","ta-IN","te-IN","th-TH","tn-ZA","tr-TR","tt-RU","uk-UA","ur-PK","uz-Cyrl-UZ","uz-Latn-UZ","vi-VN","xh-ZA","zh-CN","zh-HK","zh-MO","zh-SG","zh-TW","zu-ZA"];var k=$H();var e="MM/dd/yyyy";var h="MM/yyyy";var c=EzRez.path+"/ezrez/js/locales/date/";var f=function(){var l=$$(".restrictFlightCalendar").first();if(l){$$("#searchCalendar").first().addClassName("single-calendar");return true;}return false;};var j=function(m,o){try{var l=null;if(m.blank()){return false;}if(o){l=Date.parseExact(m,o.replace(/m/g,"M"));}else{l=Date.parse(m);}return(l);}catch(n){return false;}};EzRez.UI.Calendar=function(t){var v=Object.extend({name:"CalendarFormInput",dateFormat:"MM/dd/yy",pages:2,advanceOnSelect:true,locale:"",localeDateFormats:new EzRez.WebApi.LocaleDateFormats({}),minDate:null,maxDate:null},t);var L;var A=false;var l={container:null};var C="";var F=[];var O=false;var R=document.viewport.getWidth();var p=-1;if(Object.isString(v.minDate)){v.minDate=Date.parse(v.minDate);}if(Object.isString(v.maxDate)){v.maxDate=Date.parse(v.maxDate);}var m=function(U){return EzRez.StringUtil.isSet(U)?U.replace(/m/g,"M"):v.dateFormat;};var D=function(U,W){try{if(Object.isString(U)){if(W){U=Date.parseExact(U,W);}else{U=Date.parse(U);}}else{if(Object.isArray(U)){U=Date.parse(U[1]+"/"+U[2]+"/"+U[0]);}}}catch(V){U=null;}return U;};var I=function(V){var U=D(V,v.dateFormat);if(!U){return V;}return U.toString(e);};var H=function(V){var U=D(V,v.dateFormat);if(!U){return V;}return U.toString(v.dateFormat);};var T=function(V,W,X){V=D(V,v.dateFormat);W=D(W,v.dateFormat);X=D(X,v.dateFormat);var U=[V,W,X].compact().first();if(!V){return U;}if(!W&&!X){return V;}if(X&&!W){return V.isBefore(X)?V:X;}if(W&&!X){return V.isAfter(W)?V:W;}if(V.between(W,X)){return V;}if(V.isAfter(X)){return X;}if(V.isBefore(W)){return W;}};var w=function(U,V){L.cfg.setProperty(U,V,false);};var o=function(U){return L.cfg.getProperty(U);};var N=function(U){U=U.replace("_","-");if(!g.include(U)){U="en-US";}v.locale=U;var W=c+U+".js";var V=YAHOO.util.Get.script(W,{onSuccess:function(){var X=EzRez.Util.Locales.get(U);if(!X||X.name!==U){return;}w("MONTHS_SHORT",X.abbreviatedMonthNames);w("MONTHS_LONG",X.monthNames);w("WEEKDAYS_1CHAR",X.firstLetterDayNames);w("WEEKDAYS_SHORT",X.shortestDayNames);w("WEEKDAYS_MEDIUM",X.abbreviatedDayNames);w("WEEKDAYS_LONG",X.dayNames);w("START_WEEKDAY",X.firstDayOfWeek);L.render();}});};var z=function(){v.dateFormat=m(v.dateFormat);l.container=$(v.name);if(f()){L=new YAHOO.widget.Calendar(v.name,{pages:v.pages});}else{L=new YAHOO.widget.CalendarGroup(v.name,{pages:v.pages});}w("hide_blank_weeks",true);if(v.minDate){w("mindate",v.minDate);}if(v.maxDate){w("maxdate",v.maxDate);}w("MONTHS_SHORT",v.localeDateFormats.monthsShort);w("MONTHS_LONG",v.localeDateFormats.monthsLong);w("WEEKDAYS_1CHAR",v.localeDateFormats.weekDays1Char);w("WEEKDAYS_SHORT",v.localeDateFormats.weekDays2Char);w("WEEKDAYS_MEDIUM",v.localeDateFormats.weekDaysShort);w("WEEKDAYS_LONG",v.localeDateFormats.weekDaysLong);w("START_WEEKDAY",v.localeDateFormats.firstDayOfWeek-1);if(EzRez.StringUtil.isSet(v.locale)){N(v.locale);}if(typeof v.navigator!=="undefined"){w("navigator",v.navigator);}A=true;};var y=function(U){C=U;};var P=function(U){F=U;};var x=function(U,V){if(!L[U]){return;}L[U].subscribe(V,this,true);};var G=function(U,V){if(!L[U]){return;}L[U].unsubscribe(V,this,true);};var n=function(U){if(!f()){var V=L.getCalendarPage(T(U));if(V){return true;}}return false;};var Q=function(U){try{if(U.getHours()===23){U.setTime(U.getTime()+(60*60*1000));}}catch(V){U=null;}return U;};var K=function(U){if(Object.isString(U)&&U.include(",")){var W=U.split(",").map(function(X){X=T(X,o("mindate"),o("maxdate"));if(X){X=X.toString(e);}return X;}).compact();if(v.advanceOnSelect||!n(W.first())){w("pagedate",W.first());}w("selected",W.join(","));return;}U=D(U,v.dateFormat);U=Q(U);if(!U){w("selected",[]);}if(v.advanceOnSelect){var V=o("mindate");if(!U&&V){w("pagedate",V);return;}if(!U&&!V){w("pagedate",new Date());return;}}if(!U){U=new Date();}U=T(U,o("mindate"),o("maxdate"));w("selected",I(U));if(v.advanceOnSelect||!n(U)){w("pagedate",U);}};var E=function(){var U=L.getSelectedDates();return U.map(function(V){V=Q(V);return H(V);}).join(",");};var r=function(){L.removeRenderers();L.addRenderer(C,L.renderOutOfBoundsDate);F.each(function(U){L.addWeekdayRenderer(U,L.renderOutOfBoundsDate);});};var q=function(){r();L.render();L.show();O=true;};var B=function(){L.hide();O=false;};var S=function(W,U){var Y=Object.extend(W.cumulativeOffset(),W.getDimensions());var V={right:{top:Y.top+"px",left:Y.left+Y.width+"px"},bottom:{top:Y.top+Y.height+"px",left:Y.left+"px"},fixed:{}};var X=V[U];if(!X){X=V.right;}l.container.setStyle(X);q();};var J=function(){R=document.viewport.getWidth();};var M=function(){var U=l.container.cumulativeOffset();if(p<0){p=l.container.getDimensions();}var V=(U.left+p.width)-R;if(V>0){var W=(U.left-V)+"px";l.container.setStyle({left:W});}};this.shiftCalendarIntoViewPort=function(){M();};this.show=function(){q();};this.hide=function(){B();};this.position=function(V,U){S(V,U);};this.setBlackoutDates=function(U){y(U);};this.setBlackoutDaysOfTheWeek=function(U){return P(U);};this.setLocale=function(U){N(U);};this.setProperty=function(V,W,U){w(V,W,U);};this.setEvent=function(U,V){x(U,V);};this.getProperty=function(U){return o(U);};this.removeEvent=function(U,V){G(U,V);};this.observe=function(U,V){x(U,V);};this.stopObserving=function(U,V){G(U,V);};this.setSelectedDate=function(U){K(U);};this.getSelectedDates=function(){return E();};this.getValidDate=function(U){return T(U,v.minDate,v.maxDate);};this.setDateFormat=function(U){v.dateFormat=m(U);};this.getYuiCalendar=function(){return L;};this.getConfig=function(){return v;};this.getElements=function(){return l;};this.getContainerId=function(){return L.containerId;};this.setMinDate=function(U){if(Object.isString(U)){U=Date.parse(U);}v.minDate=U;w("mindate",v.minDate);L.render();};this.getMinDate=function(){return o("mindate");};this.setMaxDate=function(U){if(Object.isString(U)){U=Date.parse(U);}v.maxDate=U;w("maxdate",v.maxDate);L.render();};this.getMaxDate=function(){return o("maxdate");};z();Event.observe(window,"resize",J);if(f()){function u(){var W=$$(".search-form input[name=area1]").first();var U=$$(".search-form input[name=area2]").first();var V=$$(".search-form .date1").first();var Y=$$(".search-form .date2").first();function Z(){var aa=$$("#searchCalendar .yui-calendar").first();aa.insert({before:"<div class='dates-loading'></div>"});}function X(ab,ac){Z();if(W.value!==""&&U.value!==""){if(ab.value.length>3){departureLocationValue=ab.value.split(":")[1];}else{departureLocationValue=ab.value;}if(ac.value.length>3){arrivalLocationValue=ac.value.split(":")[1];}else{arrivalLocationValue=ac.value;}function aa(){var ad=$$(".dates-loading");for(i=0;i<ad.length;i++){ad[i].remove();}}new Ajax.Request("/apps/api/airAvailableSchedule/",{parameters:{CSRF_TOKEN:EzRez.Application.WebContext.csrfToken,departureLocation:departureLocationValue,arrivalLocation:arrivalLocationValue},onSuccess:function(ah){C="";var aj=[];var ag=ah.responseJSON.data.dates;for(i=0;i<ag.length;i++){var an=ag[i].split("-")[0];var am=ag[i].split("-")[1];var ao=ag[i].split("-")[2];var ai=am+"/"+ao+"/"+an;aj.push(ai);}var ak=new Date();var ae=new Date().addMonths(11);var al=[ak];while(ak<=ae){var af=ak.getDate();var ad=new Date(ak.setDate(++af));al.push(ak.toString("MM/dd/yyyy"));}filteredDates=al.filter(function(ap){return aj.indexOf(ap)===-1;});C=filteredDates.toString();},onFailure:function(){aa();throw new EzRez.Util.Exception({message:"Air Available Schedule is not available at this moment",remoteLog:true});},onComplete:function(){q();aa();}});}}V.observe("click",function(){X(W,U);});Y.observe("click",function(){X(U,W);});}u();}};EzRez.UI.CalendarFormInput=function(q){EzRez.UI.Calendar.apply(this,arguments);var D={show:this.show,setSelectedDate:this.setSelectedDate,getSelectedDates:this.getSelectedDates,position:this.position,setProperty:this.setProperty,getProperty:this.getProperty,getValidDate:this.getValidDate,positionWithinViewport:this.shiftCalendarIntoViewPort,getElements:this.getElements};var G=Object.extend({inputs:[],position:"right",disableInputMinDate:false},q);var t=this.getConfig();t.inputs=G.inputs;t.position=G.position;var B=this.getYuiCalendar();var m;var y=[];var A=[];var r={};var C=false;var H;var w=false;var v=function(){y=[];t.inputs.uniq().each(function(I){var J=$$(I).first();if(!J){return;}y.push(J);A.push(J.identify());});w=true;};var p=function(P){function K(R){if(R.hasClassName("partialRoomStayStartDate")){return y[A.indexOf("date1")];}else{if(R.hasClassName("partialRoomStayEndDate")){return y[A.indexOf("date3")];}}return null;}function Q(R){var T=R.identify(),W=r[T];if(W){return W;}W=K(R);if(W){r[T]=W;return W;}var V=T.match(/\d+/);if(V){var U=parseInt(V.first(),10)-1;var S=A.indexOf("date"+U);if(S>=0){r[T]=y[S];return r[T];}}return null;}m=P;var J=m.identify();var L=A.indexOf(J);var I=Q(m);B.deselectAll();D.setProperty("mindate",null);D.setProperty("maxdate",null);var O=y[A.indexOf("date2")];if((m.hasClassName("partialRoomStayStartDate")||m.hasClassName("partialRoomStayEndDate"))&&O){var M=O.getValue();if(j(M,t.dateFormat)){D.setProperty("maxdate",D.getValidDate(M));}}if(I&&L>=0&&!t.disableInputMinDate){var N=I.getValue();if(j(N,t.dateFormat)){D.setProperty("mindate",D.getValidDate(N));}}if(D.getProperty("mindate")===null&&t.minDate){D.setProperty("mindate",t.minDate);}if(D.getProperty("maxdate")===null&&t.maxDate){D.setProperty("maxdate",t.maxDate);}D.setSelectedDate(m.getValue());D.position(m,t.position);D.positionWithinViewport();if(!C){document.observe("click",H);$$(".link-close").first().observe("click",x);m.fire("ezrez:showCalendar");}C=true;};var x=function(){B.hide();m.fire("ezrez:hideCalendar");m.focus();};var o=function(I){if(!I){throw new EzRez.Util.Exception({message:"Missing input for EzRez.UI.CalendarFormInput."});}I.setValue(D.getSelectedDates());};var z=function(J){if(!w){t.inputs.push(J);return;}if(A.include(J)){return;}var I=$(J);if(!I){return;}y.push(I);A.push(J);I.observe("click",E);};var n=function(J){if(!J){return;}var I=J.identify();if(!w){t.inputs.push(I);return;}if(A.include(I)){return;}y.push(J);A.push(I);J.observe("click",E);};var F=function(){y.each(function(I){I.stopObserving("click",E);});y=[];A=[];};H=function(I){console.info("_documentClickListener");var J=$(I.target);if(y.include(J)){return;}if(J.descendantOf(D.getElements().container)){return;}x();};var l=function(){o(m);x();};var u=function(){C=false;document.stopObserving("click",H);console.info("_hideCalendar");};var E=function(I){var J=$(I.target);p(J);};this.show=function(I){if(!Object.isElement(I)){I=$(I);}p(I);};this.addInput=function(I){z(I);};this.addInputElement=function(I){n(I);};this.clearInputs=function(){F();};this.setPosition=function(I){t.position=I;};this.positionWithinViewport=function(){t.shiftCalendarIntoViewPort();};this.applyListeners=function(){y.each(function(I){I.observe("click",E);});B.selectEvent.subscribe(l,this,true);B.hideEvent.subscribe(u,this,true);};this.removeListeners=function(){y.each(function(I){I.stopObserving("click",E);});};v();};EzRez.UI.Calendar.getLocales=function(l){var m=0;g.each(function(p){var o=c+p+".js";var n=YAHOO.util.Get.script(o,{onSuccess:function(){var q=EzRez.Util.Locales.get(p);if(!q||q.name!==p){m++;}else{k.set(p,q);}if(k.size()===g.length-m){l(k);}}});});};EzRez.UI.InputValidationRule=function(l){var m=Object.extend({id:"",inputSelector:"",inputName:"",inputType:"input",event:"submit",translation:"",validator:function(n,p,o){return false;}},l);this.id=EzRez.StringUtil.isSet(m.id)?m.id:m.inputName+"-"+m.event;this.inputSelector=EzRez.StringUtil.isSet(m.inputSelector)?m.inputSelector:m.inputType+'[name="#{inputName}"]'.interpolate(m);this.inputName=m.inputName;this.event=m.event;this.validator=m.validator;this.listenersApplied=false;this.translation=m.translation;};EzRez.UI.DataValidationRule=function(l){var m=Object.extend({name:"",validator:function(n){return false;}},l);this.name=m.name;this.validator=m.validator;};EzRez.UI.InputValidatorService=function(r){var t=Object.extend({rootNode:""},r);var m=$H();var p=$H();var o=Object.isElement(t.rootNode)?t.rootNode:$$(t.rootNode).first();function u(){var v=$$(t.rootNode).first();o=v?v:document.body;}u();function q(v){return o.select(v);}function n(){return Form.serializeElements(o.select("input","select","textarea"),true);}function l(w,v){return function(z){var A=w.validator(v,z,n);p.set(w.inputName,A);var x=A?"ez:inputValidationSuccess":"ez:inputValidationFailure";var B=v.disabled?o:v;var y={inputValidated:v,inputName:w.inputName,rule:w,translation:w.translation};Event.fire(B,x,y);};}this.addRule=function(v){m.set(v.id,v);};this.removeRule=function(v){m.unset(v);};this.applyRuleListeners=function(){m.each(function(v){var w=v.value;if(w.event==="submit"||w.event==="ez:submit"||w.listenersApplied){return;}q(w.inputSelector).each(function(x){Event.observe(x,w.event,l(w,x));});w.listenersApplied=true;});};this.submitListener=function(v){m.each(function(w){var x=w.value;if(x.event!=="submit"&&x.event!=="ez:submit"){return;}q(x.inputSelector).each(function(y){l(x,y)(v);});});};this.isValid=function(){return p.all(function(v){return v.value;});};this.isInputValid=function(w){var v=p.get(w);return v===null||v===undefined||v;};this.clearResults=function(){p=$H();};this.clearInputResults=function(v){p.unset(v);};};EzRez.UI.FormValidator=function(q){var r=Object.extend({formName:""},q);var t;var l=[];var n=[];var o=function(){t=$(document.body).down('form[name="'+r.formName+'"]');};var p=function(){n.each(function(x){x.inputs.each(function(y){y.removeClassName("invalid");});});n=[];};var v=function(x){var y=[];p();l.each(function(A){A.inputs=A.inputNames.collect(function(B){return x[B];});var z=A.validator(A.inputs);if(!z){z=A.onFailure(A,n);}else{z=A.onSuccess();}y.push(z);});return y.compact().all();};var u=function(x){var B=true;p();var z=$(x.target);var A=Event.findElement(x,"form");var y=z.readAttribute("name");l.each(function(D){if(D.event==="blur"&&D.inputNames.include(y)){D.inputs=D.inputNames.collect(function(E){return A[E];});var C=D.validator(D.inputs);if(!C){C=D.onFailure(D,n);}else{C=D.onSuccess();}B=C;}});if(!B){w();}};var w=function(){if(!n.first()||!n.first().message){return;}alert(n.first().message);try{n.first().inputs.first().focus();}catch(x){}};var m=function(x){var y=$(x.target);if(!v(y)){Event.stop(x);w();}};this.getResults=function(){return n;};this.highLightInvalidFields=function(x){n.each(function(y){y.inputs.each(function(z){z.addClassName("invalid");});});};this.validate=function(){if(!v(t)){w();return false;}return true;};this.validateAndSubmit=function(){if(!v(t)){w();return;}t.submit();};this.addRule=function(x){var y=Object.extend({inputNames:[],message:"",event:"submit",validator:function(z){},onFailure:function(A,z){z.push({inputs:A.inputs,message:A.message});return false;},onSuccess:function(){return true;}},x);l.push(y);};this.applyListeners=function(){t.observe("submit",m);t.observe("ez:submit",m);t.select("input").each(function(x){if(x.type=="checkbox"){x.observe("click",u);}else{if(x.type=="button"){x.observe("click",u);}else{x.observe("blur",u);}}});t.select("select").each(function(x){x.observe("blur",u);});};o();};EzRez.UI.FormValidator.Validators={};EzRez.UI.FormValidator.Validators.hasValue=function(l){var m=l.collect(function(n){var o=n.getValue();if(o==null||o.blank()){return false;}else{return true;}});return m.compact().all();};EzRez.UI.FormValidator.Validators.isValidDOBPullDownsYMD=function(l){if(!EzRez.UI.FormValidator.Validators.hasValue(l)){return false;}var q=l[0].value;var n=l[1].value;var p=l[2].value;var m=new Date();var o=new Date(m.getTime());o.setFullYear(q,n-1,p);return(o<m);};})();EzRez.UI.FormErrors=new function(){var c=$H();this.addError=function(e,f){c.set(e,f);};this.removeError=function(e){c.unset(e);};this.hasErrors=function(){return c.size()>0;};this.hasErrorKey=function(e){return c.get(e)!=null;};this.clearAll=function(){c=$H();};this.submitFormIfNoErrors=function(e){if(c.size()==0){$(e).submit();}c.keys().each(function(f){if(f=="checkbox"){f="malibu_error";}new Effect.Highlight(f,{duration:0.75});});};};EzRez.UI.redirect=function(c){var f=Object.extend({url:"",method:"get",parameters:{}},c);if(f.url.indexOf("?")>0){f.parameters=Object.extend(f.url.toQueryParams(),f.parameters);f.url=f.url.slice(0,f.url.indexOf("?"));}var e=new Element("form",{action:f.url,method:f.method});$H(f.parameters).each(function(h){var g=new Element("input",{type:"hidden",name:h.key,value:h.value});e.appendChild(g);});document.body.appendChild(e);e.submit();};EzRez.UI.AutoComplete=function(c){var g=Object.extend({autoCompleteLabeledInput:null,additionalParams:{}},c);var j;function f(){j=h();}function k(l){var m=new YAHOO.util.XHRDataSource(l);m.responseType=YAHOO.util.XHRDataSource.TYPE_JSON;m.maxCacheEntries=50;m.responseSchema={resultsList:"autoCompleteResults",fields:[{key:"display"},{key:"value"},{key:"prefix"}]};return m;}function h(){var v=g.autoCompleteLabeledInput.down("input.autoCompleteDisplayInput");var p=g.autoCompleteLabeledInput.down("input.autoCompleteValueInput");var r=g.autoCompleteLabeledInput.down(".autoCompleteResultsContainer");var n=g.autoCompleteLabeledInput.down("input.autoCompleteUrl").getValue();var o=g.autoCompleteLabeledInput.down("input.autoCompleteFilter");var w=g.autoCompleteLabeledInput.down("input.autoCompleteSearchContext");var q=g.autoCompleteLabeledInput.down("input.autoCompleteMaxResults").getValue();var u=g.autoCompleteLabeledInput.down("input.autoCompleteMinQueryLength").getValue();var m=g.autoCompleteLabeledInput.down("input.autoCompleteForceSelection").getValue();var l=k(n);var t=new YAHOO.widget.AutoComplete(v,r,l);t.animHoriz=true;t.animSpeed=0.15;t.queryDelay=0.05;t.maxResultsDisplayed=parseInt(q);t.minQueryLength=parseInt(u);t.useIFrame=true;t.useShadow=true;t.queryMatchContains=true;t.forceSelection=m;t.resultTypeList=false;t.itemSelectEvent.subscribe(e);t.formatResult=function(B,C,A){var y=B.value.toUpperCase().search("AIRPORT")>0;var z=y?'<img src="/images/icons/air_sm.gif" width="15px" height="12px">':"";return z+A;};t.dataRequestEvent.subscribe(function(){r.setStyle({width:g.autoCompleteLabeledInput.getWidth()+"px"});$(document.body).down(".autoCompleteResultsBox").appendChild(r);});t.containerCollapseEvent.subscribe(function(){g.autoCompleteLabeledInput.appendChild(r);t._bOverContainer=false;});t.generateRequest=function(B){var y=$$(".autoCompleteValueInput[name^='area']");if(y){for(var z=0;z<y.length;z++){if(y[z].value!==""){g.additionalParams[y[z].name]=y[z].value;}}}var A=Object.extend(g.additionalParams,{query:B,filter:o.getValue(),searchContext:w.getValue(),inputName:p.name});return"?"+Object.toQueryString(A);};t.setAdditionalParams=function(y){g.additionalParams=Object.extend(g.additionalParams,y);};t.doBeforeLoadData=function(A,y,z){a.publish("AutoComplete/beforeLoadData",[t,A,y,z]);if(decodeURIComponent(A)!==this.getInputEl().value){return false;}return true;};var x=navigator.userAgent||navigator.vendor||window.opera;if((/iPad|iPhone|iPod/.test(x)&&!window.MSStream)||/android/i.test(x)){Event.observe(v,"input",function(y){t.sendQuery(this.value);});}return t;}function e(t,r,p){var m=new EzRez.WebApi.AutoCompleteResult(r[2]),l=g.autoCompleteLabeledInput.down("input.autoCompleteValueInput"),o=m.value,n=m.prefix;l.value=o;if(o&&n){var q="/travel/plugins/ajax_locations/record_location_prefix.cfm";new Ajax.Request(q,{parameters:{location:o,prefix:m.prefix}});}}this.getAutoComplete=function(){return j;};this.destroy=function(){if(j){j.destroy();}};f();};YAHOO.widget.AutoComplete.prototype.doBeforeLoadData=function(f,c,e){if(decodeURIComponent(f)!==this.getInputEl().value){return false;}return true;};EzRez.UI.AutoCompleteFactory=function(){var c=$H();function e(f){var g=new EzRez.UI.AutoComplete({autoCompleteLabeledInput:f});c.set(f.identify(),g);return g;}this.create=e;this.get=function(f){return c.get(f.identify());};this.createAll=function(){c.each(function(f){f.value.destroy();});c=$H();$$(".autoCompleteLabeledInput").each(function(f){e(f);});};this.adjustSearchResultsWidth=function(m,j,l,k){var h="";k.each(function(n){if(n.display.length>h.length){h=n.display;}});var f=new Element("div").update(h);f.setStyle({position:"absolute",visibility:"hidden",width:"auto"});document.body.appendChild(f);var g=f.clientWidth+10;j.setStyle({width:Math.max(175,g)+"px"});f.remove();return true;};};EzRez.UI.Toggle=function(q){var j;var r;var k;var h=this;f(q);function f(t){j=t.up(".toggleContainer");k=j.select(".toggleContent");r=j.down("a.toggle");}function c(){r.removeClassName("openToggle");j.removeClassName("openToggleContainer");k.forEach(function(t){t.removeClassName("openToggleContent");});r.fire("ez:toggleClosed",{toggle:h});l();}function g(){r.addClassName("openToggle");j.addClassName("openToggleContainer");k.forEach(function(t){t.addClassName("openToggleContent");});r.fire("ez:toggleOpened",{toggle:h});l();}function o(){return r.hasClassName("openToggle");}function m(){return r.hasAttribute("data-recordname");}function p(){return r.readAttribute("data-recordname")+"_toggle";}function l(){if(m()){EzRez.Application.Cookie.create(p(),o());}}function n(){if(m()){if(EzRez.Application.Cookie.read(p())==="true"){g();}else{c();}}}function e(){if(o()){c();}else{g();}}this.container=j;this.anchor=r;this.content=k.first();this.isOpen=o;this.open=g;this.close=c;this.flip=e;this.restoreStatusFromCookie=n;this.equals=function(t){return t!==null&&t!==undefined&&j==t.container&&r==t.anchor&&k.first()==t.content;};};EzRez.UI.MapProvider={BING:0,GOOGLE:1};EzRez.UI.MapFactory=new function(){var h={mapProvider:null};var e;function c(k){return new EzRez.UI.BingMap(Object.extend({apiKey:e},k));}function g(k){return new EzRez.UI.GMap(Object.extend({apiKey:e},k));}function j(k){return new EzRez.UI.BingStaticMap(Object.extend({apiKey:e},k));}function f(k){return new EzRez.UI.GoogleStaticMap(Object.extend({apiKey:e},k));}this.createMap=function(k){try{switch(h.mapProvider){case EzRez.UI.MapProvider.BING:return c(k);case EzRez.UI.MapProvider.GOOGLE:return g(k);default:throw new EzRez.Util.Exception({message:"Unsupported EzRez.UI.MapProvider."});}}catch(l){throw new EzRez.Util.Exception({message:"Cannot create map."},l);}};this.createStaticMap=function(k){try{switch(h.mapProvider){case EzRez.UI.MapProvider.BING:return j(k);case EzRez.UI.MapProvider.GOOGLE:return f(k);default:throw new EzRez.Util.Exception({message:"Unsupported EzRez.UI.MapProvider."});}}catch(l){throw new EzRez.Util.Exception({message:"Cannot create map."},l);}};this.setMapProvider=function(k){h.mapProvider=k;};this.getMapProvider=function(){return h.mapProvider;};this.isCompatible=function(){switch(h.mapProvider){case EzRez.UI.MapProvider.BING:return EzRez.UI.BingMap.isCompatible();case EzRez.UI.MapProvider.GOOGLE:return EzRez.UI.GMap.isCompatible();default:return false;}};this.unload=function(){switch(h.mapProvider){case EzRez.UI.MapProvider.BING:EzRez.UI.BingMap.unload();break;case EzRez.UI.MapProvider.GOOGLE:EzRez.UI.GMap.unload();break;default:break;}};this.setMapApiKey=function(k){e=k;};this.getMapApiKey=function(){return e;};};EzRez.UI.MapHotelData=new function(){var c=[];this.add=function(e){e=Object.extend({label:"",hotel:{},infoWindowHtml:""},e);if(!(e.hotel instanceof EzRez.WebApi.Hotel)){e.hotel=new EzRez.WebApi.Hotel(e.hotel);}c.push(e);};this.clear=function(){c=[];};this.getList=function(){return c;};};EzRez.UI.TripAdvisorData=new function(){var c=[];this.add=function(e){e=Object.extend({hotelId:"",numTripAdvisorReviews:""},e);c.push(e);};this.clear=function(){c=[];};this.getList=function(){return c;};this.interpolate=function(){var h=this.getList();for(var e=0;e<h.length;e++){var g=h[e];var f=(g.hotelId)?$$(".hotelId"+g.hotelId+" .numTripAdvisorReviews"):$$(".numTripAdvisorReviews");f.invoke("update",g.numTripAdvisorReviews);}};};})(EzRez.Application);if(EzRez===undefined){throw ("ezrez-app.js requires ezrez.js");}if(EzRez.Util===undefined){throw ("ezrez-app.js requires ezrez-util.js");}if(EzRez.UI===undefined){throw ("ezrez-app.js requires ezrez-ui.js");}EzRez.App={};EzRez.App.Messenger=new function(){var b=$H();this.begin=function(f,c){var e=$H({onEnd:null,keep:false}).merge(c).toObject();EzRez.Util.Profiler.start("Message "+f+".");b.set(f,{data:new Array(),ended:false,onEnd:e.onEnd,keep:e.keep});};this.write=function(c,e){var f=b.get(c);if(f===undefined){return;}if(f.ended){return;}f.data.push(e);b.set(c,f);};var a=function(e,c){var f=b.get(e);if(c===undefined){c=false;}if(f===undefined){return;}if(!f.ended){return;}if(!c&&!f.keep){b.unset(e);}return f.data;};this.read=function(e,c){return a(e,c);};this.end=function(c){var f=b.get(c);f.ended=true;if(f.onEnd!=null){var e=a(c,f.keep);f.onEnd(e);}EzRez.Util.Profiler.stop("Message "+c+".");};};EzRez.App.Page=function(g){var c=$H({create:function(){},loading:function(){},complete:function(){},validate:function(){return true;},error:function(){},exception:function(){},parent:null}).merge(g).toObject();var f=c.parent;var k=c.create;var b=c.loading;var e=c.complete;var h=c.validate;var j=c.error;var a=c.exception;this.create=function(){return k;};this.loading=function(){return b;};this.complete=function(){return e;};this.validate=function(){return h;};this.error=function(){return j;};this.exception=function(){return a;};this.updater=function(m,o,n){var l=$H({asynchronous:true,evalScripts:true,method:"get",parameters:null}).merge(n).toObject();new Ajax.Updater(m,o,{asynchronous:l.asynchronous,evalScripts:l.evalScripts,method:l.method,parameters:l.parameters,onCreate:function(p){k(p);if(f!=null){f.loading(p);}},onLoading:function(p){b(p);if(f!=null){f.loading(p);}},onComplete:function(p){e(p);if(f!=null){f.complete(p);f.applyPageBehaviors();}},onError:function(p){j(p);if(f!=null){f.error(p);}},onException:function(q,p){a(q,p);if(f!=null){f.exception(q,p);}}});};};(function(){var a;EzRez.App.Widget=function(b){var c=$H({loading:function(){},complete:function(){},error:function(){},exception:function(){}}).merge(b).toObject();a=$H();this.loading=c.loading;this.complete=c.complete;this.error=c.error;this.exception=c.exception;};EzRez.App.Widget.prototype={updateElementID:null,complete:null,loading:null,error:null,createPage:function(c,b){b.parent=this;var e=new EzRez.App.Page(b);a.set(c,e);},getPage:function(b){return a.get(b);},getPages:function(){return a;},onPageComplete:function(b){a.get(b).complete()();},updatePage:function(b,e,c){a.get(b).updater(this.updateElementID,e,c);},applyPageBehaviors:function(){a.each(function(g){var b=g.key;var e=g.value;var f="a.GoTo_"+b.strip();var c="form.GoTo_"+b.strip();$$(f).each(function(h){e.action_elm=h;h.observe("click",function(j){if(!e.validate()()){Event.stop(j);return false;}e.updater(this.updateElementID,h.href);Event.stop(j);return false;}.bindAsEventListener(this));}.bind(this));$$(c).each(function(h){e.action_elm=h;h.observe("submit",function(j){if(!e.validate()()){Event.stop(j);return false;}e.updater(this.updateElementID,h.action,{method:h.method,parameters:h.serialize()});Event.stop(j);return false;}.bindAsEventListener(this));}.bind(this));}.bind(this));}};})();EzRez.App.DOMController=function(e){var a=$H(e);var j=$H();var b=this;var g=0;var c=null;var k=function(q){var o=q.split(",");var n=o[0];var p=o[1];if(Object.isString(n)){n=n.strip();}if(Object.isString(p)){p=p.strip();}return{selector:n,event:p};};var f=function(n,o){return n+"_"+o;};var m=function(n,p,t){if(n==="before"||n=="after"){return;}var r;var o=f(n,p);var q=j.get(o);if(!q){q=function(u){var v=p+": "+n;var w=EzRez.Util.Profiler.start(v);var x=t(u,b);w.stop();return x;};j.set(o,q);}if(n==="window"){Event.observe(window,p,q);return;}if(n==="document"){document.observe(p,q);return;}r=(c===null)?$$(n):c.select(n);r.each(function(u){u.observe(p,q);});};var l=function(n,p){if(n==="before"||n=="after"){return;}var o;var r;var q;if(n==="window"){o=f(n,p);r=j.get(o);Event.stopObserving(window,p,r);return;}if(n==="document"){o=f(n,p);r=j.get(o);document.stopObserving(p,r);return;}q=(c===null)?$$(n):c.select(n);q.each(function(v){var t=f(n,p);var u=j.get(t);v.stopObserving(p,u);});};var h=function(){j=null;a=null;};this.unload=function(){h();};this.setActions=function(n){a=$H(n);this.applyActions();};this.addAction=function(o,n){a.set(o,n);};this.applyAction=function(q,o){c=($(o))?$(o):null;var n=k(q);var p=a.get(q);if(p===undefined){return;}m(n.selector,n.event,p);};this.applyActions=function(n){c=($(n))?$(n):null;EzRez.Util.Profiler.start("ApplyListeners  "+g);var o=a.get("before");var q=a.get("after");EzRez.Util.Profiler.start("    ApplyListeners  "+g+" Before");if(o!=undefined){try{o(b);}catch(p){new EzRez.Util.Exception({message:"Error applyActions for "+name+" DOMController"},p);}}EzRez.Util.Profiler.stop("    ApplyListeners  "+g+" Before");EzRez.Util.Profiler.start("    ApplyListeners  "+g+" Each");a.each(function(t){try{var r=k(t.key);EzRez.Util.Profiler.start("        ApplyListeners  "+g+" "+t.key);m(r.selector,r.event,t.value);EzRez.Util.Profiler.stop("        ApplyListeners  "+g+" "+t.key);}catch(u){new EzRez.Util.Exception({message:"Error applyActions for "+name+" DOMController"},u);}});EzRez.Util.Profiler.stop("    ApplyListeners  "+g+" Each");EzRez.Util.Profiler.start("    ApplyListeners  "+g+" After");if(q!=undefined){try{q(b);}catch(p){new EzRez.Util.Exception({message:"Error applyActions for "+name+" DOMController"},p);}}EzRez.Util.Profiler.stop("    ApplyListeners  "+g+" After");EzRez.Util.Profiler.stop("ApplyListeners  "+g);g++;};this.removeAction=function(q,o){c=($(o))?$(o):null;var p=a.get(q);var n=k(q);if(p===undefined){return;}l(n.selector,n.event,p);};this.removeActions=function(n){c=($(n))?$(n):null;a.each(function(p){var o=k(p.key);l(o.selector,o.event,p.value);});};this.getAction=function(n){return a.get(n);};this.extend=function(n){var o=new EzRez.App.DOMController(a.merge(n));o.uber=function(p){return a.get(p);};return o;};this.uber=function(n){return a.get(n);};this.get=function(){return this;};Event.observe(window,"unload",h);};EzRez.App.UIComponent=function(a){var c=$H({initialize:function(){},applyListeners:function(){},removeListeners:function(){},unload:function(){}}).merge(a).toObject();var b=null;var e=false;var f=false;this.initialize=function(g){if(e){return;}b=c.initialize(g);e=true;};this.applyListeners=function(){if(f){return;}c.applyListeners(b);f=true;};this.removeListeners=function(){if(!f){return;}c.removeListeners(b);f=false;};this.unload=function(){c.unload(b);};this.get=function(){return b;};this.isInitialized=function(){return e;};this.areListenersApplied=function(){return f;};};EzRez.App.Application=function(){var b=$H();var e=$H();var h=[];var a=[];var j=false;var c=false;var k=[];var g=$H();var f=function(l,m){if(m&&!j){h.push(l);}else{l();}};this.createDOMController=function(m,n){var l=new EzRez.App.DOMController(n);b.set(m,l);l.requires=function(o){this.requires(m,o);}.bind(this);return l;};this.createAJAXConroller=function(l,m){};this.createUIComponent=function(m,n){var l=new EzRez.App.UIComponent(n);e.set(m,l);l.requires=function(o){this.requires(m,o);}.bind(this);return l;};this.loadDOMController=function(m,p,o){o=(o===undefined)?true:o;var l=b.get(m);if(!l){return;}var n=function(){var q=EzRez.Util.Profiler.start("Loaded "+m+" DOMController");try{if(k.include(m)){return;}k.push(m);l.applyActions();}catch(r){new EzRez.Util.Exception({message:"Error loading "+m+" DOMController"},r);}q.stop();};f(n,o);};this.loadUIComponent=function(m,p,o){o=(o===undefined)?true:o;var l=e.get(m);if(!l||k.include(m)){return;}var n=function(){var q=EzRez.Util.Profiler.start("Loaded "+m+" UIComponent");try{if(k.include(m)){return;}k.push(m);l.initialize(p);l.applyListeners();}catch(r){new EzRez.Util.Exception({message:"Error loading "+m+" UIComponent"},r);}q.stop();};f(n,o);};this.loadAJAXConroller=function(l,n,m){};this.getUIComponent=function(l){return e.get(l);};this.getDOMController=function(l){return b.get(l);};this.getAJAXConroller=function(l){};this.use=function(m){var l=e.get(m);if(!l){return null;}return l.get();};this.getClientScript=function(l){var n=Object.extend({dsn:null,cobrand:"default",file:null,onSuccess:function(){},onFailure:function(){}},l);var o={};if(!n.dsn||!n.file){return;}var m="/client_assets/imagesw/"+n.dsn+"/"+n.cobrand+"/js/"+n.file+".js"+(this.SysConf.assetVersion?"?"+this.SysConf.assetVersion:"");YAHOO.util.Get.script(m,{onSuccess:function(p){EzRez.Util.Debug.info("Loaded "+m+".");n.onSuccess(p);},onFailure:function(p){EzRez.Util.Debug.error("Failed to load "+m+".");n.onFailure(p);},scope:window});};this.requires=function(l,n){var m=g.get(l);if(m){m=m.concat(n).uniq();g.set(l,m);return;}g.set(l,n);};this.load=function(l,o,n){n=(n===undefined)?true:n;var m=g.get(l);if(m){m.each(function(p){this.load(p,{},n);}.bind(this));}this.loadDOMController(l,o,n);this.loadUIComponent(l,o,n);this.loadAJAXConroller(l,o,n);};this.unload=function(m){k=k.without(m);var l=e.get(m);if(!l){return;}l.unload();};this.domload=function(l){f(l,true);};this.isDOMLoaded=function(){return j;};this.isWindowLoaded=function(){return c;};this.Message=EzRez.App.Messenger;this.Temp=$H();this.Profile=EzRez.Util.Profiler;this.Debug=EzRez.Util.Debug;this.Cookie=EzRez.Util.Cookie;this.Env=EzRez.Util.Env;this.Omniture=EzRez.Util.Omniture;this.WebAnalytics=EzRez.Util.WebAnalytics;this.SysConf=new EzRez.WebApi.SysConf({});this.LocaleDateFormats=new EzRez.WebApi.LocaleDateFormats({});this.WebContext=new EzRez.WebApi.WebContext({});this.TravelerProfile=new EzRez.WebApi.TravelerProfile({});this.RedemptionContract=new EzRez.WebApi.RedemptionContract({});this.Search=new EzRez.WebApi.Search({});this.Availability=new EzRez.WebApi.Availability({});this.Itinerary=new EzRez.WebApi.Itinerary({});this.Booking=new EzRez.WebApi.Booking({});this.Agent=new EzRez.WebApi.Agent({});this.FormErrors=EzRez.UI.FormErrors;document.observe("dom:loaded",function(){EzRez.Util.Profiler.stop("dom:load");j=true;h.each(function(l){l();});EzRez.Util.WebAnalytics.transmitWebBeacons();EzRez.Util.WebAnalytics.GA.trackPageview();EzRez.Util.WebAnalytics.GA.trackTrans();});Event.observe(window,"load",function(l){EzRez.Util.Profiler.stop("window:load");c=true;a.each(function(m){m();});}.bindAsEventListener(this));};if(EzRez===undefined){throw ("ezrez-webapi.js requires ezrez.js");}if(EzRez.Util===undefined){throw ("ezrez-webapi.js requires ezrez-util.js");}if(EzRez.UI===undefined){throw ("ezrez-webapi.js requires ezrez-ui.js");}if(EzRez.App===undefined){throw ("ezrez-webapi.js requires ezrez-app.js");}EzRez.WebApi={};(function(){var b="$Revision: 43474 $".match(/^\$Revision: (\d+) \$$/);var a=1;EzRez.WebApi.revision=b[1];EzRez.WebApi.Base=function(e){var c=Object.extend({objectKey:null},e);this.objectKey=(!c.objectKey)?"localObjectKey"+a++:c.objectKey;};})();EzRez.WebApi.LocationToken=function(a){this.id=a.id;this.type=a.type.toLowerCase();this.searchString=a.searchString;};EzRez.WebApi.LocationMatch=function(a){this.displayValue=a.displayValue;this.searchValue=a.searchValue;this.locationToken=new EzRez.WebApi.LocationToken(a.locationToken);};EzRez.WebApi.FormProcessorResponse=function(b){var a=Object.extend({success:false,errorMessage:"",errorInputName:"",switchflyErrorCode:"",redirectUrl:""},b);this.success=a.success;this.errorMessage=a.errorMessage;this.errorInputName=a.errorInputName;this.switchflyErrorCode=a.switchflyErrorCode;this.redirectUrl=a.redirectUrl;};EzRez.WebApi.FormProcessorHtmlResponse=function(b){var a=Object.extend({html:""},b);EzRez.WebApi.FormProcessorResponse.apply(this,arguments);this.html=a.html;};EzRez.WebApi.AutoCompleteResult=function(b){var a=Object.extend({display:"",value:"",prefix:""},b);this.display=a.display;this.value=a.value;this.prefix=a.prefix;};EzRez.WebApi.AutoCompleteFormResponse=function(b){var a=Object.extend({autoCompleteResults:[]},b);EzRez.WebApi.FormProcessorResponse.apply(this,arguments);this.autoCompleteResults=a.autoCompleteResults.collect(function(c){return new EzRez.WebApi.AutoCompleteResult(c);});};EzRez.WebApi.AirPnrValuesResponse=function(b){var a=Object.extend({recordLocator:"",totalPriceDisplay:"",serviceCharge:0},b);EzRez.WebApi.FormProcessorHtmlResponse.apply(this,arguments);this.recordLocator=a.recordLocator;this.totalPriceDisplay=a.totalPriceDisplay;this.serviceCharge=a.serviceCharge;};EzRez.WebApi.CarProductPolicy=function(b){var a=Object.extend({languageId:0,carProductPolicy:"",carProductId:0},b);this.languageId=a.languageId;this.carProductPolicy=a.carProductPolicy;this.carProductId=a.carProductId;};EzRez.WebApi.ComponentListingResponse=function(b){var a=Object.extend({components:[]},b);this.components=a.components;};EzRez.WebApi.InsuranceRateTranslation=function(b){var a=Object.extend({languageId:0,insuranceRatesTranslationId:0,insuranceRatesId:0,contractSellText:"",contractDescription:"",contractPolicies:""},b);this.languageId=a.languageId;this.insuranceRatesTranslationId=a.insuranceRatesTranslationId;this.insuranceRatesId=a.insuranceRatesId;this.contractSellText=a.contractSellText;this.contractDescription=a.contractDescription;this.contractPolicies=a.contractPolicies;};EzRez.WebApi.TaxTypeLabelTranslation=function(b){var a=Object.extend({language:null,translation:"",taxTypeId:0},b);this.language=a.language;this.translation=a.translation;this.taxTypeId=a.taxTypeId;};EzRez.WebApi.ClientLanguage=function(b){var a=Object.extend({languageId:0,name:"",langCode:""},b);this.languageId=a.languageId;this.name=a.name;this.langCode=a.langCode;};EzRez.WebApi.HotelChoiceModel=function(b){var a=Object.extend({id:0,cobrands:[],enabled:"false",isDefault:"false",hotelChoiceModelFormula:{}},b);this.id=a.id;this.cobrands=a.cobrands;this.enabled=a.enabled;this.isDefault=a.isDefault;this.hotelChoiceModelFormula=new EzRez.WebApi.HotelChoiceModelFormula(a.hotelChoiceModelFormula);};EzRez.WebApi.HotelChoiceModelFormula=function(b){var a=Object.extend({formulaId:0},b);this.id=a.formulaId;};EzRez.WebApi.LoyaltyRiskManagementContractJsonData=function(b){var a=Object.extend({contractName:"",pointsService:"",contractType:"",loyaltyRiskManagementContractId:0,loyaltyRiskManagementRiskLimits:[],loyaltyPaymentPartnerId:0,valid:false,priority:0},b);this.contractName=a.contractName;this.pointsService=a.pointsService;this.contractType=a.contractType;this.loyaltyRiskManagementContractId=a.loyaltyRiskManagementContractId;this.loyaltyRiskManagementRiskLimits=a.loyaltyRiskManagementRiskLimits;this.loyaltyPaymentPartnerId=a.loyaltyPaymentPartnerId;this.valid=a.valid;this.priority=a.priority;};EzRez.WebApi.LoyaltyRiskManagementRiskLimit=function(b){var a=Object.extend({riskLimitPeriod:"",riskLimitType:"",riskLimitValue:"",loyaltyRiskManagementRiskLimitId:0},b);this.riskLimitPeriod=a.riskLimitPeriod;this.riskLimitType=a.riskLimitType;this.riskLimitValue=a.riskLimitValue;this.loyaltyRiskManagementRiskLimitId=a.loyaltyRiskManagementRiskLimitId;};EzRez.WebApi.ModificationComponentRow=function(b){var a=Object.extend({originalComponentHtml:"",modifiedComponentHtml:"",rowId:""},b);this.originalComponentHtml=a.originalComponentHtml;this.modifiedComponentHtml=a.modifiedComponentHtml;this.rowId=a.rowId;};EzRez.WebApi.SupplierRoomTypeRuleResponse=function(b){var a=Object.extend({rowComponentHtml:"",ruleType:"",ruleId:""},b);this.rowComponentHtml=a.rowComponentHtml;this.ruleType=a.ruleType;this.ruleId=a.ruleId;};EzRez.WebApi.SupplierGlobalCancellationPolicyResponse=function(b){var a=Object.extend({rowComponentHtml:"",ruleType:"",ruleId:""},b);this.rowComponentHtml=b.rowComponentHtml;this.ruleId=b.ruleId;};EzRez.WebApi.ModificationWorkspaceResponse=function(b){var a=Object.extend({workspacePriceDetailsHtml:"",formHtml:"",dateInputIds:[],originalFeesHtml:"",workspaceFeesHtml:"",modificationComponentRows:[]},b);EzRez.WebApi.FormProcessorResponse.apply(this,arguments);this.workspacePriceDetailsHtml=a.workspacePriceDetailsHtml;this.formHtml=a.formHtml;this.dateInputIds=a.dateInputIds;this.originalFeesHtml=a.originalFeesHtml;this.workspaceFeesHtml=a.workspaceFeesHtml;this.modificationComponentRows=a.modificationComponentRows;};EzRez.WebApi.AirMixAndMatchResponse=function(b){var a=Object.extend({flightGridDisplayHtml:"",priceDisplayHtml:"",filtersHtml:""},b);EzRez.WebApi.FormProcessorResponse.apply(this,arguments);this.flightGridDisplayHtml=a.flightGridDisplayHtml;this.priceDisplayHtml=a.priceDisplayHtml;this.filtersHtml=a.filtersHtml;this.filteredResult=a.filteredResult;};EzRez.WebApi.ModificationWorkspaceAction={ADJUST_COST:"ADJUST_COST",CANCEL_COMPONENT:"CANCEL_COMPONENT",CANCEL_BOOKING:"CANCEL_BOOKING",RESTORE_BOOKING:"RESTORE_BOOKING",CONTINUE:"CONTINUE",EXIT:"EXIT",GET_AIR_COST_ADJUSTMENT_FORM:"GET_AIR_COST_ADJUSTMENT_FORM",GET_AIR_MODIFY_FORM:"GET_AIR_MODIFY_FORM",GET_ROOM_MODIFY_FORM:"GET_ROOM_MODIFY_FORM",GET_ACTIVITY_MODIFY_FORM:"GET_ACTIVITY_MODIFY_FORM",GET_ROOM_RESTORE_FORM:"GET_ROOM_RESTORE_FORM",GET_ACTIVITY_RESTORE_FORM:"GET_ACTIVITY_RESTORE_FORM",GET_DIVIDE_AIR_PNR_FORM:"GET_DIVIDE_AIR_PNR_FORM",GET_PRICE_SUMMARY_FORM:"GET_PRICE_SUMMARY_FORM",GET_MODIFIED_VIEW_DETAILS:"GET_MODIFIED_VIEW_DETAILS",GET_ORIGINAL_VIEW_DETAILS:"GET_ORIGINAL_VIEW_DETAILS",GET_FEES_SUMMARY:"GET_FEES_SUMMARY",GET_MARKUP_MODIFY_FORM:"GET_MARKUP_MODIFY_FORM",ADJUST_FEES:"ADJUST_FEES",ADJUST_AGENT_MARKUP:"ADJUST_AGENT_MARKUP",MODIFY_AIR_COMPONENT:"MODIFY_AIR_COMPONENT",DIVIDE_AIR_PNR:"DIVIDE_AIR_PNR",RESTORE_COMPONENT:"RESTORE_COMPONENT",RESTORE_COMPONENT_GROUP:"RESTORE_COMPONENT_GROUP",SYNC_COMPONENT:"SYNC_COMPONENT",SYNC_BOOKING:"SYNC_BOOKING",MODIFY_TRAVELERS:"MODIFY_TRAVELERS",GET_SHIPPING_INFO:"GET_SHIPPING_INFO",MODIFY_SHIPPING_INFO:"MODIFY_SHIPPING_INFO",UPDATE_STATUS_TO_REQUEST_CONFIRMED:"UPDATE_STATUS_TO_REQUEST_CONFIRMED",REPRICE_AIR:"REPRICE_AIR"};EzRez.WebApi.AirMixAndMatchAction={SELECT_LEG:"SELECT_LEG",PREVIOUS_LEG:"PREVIOUS_LEG",CONTINUE:"CONTINUE",FILTER_SORT:"FILTER_SORT",UPDATE_PRICE:"UPDATE_PRICE"};EzRez.WebApi.CurrencyFormat=function(b){var a=Object.extend({decimalPlaces:2,thousandsSeparator:",",decimalsSeparator:".",currencySymbol:"$",currencyCode:"USD",locale:"en_US",prefix:"$",suffix:"",prefixCurrencySymbol:true},b);this.thousandsSeparator=a.thousandsSeparator;this.decimalPlaces=a.decimalPlaces;this.decimalsSeparator=a.decimalsSeparator;this.currencySymbol=a.currencySymbol;this.currencyCode=a.currencyCode;this.locale=a.locale;this.prefix=a.prefix;this.suffix=a.suffix;this.prefixCurrencySymbol=a.prefixCurrencySymbol;};EzRez.WebApi.LocaleDateFormats=function(b){var a=Object.extend({firstDayOfWeek:1,monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsLong:["January","February","March","April","May","June","July","August","September","October","November","December"],weekDays1Char:["S","M","T","W","T","F","S"],weekDays2Char:["Su","Mo","Tu","We","Th","Fr","Sa"],weekDaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekDaysLong:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},b);this.firstDayOfWeek=a.firstDayOfWeek;this.monthsShort=a.monthsShort;this.monthsLong=a.monthsLong;this.weekDays1Char=a.weekDays1Char;this.weekDays2Char=a.weekDays2Char;this.weekDaysShort=a.weekDaysShort;this.weekDaysLong=a.weekDaysLong;};EzRez.WebApi.GeoLocation=function(b){var a=Object.extend({lat:0,lng:0,formattedAddress:"",address:{}},b);this.lat=a.lat;this.lng=a.lng;this.formattedAddress=a.formattedAddress;this.address=new EzRez.WebApi.Address(a.address);};EzRez.WebApi.Neighborhood=function(c){var b=Object.extend({id:0,name:"",cityId:0,centerPoint:{},crsName:"",crsId:"",polygonGeoLocations:[]},c);function a(e){return e.map(function(f){return new EzRez.WebApi.GeoLocation(f);});}this.id=b.id;this.name=b.name;this.cityId=b.cityId;this.crsName=b.crsName;this.crsId=b.crsId;this.polygonGeoLocations=a(b.polygonGeoLocations);this.centerPoint=new EzRez.WebApi.GeoLocation(b.centerPoint);};EzRez.WebApi.Address=function(b){var a=Object.extend({addressLines:[],city:"",countryCode:"",stateCode:"",zip:""},b);this.addressLines=a.addressLines;this.city=a.city;this.countryCode=a.countryCode;this.stateCode=a.stateCode;this.zip=a.zip;this.toString=function(){var e=[];var c=a.addressLines.join(" ");if(EzRez.StringUtil.isSet(c)){e.push(c);}if(EzRez.StringUtil.isSet(a.city)){e.push(a.city);}if(EzRez.StringUtil.isSet(a.stateCode)){e.push(a.stateCode);}if(EzRez.StringUtil.isSet(a.zip)){e.push(a.zip);}if(EzRez.StringUtil.isSet(a.countryCode)){e.push(a.countryCode);}return e.join(", ");};};EzRez.WebApi.Price=function(b){var a=Object.extend({maxPoints:0,maxPointsTax:0,taxTotal:0,markup:0,soldAt:0,currency:""},b);EzRez.WebApi.Base.apply(this,arguments);this.maxPoints=a.maxPoints;this.maxPointsTax=a.maxPointsTax;this.taxTotal=a.taxTotal;this.markup=a.markup;this.soldAt=a.soldAt;this.currency=a.currency;};EzRez.WebApi.Room=function(b){var a=Object.extend({name:"",hotelName:"",code:"",description:"",checkIn:0,checkOut:0,rateCode:"",crsName:"",airportCode:"",hotelCode:"",chainCode:"",hotelSharedId:0,numNights:0,numAdults:0,numChildren:0,numTravelers:0,supplierId:0,pricePartial:{},address:{},supplierLocator:""},b);EzRez.WebApi.Base.apply(this,arguments);this.name=a.name;this.hotelName=a.hotelName;this.code=a.code;this.rateCode=a.rateCode;this.chainCode=a.chainCode;this.hotelCode=a.hotelCode;this.description=a.description;this.crsName=a.crsName;this.airportCode=a.airportCode;this.numNights=a.numNights;this.numAdults=a.numAdults;this.numChildren=a.numChildren;this.numTravelers=a.numTravelers;this.supplierId=a.supplierId;this.hotelSharedId=a.hotelSharedId;this.price=new EzRez.WebApi.Price(a.pricePartial);this.address=new EzRez.WebApi.Address(a.address);this.checkIn=new Date(a.checkIn);this.checkOut=new Date(a.checkOut);this.supplierLocator=a.supplierLocator;};EzRez.WebApi.Hotel=function(f){var a=Object.extend({name:"",sharedHotelId:0,hotelCode:"",supplierId:0,connectorPreference:0,neighborhoods:[],amenities:[],address:{},priceForFiltering:0,geoLat:0,geoLng:0,rating:0,compositeScore:0,checkIn:0,checkOut:0,roomPartials:[],crsName:"",brandCode:"",chainCode:"",chainName:"",airportCode:"",pricePartial:{},selectedRoomPackagePriceInCustomerCurrency:{},thumbnailUrl:"",shortDescription:"",propertyDescription:"",preferredGeoLocation:false,opaque:false},f);EzRez.WebApi.Base.apply(this,arguments);var e=$H();function c(){if(e.size()===0){var g=EzRez.Util.Profiler.start("EzRez.WebApi.Hotel ("+this.objectKey+")::build rooms");a.roomPartials.each(function(h){var j=new EzRez.WebApi.Room(h);e.set(j.objectKey,j);});g.stop();}}function b(g){return g.map(function(h){return new EzRez.WebApi.Neighborhood(h);});}this.neighborhoods=b(a.neighborhoods);this.name=a.name;this.sharedId=a.sharedHotelId;this.code=a.hotelCode;this.supplierId=a.supplierId;this.connectorPreference=a.connectorPreference;this.amenities=a.amenities;this.priceForFiltering=a.priceForFiltering;this.price=new EzRez.WebApi.Price(a.pricePartial);this.selectedRoomPackagePriceInCustomerCurrency=new EzRez.WebApi.Price(a.selectedRoomPackagePriceInCustomerCurrency);this.lat=a.geoLat;this.lng=a.geoLng;this.rating=a.rating;this.compositeScore=a.compositeScore;this.checkIn=new Date(a.checkIn);this.checkOut=new Date(a.checkOut);this.address=new EzRez.WebApi.Address(a.address);this.crsName=a.crsName;this.airportCode=a.airportCode;this.brandCode=a.brandCode;this.chainCode=a.chainCode;this.chainName=a.chainName;this.isPreferredGeoLocation=a.preferredGeoLocation;this.opaque=a.opaque;this.propertyDescription=a.propertyDescription;this.shortDescription=a.shortDescription;this.thumbnailUrl=a.thumbnailUrl;this.getRooms=function(){c();return e.values();};this.getRoom=function(g){c();return e.get(g);};};EzRez.WebApi.Car=function(b){var a=Object.extend({name:"",code:"",description:"",airportCode:"",companyCode:"",companyName:"",sippTranslatedCarType:"",crsName:"",pickupTime:0,model:"",returnTime:0,pricePartial:{}},b);EzRez.WebApi.Base.apply(this,arguments);this.name=a.name;this.code=a.code;this.description=a.description;this.airportCode=a.airportCode;this.companyCode=a.companyCode;this.companyName=a.companyName;this.crsName=a.crsName;this.pickupDate=new Date(a.pickupTime);this.returnDate=new Date(a.returnTime);this.price=new EzRez.WebApi.Price(a.pricePartial);this.model=a.model;this.sippTranslatedCarType=a.sippTranslatedCarType;};EzRez.WebApi.Activity=function(b){var a=Object.extend({name:"",activityProductId:0,anyDateEvent:false,numAdults:0,numChildren:0,numInfants:0,totalTravelers:0,crsName:"",eventDateRangeEnd:0,eventDateRangeBegin:0,pricePartial:{}},b);EzRez.WebApi.Base.apply(this,arguments);this.name=a.name;this.productId=a.activityProductId;this.isAnyDateEvent=a.anyDateEvent;this.beginDate=new Date(a.eventDateRangeBegin);this.endDate=new Date(a.eventDateRangeEnd);this.price=new EzRez.WebApi.Price(a.pricePartial);this.numAdults=a.numAdults;this.numChildren=a.numChildren;this.numInfants=a.numInfants;this.totalTravelers=a.totalTravelers;this.crsName=a.crsName;};EzRez.WebApi.Flight=function(b){var a=Object.extend({flightNumber:0,departureAirportCode:"",departureCityName:"",arrivalCityName:"",arrivalAirportCode:"",fareClass:"",equipmentCode:"",cabin:"",airlineCode:"",departureTimestamp:0,arrivalTimestamp:0,supplierCode:"",miles:-1,durationMinutes:-1,stops:0,layoverDurationMinutes:-1,hasLayover:false,bulk:false},b);EzRez.WebApi.Base.apply(this,arguments);this.flightNumber=a.flightNumber;this.equipmentCode=a.equipmentCode;this.departureAirportCode=a.departureAirportCode;this.arrivalAirportCode=a.arrivalAirportCode;this.departureCityName=a.departureCityName;this.arrivalCityName=a.arrivalCityName;this.fareClass=a.fareClass;this.cabin=a.cabin;this.isBulk=a.bulk;this.airlineCode=a.airlineCode;this.supplierCode=a.supplierCode;this.miles=a.miles;this.stops=a.stops;this.layoverDurationMinutes=a.layoverDurationMinutes;this.hasLayover=a.hasLayover;this.departureTimestamp=new Date(a.departureTimestamp);this.arrivalTimestamp=new Date(a.arrivalTimestamp);this.durationMinutes=a.durationMinutes;};EzRez.WebApi.AirLeg=function(c){var b=Object.extend({departureAirportCode:"",arrivalAirportCode:"",departureTimestamp:0,arrivalTimestamp:0,durationMinutes:-1,stops:0,airlines:[],airSegmentPartialList:[]},c);EzRez.WebApi.Base.apply(this,arguments);var a=[];b.airSegmentPartialList.each(function(e){a.push(new EzRez.WebApi.Flight(e));});this.flights=a;this.departureAirportCode=b.departureAirportCode;this.arrivalAirportCode=b.arrivalAirportCode;this.departureTimestamp=new Date(b.departureTimestamp);this.arrivalTimestamp=new Date(b.arrivalTimestamp);this.durationMinutes=b.durationMinutes;this.stops=b.stops;this.airlines=b.airlines;this.isNonStop=a.length===1;};EzRez.WebApi.AirOption=function(b){var a=Object.extend({numAirLegs:0,numAdults:0,numChildren:0,numSeniors:0,numInfantsInSeat:0,numInfantsInLap:0,roundTrip:false,airLegPartialList:[],pricePartial:{},fareBasisCodeList:[]},b);EzRez.WebApi.Base.apply(this,arguments);var c=[];a.airLegPartialList.each(function(e){c.push(new EzRez.WebApi.AirLeg(e));});this.numAirLegs=a.numAirLegs;this.numAdults=a.numAdults;this.numChildren=a.numChildren;this.numSeniors=a.numSeniors;this.numInfantsInSeat=a.numInfantsInSeat;this.numInfantsInLap=a.numInfantsInLap;this.isRoundTrip=a.roundTrip;this.legs=c;this.price=new EzRez.WebApi.Price(a.pricePartial);this.fareBasisCodeList=a.fareBasisCodeList;};EzRez.WebApi.Insurance=function(b){var a=Object.extend({contractName:"",crsName:"",productName:"",description:"",pricePartial:{}},b);EzRez.WebApi.Base.apply(this,arguments);this.contractName=a.contractName;this.crsName=a.crsName;this.productName=a.productName;this.description=a.description;this.price=new EzRez.WebApi.Price(a.pricePartial);};EzRez.WebApi.ShoppingCart=function(l){var h=Object.extend({currentHotelSelection:{},currentProductSelection:"",airSelection:{},hotelPartials:[],activityPartials:{},roomPartials:{},carPartials:{},hasCar:false,hasRoom:false,hasActivity:false,numActivities:0,numCars:0,numRooms:0},l);EzRez.WebApi.Base.apply(this,arguments);var k=$H();var f=$H();var c=$H();var e=$H();var j=function(){if(c.size()===0){var m=EzRez.Util.Profiler.start("EzRez.WebApi.ShoppingCart::build cars");h.carPartials.each(function(n){var o=new EzRez.WebApi.Car(n);c.set(o.objectKey,o);});m.stop();}};var a=function(){if(e.size()===0){var m=EzRez.Util.Profiler.start("EzRez.WebApi.ShoppingCart::build activities");h.activityPartials.each(function(n){var o=new EzRez.WebApi.Activity(n);e.set(o.objectKey,o);});m.stop();}};var g=function(){if(f.size()===0){var m=EzRez.Util.Profiler.start("EzRez.WebApi.ShoppingCart::build rooms");h.roomPartials.each(function(n){var o=new EzRez.WebApi.Room(n);f.set(o.objectKey,o);});m.stop();}};var b=function(){if(k.size()===0){var m=EzRez.Util.Profiler.start("EzRez.WebApi.ShoppingCart::build hotels");h.hotelPartials.each(function(n){var o=new EzRez.WebApi.Hotel(n);k.set(o.objectKey,o);});m.stop();}};this.hasRoom=h.hasRoom;this.hasActivity=h.hasActivity;this.hasCar=h.hasCar;this.numActivities=h.numActivities;this.numCars=h.numCars;this.numRooms=h.numRooms;this.getHotels=function(){b();return k.values();};this.getHotel=function(m){b();return k.get(m);};this.getRooms=function(){g();return f.values();};this.getRoom=function(m){g();return f.get(m);};this.getActivities=function(){a();return e.values();};this.getActivity=function(m){a();return e.get(m);};this.getCars=function(){j();return c.values();};this.getCar=function(m){j();return c.get(m);};this.airSelection=new EzRez.WebApi.AirOption(h.airSelection);this.currentHotelSelection=new EzRez.WebApi.Hotel(h.currentHotelSelection);this.currentProductSelection=h.currentProductSelection;};EzRez.WebApi.Certificate=function(b){var a=Object.extend({agentId:0,custId:0,amount:0,beneficiary:"",enteredDate:0,beginDate:0,endDate:0},b);EzRez.WebApi.Base.apply(this,arguments);this.agentId=a.agentId;this.custId=a.custId;this.amount=a.amount;this.beneficiary=a.beneficiary;this.enteredDate=new Date(a.enteredDate);this.beginDate=new Date(a.beginDate);this.endDate=new Date(a.endDate);};EzRez.WebApi.Products=function(b){var a=Object.extend({hasAir:false,hasRoom:false,hasCar:false,hasActivity:false,hasCruise:false,hasInsurance:false,hasCertificate:false},b);EzRez.WebApi.Base.apply(this,arguments);this.hasAir=a.hasAir;this.hasRoom=a.hasRoom;this.hasCar=a.hasCar;this.hasActivity=a.hasActivity;this.hasCruise=a.hasCruise;this.hasInsurance=a.hasInsurance;this.hasCertificate=a.hasCertificate;};EzRez.WebApi.Travelers=function(b){var a=Object.extend({numPassengers:0,numAdults:0,numSeniors:0,numChildren:0,numInfantsInSeat:0,numInfantsInLap:0,numTotalChildren:0,numTotalAdults:0},b);EzRez.WebApi.Base.apply(this,arguments);this.total=a.numPassengers;this.adults=a.numAdults;this.seniors=a.numSeniors;this.children=a.numChildren;this.infantsInSeat=a.numInfantsInSeat;this.infantsInLap=a.numInfantsInLap;this.totalChildren=a.numTotalChildren;this.totalAdults=a.numTotalAdults;};EzRez.WebApi.Location=function(b){var a=Object.extend({anyAirportCode:"",cityName:"",stateCode:"",countryCode:""},b);EzRez.WebApi.Base.apply(this,arguments);this.cityName=a.cityName;this.stateCode=a.stateCode;this.countryCode=a.countryCode;this.anyAirportCode=a.anyAirportCode;};EzRez.WebApi.DestinationInfo=function(b){var a=Object.extend({earliestTimestamp:null,latestTimestamp:null,departureSearchLocation:null,arrivingSearchLocation:null},b);EzRez.WebApi.Base.apply(this,arguments);this.earliestTimestamp=new Date(a.earliestTimestamp);this.latestTimestamp=new Date(a.latestTimestamp);this.arrivingSearchLocation=new EzRez.WebApi.Location(a.arrivingSearchLocation);this.departureSearchLocation=new EzRez.WebApi.Location(a.departureSearchLocation);};EzRez.WebApi.Search=function(b){var a=Object.extend({departingArea:"",arrivingArea:"",departureDate:0,returnDate:0,airCabin:"",carType:"",featuredHotelIds:[],hotelRoomCount:0,numStops:0,airlineCodes:[],multiDestination:false,roundTrip:true,destinationInfoList:[],timeWindow:0,hasAir:false,hasRoom:false,hasCar:false,hasActivity:false,isRoomCrossSell:false,carCrossSell:false,bookingComponents:""},b);EzRez.WebApi.Base.apply(this,arguments);this.departing={area:a.departingArea,date:new Date(a.departureDate)};this.arriving={area:a.arrivingArea,date:new Date(a.returnDate)};this.travelers=new EzRez.WebApi.Travelers(a);this.products=new EzRez.WebApi.Products(a);this.airCabin=a.airCabin;this.featuredHotelId=a.featuredHotelIds[0];this.featuredHotelIds=a.featuredHotelIds;this.hotelRoomCount=a.hotelRoomCount;this.isRoundTrip=a.roundTrip;this.isMultiDestination=a.multiDestination;this.timeWindow=a.timeWindow;this.hasAir=a.hasAir;this.hasRoom=a.hasRoom;this.hasCar=a.hasCar;this.hasActivity=a.hasActivity;this.isCarCrossSell=a.carCrossSell;this.isRoomCrossSell=a.isRoomCrossSell;this.carType=a.carType;this.numStops=a.numStops;this.airlineCodes=a.airlineCodes;this.destinationInfoList=(function(){var c=[];a.destinationInfoList.each(function(e){c.push(new EzRez.WebApi.DestinationInfo(e));});return c;})();this.bookingComponents=a.bookingComponents;};EzRez.WebApi.Availability=function(k){var g=Object.extend({activityPartials:[],airOptionPartials:[],carPartials:[],numHotels:0,numAirOptions:0,numCars:0,numActivities:0},k);EzRez.WebApi.Base.apply(this,arguments);var j=$H();var e=$H();var c=$H();var f=$H();var h=function(){if(c.size()===0){var l=EzRez.Util.Profiler.start("EzRez.WebApi.Availability::build cars");g.carPartials.each(function(m){var n=new EzRez.WebApi.Car(m);c.set(n.objectKey,n);});l.stop();}};var a=function(){if(e.size()===0){var l=EzRez.Util.Profiler.start("EzRez.WebApi.Availability::build air options");g.airOptionPartials.each(function(m){var n=new EzRez.WebApi.AirOption(m);e.set(n.objectKey,n);});l.stop();}};var b=function(){if(f.size()===0){var l=EzRez.Util.Profiler.start("EzRez.WebApi.Availability::build activities");g.activityPartials.each(function(m){var n=new EzRez.WebApi.Activity(m);f.set(n.objectKey,n);});l.stop();}};this.products=new EzRez.WebApi.Products(g);this.getHotels=function(){return j.values();};this.getHotel=function(l){return j.get(l);};this.addHotel=function(l){var m=new EzRez.WebApi.Hotel(l);j.set(m.objectKey,m);};this.getAirOptions=function(){a();return e.values();};this.getAirOption=function(l){a();return e.get(l);};this.addAirOption=function(l){var m=new EzRez.WebApi.AirOption(l);e.set(m.objectKey,m);};this.getCars=function(){h();return c.values();};this.getCar=function(l){h();return c.get(l);};this.addCar=function(m){var l=new EzRez.WebApi.Car(m);c.set(l.objectKey,l);};this.getActivities=function(){b();return f.values();};this.getActivity=function(l){b();return f.get(l);};this.numHotels=g.numHotels;this.numAirOptions=g.numAirOptions;this.numCars=g.numCars;this.numActivities=g.numActivities;};EzRez.WebApi.Itinerary=function(c){var a=Object.extend({packagePriceInCustomerCurrency:0,totalTax:0,totalPrice:0,packagePriceInPoints:0,paymentTotal:0,hasInsurance:false,roomPartials:[],insurancePartial:{},certificatePartials:[],shoppingCart:{}},c);EzRez.WebApi.Availability.apply(this,arguments);var b=new EzRez.WebApi.Hotel(a);var e=$H();var g=new EzRez.WebApi.Certificate({});delete this.getHotels;delete this.getHotel;var f=function(){if(e.size()>0){return;}var h=EzRez.Util.Profiler.start("EzRez.WebApi.Itinerary::build certificates");a.certificatePartials.each(function(k){var j=new EzRez.WebApi.Certificate(k);e.set(j.objectKey,j);});g=e.values().first();h.stop();};this.packagePriceInCustomerCurrency=a.packagePriceInCustomerCurrency;this.totalTax=a.totalTax;this.paymentTotal=a.paymentTotal;this.packagePriceInPoints=a.packagePriceInPoints;this.insurance=new EzRez.WebApi.Insurance(a.insurancePartial);this.getCertificates=function(){f();return e.values();};this.getCertificate=function(h){f();return e.get(h);};f();this.certificate=g;this.getRooms=b.getRooms;this.getRoom=b.getRoom;this.numRooms=a.roomPartials.length;this.shoppingCart=new EzRez.WebApi.ShoppingCart(a.shoppingCart);};EzRez.WebApi.GrouponInternationalTrackingData=function(b){var a=Object.extend({bookingId:"",grouponCityName:"",grouponCityId:"",grouponTrackingId:"",grouponUserId:"",numRooms:0,pixelTrackingUrl:"",roomContractId:0,soldAtInSupplierCurrency:0,soldAtMinusTaxInSupplierCurrency:0},b);this.bookingId=a.bookingId;this.grouponCityId=a.grouponCityId;this.grouponCityName=a.grouponCityName;this.grouponTrackingId=a.grouponTrackingId;this.grouponUserId=a.grouponUserId;this.numRooms=a.numRooms;this.pixelTrackingUrl=a.pixelTrackingUrl;this.roomContractId=a.roomContractId;this.soldAtInSupplierCurrency=a.soldAtInSupplierCurrency;this.soldAtMinusTaxInSupplierCurrency=a.soldAtMinusTaxInSupplierCurrency;};EzRez.WebApi.Booking=function(b){var a=Object.extend({bookingNumber:0,agencyAgentMarkup:0,agencyCommissionTotal:0,packagePriceInCustomerCurrency:0,packagePriceInPoints:0,customerOwe:0,customerPaymentTotal:0,paymentTotalPoints:0,paymentTotal:0,customerPaidPoints:0,customerPaidCashInCustomerCurrency:0,creditCardType:"",discountCode:"",accountingEntryCodes:"",discountTotalInCustomerCurrency:"",firstPayment:false,frequentFlyerNumber:"",beginDate:"",endDate:"",enteredDate:"",departureAirportCode:"",destinationAirportCode:"",onHold:false,subsequentPayment:false,subscribedToEmailList:false,itineraryPartial:{},leadTravelerPartial:{},travelerPartials:[],redemptionBookingPartial:{},totalTax:0,totalTaxInPoints:0,airPriceInCustomerCurrency:0,carPriceInCustomerCurrency:0,roomPriceInCustomerCurrency:0,activityPriceInCustomerCurrency:0,numParcelPayments:0,paymentMethods:[]},b);EzRez.WebApi.Itinerary.apply(this,[a.itineraryPartial]);this.customerPaidPoints=a.customerPaidPoints;this.customerPaidCashInCustomerCurrency=a.customerPaidCashInCustomerCurrency;this.departureAirportCode=a.departureAirportCode;this.destinationAirportCode=a.destinationAirportCode;this.beginDate=new Date(a.beginDate);this.endDate=new Date(a.endDate);this.enteredDate=new Date(a.enteredDate);this.travelers=new EzRez.WebApi.Travelers(a);this.number=a.bookingNumber;this.packagePriceInCustomerCurrency=a.packagePriceInCustomerCurrency;this.packagePriceInPoints=a.packagePriceInPoints;this.customerOwe=a.customerOwe;this.customerPaymentTotal=a.customerPaymentTotal;this.paymentTotal=a.paymentTotal;this.paymentTotalPoints=a.paymentTotalPoints;this.frequentFlyerNumber=a.frequentFlyerNumber;this.creditCardType=a.creditCardType;this.numParcelPayments=a.numParcelPayments;this.isPaidInFull=(a.customerOwe===0&&a.customerPaymentTotal>0);this.isOnHold=a.onHold;this.isSubsequentPayment=a.subsequentPayment;this.isSubscribedToEmailList=a.subscribedToEmailList;this.agencyAgentMarkup=a.agencyAgentMarkup;this.agencyCommissionTotal=a.agencyCommissionTotal;this.leadTraveler=new EzRez.WebApi.Traveler(a.leadTravelerPartial);this.redemptionBooking=new EzRez.WebApi.RedemptionBooking(a.redemptionBookingPartial);this.discountCode=a.discountCode;this.accountingEntryCodes=a.accountingEntryCodes;this.discountTotal=a.discountTotalInCustomerCurrency;this.isFirstPayment=a.firstPayment;this.totalTax=a.totalTax;this.totalTaxInPoints=a.totalTaxInPoints;this.airPrice=a.airPriceInCustomerCurrency;this.carPrice=a.carPriceInCustomerCurrency;this.roomPrice=a.roomPriceInCustomerCurrency;this.activityPrice=a.activityPriceInCustomerCurrency;this.paymentMethods=a.paymentMethods;};EzRez.WebApi.WebContext=function(b){var a=Object.extend({url:"",clientUrl:"",clientName:"",cobrandName:"",webAssetsRoot:"",develSystemDsn:"",tab:"",pageName:"",referrer:"",fileName:"",debugMode:"",webDevMode:"",agent:"",serverGroupName:"",trueIp:"",},b);EzRez.WebApi.Base.apply(this,arguments);this.isDebugMode=a.debugMode;this.isWebDevMode=a.webDevMode;this.isAgent=a.agent;this.clientUrl=a.clientUrl;this.clientName=a.clientName;this.cobrandName=a.cobrandName;this.referrer=a.referrer;this.url=a.url;this.webAssetsRoot=a.webAssetsRoot;this.develSystemDsn=a.develSystemDsn;this.searchFormTab=a.tab;this.pageName=a.pageName;this.fileName=a.fileName;this.csrfToken=a.csrfToken;this.serverGroupName=a.serverGroupName;this.trueIp=a.trueIp;};EzRez.WebApi.SysConf=function(l){var j=Object.extend({assetVersion:"",hotelsPerPage:10,defaultCountryCode:"US",omnitureAccountId:"",useResultsAccordian:false,displayCashColumn:false,timeZoneOffset:0,timeZoneName:"",sessionTimeoutInMinutes:0,sessionTimeoutWarningInMinutes:0,sessionTrackCookieName:"EZ_SESSION_TRACK",currencyFormat:{},languageCode:"",dateFormat:"",timeFormat:"",release:"",releaseVersion:"",serverHostName:"",clientDatabase:"",deviceType:""},l);EzRez.WebApi.Base.apply(this,arguments);var e="EZ_SESSION_EXPIRATION_WARNING";var c=false;var g=EzRez.Util.Cookie.read(j.sessionTrackCookieName);function b(){c=j.sessionTimeoutInMinutes>j.sessionTimeoutWarningInMinutes&&j.sessionTimeoutWarningInMinutes>0;}function k(){var m=EzRez.Util.Cookie.read(j.sessionTrackCookieName);return EzRez.StringUtil.isSet(m)&&g===m;}function h(n,m){EzRez.Util.Cookie.create(m,n.toUTCString());}function a(m){if(m===undefined||m===null){return false;}if(Object.prototype.toString.call(m)==="[object Date]"){return !isNaN(m.getTime());}else{return false;}}function f(){var n=EzRez.Util.Cookie.read(e);var m=new Date(n);if(!a(m)){m=new Date().add({minutes:j.sessionTimeoutInMinutes});h(m,e);}return m;}this.deviceType=j.deviceType;this.currencyFormat=new EzRez.WebApi.CurrencyFormat(j.currencyFormat);this.hotelsPerPage=j.hotelsPerPage;this.defaultCountryCode=j.defaultCountryCode;this.useResultsAccordian=j.useResultsAccordian;this.omnitureAccountId=j.omnitureAccountId;this.isDisplayCashColumn=j.displayCashColumn;this.timeZoneOffset=j.timeZoneOffset;this.timeZoneName=j.timeZoneName;this.getLanguageCode=j.languageCode;this.dateFormat=j.dateFormat;this.timeFormat=j.timeFormat;this.systemTime=Date.convertToOffset(new Date(),j.timeZoneOffset);this.sessionTrackCookieName=j.sessionTrackCookieName;this.sessionTrackId=g;this.assetVersion=j.assetVersion;this.release=j.release;this.releaseVersion=j.releaseVersion;this.serverHostName=j.serverHostName;this.clientDatabase=j.clientDatabase;this.isSessionTimingOut=function(){var m=new Date(f());m.add({minutes:(-j.sessionTimeoutWarningInMinutes)});return c&&new Date().isAfter(m)&&k();};this.isActiveSession=function(){var o=f();var m=new Date();var n=k();return o.isAfter(m)&&n;};this.resetSessionExpiration=function(){var m=new Date().add({minutes:j.sessionTimeoutInMinutes});h(m,e);};this.resetSessionExpiration();b();};EzRez.WebApi.Traveler=function(b){var a=Object.extend({firstName:"",lastName:"",gender:"",email:"",phones:[],address:{},dateOfBirth:0},b);EzRez.WebApi.Base.apply(this,arguments);this.firstName=a.firstName;this.lastName=a.lastName;this.gender=a.gender;this.email=a.email;this.phones=a.phones;this.address=new EzRez.WebApi.Address(a.address);this.dateOfBirth=Date.convertToOffset(new Date(a.dateOfBirth),0);};EzRez.WebApi.RedemptionBooking=function(b){var a=Object.extend({contractName:"",redemptionConfirmationCode:"",segmentation:"",promotionTotalPoints:0,redemptionDetailPartialList:[]},b);EzRez.WebApi.Base.apply(this,arguments);var c=[];a.redemptionDetailPartialList.each(function(e){c.push(new EzRez.WebApi.RedemptionDetail(e));});this.redemptionDetails=c;this.contractName=a.contractName;this.redemptionConfirmationCode=a.redemptionConfirmationCode;this.segmentation=a.segmentation;this.promotionTotalPoints=a.promotionTotalPoints;};EzRez.WebApi.RedemptionDetail=function(b){var a=Object.extend({promotionContract:"",maxEarnPoints:0,promotionPoints:0},b);EzRez.WebApi.Base.apply(this,arguments);this.promotionContract=a.promotionContract;this.maxEarnPoints=a.maxEarnPoints;this.promotionPoints=a.promotionPoints;};EzRez.WebApi.TravelerProfile=function(b){var a=Object.extend({totalRedemptionPoints:0,customInfo:"",accountDisplay:"",externalProfileId:"",lastLoggedInTime:0,highestTier:"",segmentation:"",companyName:"",representativeCardNum:"",isCorporate:false,representativePersonId:"",externalSessionId:""},b);EzRez.WebApi.Traveler.apply(this,arguments);this.totalRedemptionPoints=a.totalRedemptionPoints;this.customInfo=a.customInfo;this.accountDisplay=a.accountDisplay;this.externalProfileId=a.externalProfileId;this.lastLoggedInTime=new Date(a.lastLoggedInTime);this.highestTier=a.highestTier;this.segmentation=a.segmentation;this.isCorporate=a.isCorporate;this.companyName=a.companyName;this.representativeCardNum=a.representativeCardNum;this.representativePersonId=a.representativePersonId;this.externalSessionId=a.externalSessionId;};EzRez.WebApi.Agent=function(b){var a=Object.extend({id:0,type:"",agencyId:0,firstName:"",lastName:""},b);EzRez.WebApi.Base.apply(this,arguments);this.id=a.id;this.type=a.type;this.agencyId=a.agencyId;this.firstName=a.firstName;this.lastName=a.lastName;};EzRez.WebApi.RedemptionContract=function(b){var a=Object.extend({customerMessage:""},b);EzRez.WebApi.Base.apply(this,arguments);this.customerMessage=a.customerMessage;};EzRez.WebApi.DealGroupSystemConfiguration=function(b){var a=Object.extend({dealGroupsSystemConfiguration:{id:"",clientName:"",defaultStarRating:"",daysToArrival:"",lengthOfStayInDays:"",daysToMine:""}},b);EzRez.WebApi.Base.apply(this,arguments);this.id=a.dealGroupsSystemConfiguration.id;this.clientName=a.dealGroupsSystemConfiguration.clientName;this.defaultStarRating=a.dealGroupsSystemConfiguration.defaultStarRating;this.daysToArrival=a.dealGroupsSystemConfiguration.daysToArrival;this.lenghtOfStayInDays=a.dealGroupsSystemConfiguration.lengthOfStayInDays;this.daysToMine=a.dealGroupsSystemConfiguration.daysToMine;this.success=a.success;this.errorMessage=a.errorMessage;this.errorInputName=a.errorInputName;this.switchflyErrorCode=a.switchflyErrorCode;this.redirectUrl=a.redirectUrl;};var formWasSubmitted=false;function validateAndDisableForm(a){if(validateForm(a)){a.submit.disabled=true;return true;}else{return false;}}function disableForm(a){a.submit.disabled=true;return true;}function submitAndDisableForm(a){if(!formWasSubmitted){formWasSubmitted=true;a.submit();}return true;}function submitForm(a){var b=document[a];if(!b){return;}b.submit();}function confirmAction(a){return confirm("Are you sure you want to "+a);}function displaySection(c,b){var a=document.getElementById(b);if(c){a.style.visibility="visible";a.style.display=(a.tagName.toUpperCase()!="TR"||document.all)?"block":"table-row";}else{a.style.visibility="hidden";a.style.display="none";}}function visibilitySection(c,b){var a=document.getElementById(b);if(c){a.style.visibility="visible";}else{a.style.visibility="hidden";}}function areaWindow(a){bookWindow=window.open(a,"_blank","height=500,width=400,scrollbars=yes");bookWindow.focus();}function newWindow(a){bookWindow=window.open(a,"_blank","height=500,width=680,scrollbars=yes");bookWindow.focus();}function newTallWindow(a){bookWindow=window.open(a,"_blank","height=700,width=680,scrollbars=yes");bookWindow.focus();}function isText(a,f){var b=/^[a-zA-Z0-9]+$/;if(b.test(a.value)){return true;}else{alert(f);try{a.focus();}catch(c){}return false;}}function ValidOrEmptyPtc(a,f){if(a.value.length>3){alert(f);return false;}if(a.value.length==0){return true;}var b=/^[a-zA-Z0-9]+$/;if(b.test(a.value)){return true;}else{alert(f);try{a.focus();}catch(c){}return false;}}function isNonNull(a,c){if(EzRez.StringUtil.trim(a.value)>""){return true;}else{alert(c);try{a.focus();}catch(b){}return false;}}function isPercentage(a,g){var b=a.value;var f=parseFloat(b);if(!isNaN(f)&&f>=0&&f<=100){if(b.indexOf(".")>=b.length-3){return true;}}alert(g);try{a.focus();}catch(c){}return false;}function isNumeric(a,f){var b=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/;if(b.test(a.value)){return true;}else{alert(f);try{a.focus();}catch(c){}return false;}}function isNumericList(a,h){if(EzRez.StringUtil.trim(a.value)==""){return true;}var g=a.value.split(/ *, */);var c=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/;for(var b=0;b<g.length;b++){if(!c.test(g[b])){alert(h);try{a.focus();}catch(f){}return false;}}return true;}function isIntegerList(a,h){if(EzRez.StringUtil.trim(a.value)==""){return true;}var g=a.value.split(",");var c=/(^-?\d\d*$)/;for(var b=0;b<g.length;b++){if(!c.test(EzRez.StringUtil.trim(g[b]))){alert(h);try{a.focus();}catch(f){}return false;}}return true;}function isPositive(b,c){if(b.value>0){return true;}else{alert(c);try{b.focus();}catch(a){}return false;}}function isPositiveOrZero(b,c){if(b.value>=0){return true;}else{alert(c);try{b.focus();}catch(a){}return false;}}function isInteger(a,f){var b=/(^-?\d\d*$)/;if(b.test(a.value)){return true;}else{alert(f);try{a.focus();}catch(c){}return false;}}function isEmail(a,f){var b=/^(((\"){0,1}[0-9a-zA-Z_\ ]{1,}(\"){0,1}(\ ){0,}){0,1}\([\w-]+(\.[\w-]+)*@[a-zA-Z0-9]([\w\.-]*[a-zA-Z0-9])*\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]\))|([\w-]+(\.[\w-]+)*@[a-zA-Z0-9]([\w\.-]*[a-zA-Z0-9])*\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z])$/;if(b.test(a.value)){return true;}else{alert(f);try{a.focus();}catch(c){}return false;}}function isPhoneNum(a,c){if(a&&a.value.length>=5&&a.value!="00000"){return true;}else{alert(c);try{a.focus();}catch(b){}return false;}}function isRadioSelected(c,g){var b=false;for(var a=0;a<c.length;a++){if(c[a].checked){b=true;break;}}if(b){return true;}else{alert(g);try{c[0].focus();}catch(f){}return false;}}function validateCountryState(f,a,c){if((f.value=="US"&&a.options[a.selectedIndex].value=="")||(f.value=="CA"&&a.options[a.selectedIndex].value=="")){alert(err_message);try{a.focus();}catch(b){}return false;}else{return true;}}function validateSelection(c,b){if((c.options[c.selectedIndex].value==0)||(c.options[c.selectedIndex].value=="")){alert(b);try{c.focus();}catch(a){}return false;}else{return true;}}validationFields=new Array();validationFields2=new Array();validationMessages=new Array();validationType=new Array();function validateForm(b){for(var a=0;a<validationFields.length;a++){if(validationType[a]=="text"){if(!isText(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="valid_or_empty_ptc"){if(!ValidOrEmptyPtc(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="non null"){if(!isNonNull(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="checkbox_with_text"){if(validationFields[a].checked&&!isNonNull(validationFields2[a],validationMessages[a])){return false;}}else{if(validationType[a]=="int"){if(!isInteger(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="double"){if(!isNumeric(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="email"){if(!isEmail(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="country_state"){if(!validateCountryState(validationFields[a],validationFields2[a],validationMessages[a])){return false;}}else{if(validationType[a]=="selection"){if(!validateSelection(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="positive"){if(!isNumeric(validationFields[a],validationMessages[a])){return false;}if(!isPositive(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="positive_or_zero"){if(!isNumeric(validationFields[a],validationMessages[a])){return false;}if(!isPositiveOrZero(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="numeric_list"){if(!isNumericList(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="integer_list"){if(!isIntegerList(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="phone_num"){if(!isPhoneNum(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="empty_or_double"){if(!(validationFields[a]&&validationFields[a].value.length===0)&&!isNumeric(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="empty_double_positive"){if(!(validationFields[a]&&validationFields[a].value.length===0)&&(!isPositiveOrZero(validationFields[a],validationMessages[a])||!isNumericList(validationFields[a],validationMessages[a]))){return false;}}else{if(validationType[a]=="percentage"){if(!isPercentage(validationFields[a],validationMessages[a])){return false;}}else{if(validationType[a]=="radio_button"){if(!isRadioSelected(validationFields[a],validationMessages[a])){return false;}}else{console.error("No validation is added");}}}}}}}}}}}}}}}}}}}return true;}function addValidation(e,f,c,b){if(e){var a=findValidationField(e);if(a==-1){var g=validationFields.length;validationFields[g]=e;validationFields2[g]=f;validationMessages[g]=c;validationType[g]=b;}}}function removeValidation(b){var a=findValidationField(b);if(a>=0){validationFields[a]=null;validationFields2[a]=null;validationMessages[a]=null;validationType[a]=null;}}function findValidationField(b){var c=-1;for(var a=0;a<validationFields.length;a++){if(validationFields[a]==b){c=a;break;}}return c;}function isDate(f,e,a,c){var b=new Date();day=a[a.selectedIndex].value;f=f-1;if(b.getMonth()>f){e=((e==99999)?b.getFullYear()+1:e);}else{e=((e==99999)?b.getFullYear():e);}var g=new Date(e,f,day);if((e==g.getFullYear())&&(f==g.getMonth())&&(day==g.getDate())){makeDatesClose(c,e,a);return true;}else{for(d=28;d<day;d++){var g=new Date(e,f,d);if((e==g.getFullYear())&&(f==g.getMonth())&&(d==g.getDate())){a[d-1].selected=true;}else{break;}}makeDatesClose(c,e,a);return false;}}function makeDatesClose(f,c,a){try{var g=f.date1_month.value*1;var k=f.date2_month.value*1;var b=f.date1_day.value*1;var j=f.date2_day.value*1;if(g<=k){months_diff=k-g;}else{months_diff=k-g+12;}if((months_diff>4)||((months_diff==0)&&(b>=j))){changeDate2(c,a,f);}if((g==k)&&(f.date1_day.value*1>f.date2_day.value*1)){f.date2_day.value=f.date1_day.value*1;}}catch(h){}}function roundToPennies(a){var b=Math.round(a*Math.pow(10,2))/Math.pow(10,2);return b.toFixed(2);}function changeClass(b,a){b.className=a;}var req;function loadXMLDoc(a){if(window.XMLHttpRequest){req=new XMLHttpRequest();req.onreadystatechange=function(){processReqChange();};req.open("GET",a,true);req.send(null);}else{if(window.ActiveXObject){isIE=true;req=new ActiveXObject("Microsoft.XMLHTTP");if(req){req.onreadystatechange=function(){processReqChange();};req.open("GET",a,true);req.send();}}}}function processReqChange(){if(req.readyState==4){if(req.status==200){processAjaxResponse();}else{alert("There was a problem retrieving the XML data:\n"+req.statusText);}}}function hasClass(e,c){var b=e.className.split(" ");for(var a=0;a<b.length;a++){if(b[a]==c){return true;}}return false;}function appendClass(b,a){if(!hasClass(b,a)){b.className=b.className+" "+a;}}function removeClass(b,a){if(hasClass(b,a)){b.className=b.className.replace(a,"");}}function swapClass(b,a,c){removeClass(b,a);appendClass(b,c);}function validateCPF(h){if(h.length!==11||h==="00000000000"||h==="11111111111"||h==="22222222222"||h==="33333333333"||h==="44444444444"||h==="55555555555"||h==="66666666666"||h==="77777777777"||h==="88888888888"||h==="99999999999"){return false;}var a,b,f,e,c;var g=new Array(10);c=parseInt(h.substr(9,2),10);for(b=0;b<=8;b++){g[b]=h.substr(b,1);}a=10;f=0;for(b=0;b<=8;b++){f=f+g[b]*a;a=a-1;}g[9]=f%11;if(g[9]<2){g[9]=0;}else{g[9]=11-g[9];}a=11;f=0;for(b=0;b<=9;b++){f=f+g[b]*a;a=a-1;}g[10]=f%11;if(g[10]<2){g[10]=0;}else{g[10]=11-g[10];}e=g[9]*10+g[10];if(e!==c){return false;}return true;}var validateNonEmptyField=function(a,b){if($F(a).blank()){alert(b);$(a).focus();return false;}return true;};function displayDetails(c,b,a,e){var h=document.getElementById(c);if(!h){return;}var g=h.style.visibility;var f=(g=="visible"||g=="")?false:true;displaySection(f,c);createDetailsLinkText(f,b,a,e);}function createDetailsLinkText(f,b,a,c){var g=document.getElementById(b);if(!g){return;}var e=(f)?a:c;g.innerHTML=e;}function displayAllDetails(h,b,f,a,e,g,c){for(i=0;i<b.length;i++){displaySection(h,b[i].divId);createDetailsLinkText(h,b[i].linkTextId,a,e);}createShowHideAllLinkText(h,f,g,c);}function createShowHideAllLinkText(f,b,e,a){var g=document.getElementById(b);if(!g){return;}var c=(f)?e:a;g.innerHTML=c;}var highZ=3;function showHelp(a,f){var e=xGetElementById("helpAreaHelpContent");var c=xGetElementById("helpArea");if(!c){var b=document.getElementsByTagName("body").item(0);c=document.createElement("DIV");c.setAttribute("id","helpArea");c.className="helpBox";helpBar=document.createElement("DIV");helpBar.className="helpBar";helpCloseImg=document.createElement("IMG");helpCloseImg.setAttribute("src","/images/delete.gif");helpCloseImg.setAttribute("align","right");xAddEventListener(helpCloseImg,"mousedown",hideHelpArea,false);helpBar.appendChild(helpCloseImg);c.appendChild(helpBar);e=document.createElement("DIV");e.className="helpContent";e.setAttribute("id","helpAreaHelpContent");c.appendChild(e);b.appendChild(c);}e.innerHTML=f;xMoveTo(c,xPageX(a)+50,xPageY(a));c.style.display="block";}function showModal(b,a){$$(".helpBox").each(function(f){f.style.display="none";});var c=xGetElementById(a);xMoveTo(c,xPageX(b)+50,xPageY(b));var e=$(c).down(".closeImage");xAddEventListener(e,"mousedown",hideElement(a),false);c.style.display="block";}function hideElement(a){return function(){var b=xGetElementById(a);if(b){b.style.display="none";}};}function hideHelpArea(){var a=xGetElementById("helpArea");if(a){a.style.display="none";}}(function(a,b,c){b.Validator=function(e,p){var m=b.Util.Event.pubsub,o=this,k={inputErrorLabelClass:"validation-error",errorMessagePosition:"afterLabel",errorMessageClass:"validation-error-message",labeledSectionClass:"labeledInput",nodesToValidate:"input, select",alwaysAllowEmptyFields:false,rules:{},errorMessages:{},validateAllFieldsOnSubmit:true},j=Object.extend(k,p);function f(t,r){var q=j.errorMessagePosition,u=a(document.createElement("span")),v=t.up("."+j.labeledSectionClass);u.addClassName(j.errorMessageClass);u.innerHTML=r;if(v.down("."+j.errorMessageClass)){return;}switch(q){case"beforeLabel":v.down("label").insert({before:u});break;case"afterInput":v.down("input").insert({after:u});break;default:v.down("label").insert({after:u});break;}t.addClassName(j.inputErrorLabelClass);}function l(q){var r=q.up(".labeledInput").down("."+j.errorMessageClass);if(r){r.remove();}q.removeClassName(j.inputErrorLabelClass);}function n(z,r){if(a(z).hasAttribute("disabled")){return true;}var t=z.readAttribute("data-validate");t=t?t.split(" "):[];for(var u=0,y=t.length;u<y;u++){var x=t[u],v=j.errorMessages[x]||j.errorMessages.other,w,q;if(j.rules.hasOwnProperty(x)){w=z.readAttribute("data-validate-message");if((j.alwaysAllowEmptyFields&&!r)||x!=="required"&&z.getValue()===""||j.rules[x](z)){l(z);}else{q=w?w:v;b.Util.Event.pubsub.publish("validator/onError",[z,q]);return false;}}}if(t.length>0){m.publish("validator/onSuccess",[z,t]);}return true;}function h(q){n(q);}function g(q){var w=o.form,t=0,r=w.select(j.nodesToValidate),u=0,v=r.length;for(u;u<v;u++){if(!n(a(r[u]),true)){t+=1;}}if(t>0){w.addClassName("has-errors");if(q){q.preventDefault();}return false;}else{w.removeClassName("has-errors");return true;}}this.form=a(e);this.validateAll=g;(function(){var q=o.form;q.addClassName("form-under-validation").getElementsBySelector(j.nodesToValidate).each(function(r){a(r).on("blur",function(t){h(a(t.target));});});m.subscribe("validator/onError",f);if(j.validateAllFieldsOnSubmit){q.onsubmit=g;}}());};b.Validator.Rules={email:function(e){return e.getValue().search(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)!==-1;},required:function(e){return e.getValue().search(/\S/)!==-1;},numeric:function(e){return e.getValue().search(/^\s*\d+\s*$/)!==-1;},alpha:function(e){return e.getValue().search(/^[a-zA-Z]+$/)!==-1;},alphaNumeric:function(e){return e.getValue().search(/^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$/)!==-1;}};b.Validator.ErrorMessages={email:"Please enter a valid email.",required:"This field is required.",numeric:"Only numbers are permitted.",alpha:"Only letters are permitted.",alphaNumeric:"Only letters and numbers are permitted.",other:"Invalid input. Please try again."};}($,EzRez,undefined));if(EzRez===undefined){throw ("ezrez-validation-strategy.js requires ezrez.js");}if(XRegExp===undefined){throw ("ezrez-validation-strategy.js requires xregexp.js");}if(XRegExp.addUnicodePackage===undefined){throw ("ezrez-validation-strategy.js requires unicode-base.js and unicode-categories.js");}EzRez.ValidationStrategy={};EzRez.ValidationStrategy.COBRAND_NAME=XRegExp("^[\\p{L}\\p{Nd}\\-_]+$");EzRez.ValidationStrategy.ADDRESS_LINE=XRegExp("^[\\p{L}\\p{Nd}\\.\\-\\s#&',:\\/\\\\]+$");EzRez.ValidationStrategy.NAME=XRegExp("^[\\p{L}\\p{Nd}_\\.\\-\\s~,'`]+$");EzRez.ValidationStrategy.PROPERTY_NAME=XRegExp("^[\\w\\d\\-\\._]+$");